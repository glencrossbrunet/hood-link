

/* Copyright Plotly Inc. 
All material herein is subject to copyright and 1-year license terms as described at 
https://plot.ly/licensing. Using or modifying this file is strictly prohibited without
purchasing a license or receiving written permission from Plotly Inc */


(function(){if(!window.Plotly){window.Plotly={}}var L=Plotly.Plots={};function Q(){}function H(T,R){if(T in window.Plotly){return }var U={};for(var S=0;S<R.length;S++){U[R[S]]=Q}window.Plotly[T]=U}H("Annotations",["add","allArrowheads","draw","drawAll"]);H("Axes",["setTypes","convertOne","convertToNums","setConvert","doAutoRange","expand","autoBin","autoTicks","tickIncrement","tickFirst","tickText","doTicks"]);H("Bars",["calc","plot","setPositions"]);H("Boxes",["calc","plot","setPositions","style"]);H("Drawing",["rgb","opacity","addOpacity","strokeColor","fillColor","setPosition","setSize","setRect","translatePoints","traceStyle","lineGroupStyle","fillGroupStyle","pointStyle","styleText"]);H("ErrorBars",["pushRef2GDC","styleBoxDrop","ydr","plot","style"]);H("Fx",["init","hover","unhover","click","modeBar","dragAlign","dragCursors","dragClear","autoGrowInput"]);H("Heatmap",["calc","plot","margin"]);H("Histogram",["calc"]);H("Legend",["lines","points","bars","boxes","draw"]);H("Lib",["dateTime2ms","isDateTime","ms2DateTime","findBin","distinctVals","nestedProperty","pauseEvent","lpad","aggNums","len","mean","stdev","VERBOSE","TIMER","log","markTime","constrain","notifier","identity"]);H("Scatter",["calc","plot"]);L.defaultColors=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"];Plotly.colorscales={"YIGnBu":[[0,"rgb(8, 29, 88)"],[0.125,"rgb(37, 52, 148)"],[0.25,"rgb(34, 94, 168)"],[0.375,"rgb(29, 145, 192)"],[0.5,"rgb(65, 182, 196)"],[0.625,"rgb(127, 205, 187)"],[0.75,"rgb(199, 233, 180)"],[0.875,"rgb(237, 248, 217)"],[1,"rgb(255, 255, 217)"]],"YIOrRd":[[0,"rgb(128, 0, 38)"],[0.125,"rgb(189, 0, 38)"],[0.25,"rgb(227, 26, 28)"],[0.375,"rgb(252, 78, 42)"],[0.5,"rgb(253, 141, 60)"],[0.625,"rgb(254, 178, 76)"],[0.75,"rgb(254, 217, 118)"],[0.875,"rgb(255, 237, 160)"],[1,"rgb(255, 255, 204)"]],"RdBu":[[0,"rgb(33, 102, 172)"],[0.125,"rgb(67, 147, 195)"],[0.25,"rgb(146, 197, 222)"],[0.375,"rgb(209, 229, 240)"],[0.5,"rgb(247, 247, 247)"],[0.625,"rgb(253, 219, 199)"],[0.75,"rgb(244, 165, 130)"],[0.875,"rgb(214, 96, 77)"],[1,"rgb(178, 24, 43)"]],"Greens":[[0,"rgb(0, 68, 27)"],[0.125,"rgb(0, 109, 44)"],[0.25,"rgb(35, 139, 69)"],[0.375,"rgb(65, 171, 93)"],[0.5,"rgb(116, 196, 118)"],[0.625,"rgb(161, 217, 155)"],[0.75,"rgb(199, 233, 192)"],[0.875,"rgb(229, 245, 224)"],[1,"rgb(247, 252, 245)"]],"rainbow":[[0,"rgb(0, 0, 150)"],[0.125,"rgb(0, 25, 255)"],[0.25,"rgb(0, 152, 255)"],[0.375,"rgb(44, 255, 202)"],[0.5,"rgb(151, 255, 96)"],[0.625,"rgb(255, 234, 0)"],[0.75,"rgb(255, 111, 0)"],[0.875,"rgb(223, 0, 0)"],[1,"rgb(132, 0, 0)"]],"portland":[[0,"rgb(12,51,131)"],[0.25,"rgb(10,136,186)"],[0.5,"rgb(242,211,56)"],[0.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],"picnic":[[0,"rgb(0,0,255)"],[0.1,"rgb(51,153,255)"],[0.2,"rgb(102,204,255)"],[0.3,"rgb(153,204,255)"],[0.4,"rgb(204,204,255)"],[0.5,"rgb(255,255,255)"],[0.6,"rgb(255,204,255)"],[0.7,"rgb(255,153,255)"],[0.8,"rgb(255,102,204)"],[0.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],"greys":[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],"bluered":[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]]};Plotly.defaultColorscale=Plotly.colorscales.YIGnBu;(function(){var R=document.createElement("style");R.appendChild(document.createTextNode(""));document.head.appendChild(R);var Y=R.sheet;function Z(b,c){if(Y.insertRule){Y.insertRule(b+"{"+c+"}",0)}else{if(lib.styleSheet.addRule){Y.addRule(b,c,0)}else{console.log("addStyleRule failed")}}}function a(b){return String(Math.round((1-b)*100))+"%"}for(var U in Plotly.colorscales){var S=Plotly.colorscales[U],X="",V="";for(var T=S.length-1;T>=0;T--){X+=", "+S[T][1]+" "+a(S[T][0]);V+=", color-stop("+a(S[T][0])+","+S[T][1]+")"}var W="background: "+S[S.length-1][1]+";background: -moz-linear-gradient(top"+X+");background: -webkit-gradient(linear, left top, left bottom"+V+");background: -webkit-linear-gradient(top"+X+");background: -o-linear-gradient(top"+X+");background: -ms-linear-gradient(top"+X+");background: linear-gradient(to bottom"+X+");filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='"+S[S.length-1][1]+"',endColorstr='"+S[0][1]+"',GradientType=0);";Z("."+U,W)}}());function G(){return{title:"Click to enter Plot title",xaxis:Plotly.Axes.defaultAxis({range:[-1,6]}),yaxis:Plotly.Axes.defaultAxis({range:[-1,4]}),legend:{bgcolor:"#fff",bordercolor:"#000",borderwidth:1,font:{family:"",size:0,color:""},traceorder:"normal"},width:700,height:450,autosize:"initial",margin:{l:80,r:80,t:80,b:80,pad:2},paper_bgcolor:"#fff",plot_bgcolor:"#fff",barmode:"stack",bargap:0.2,bargroupgap:0,boxmode:"overlay",boxgap:0.3,boxgroupgap:0.3,font:{family:"'Open sans', verdana, arial, sans-serif",size:12,color:"#000"},titlefont:{family:"",size:0,color:""},dragmode:"zoom",hovermode:"x"}}var F={scatter:{framework:E},bar:{framework:E},heatmap:{framework:E},histogramx:{framework:E},histogramy:{framework:E},histogram2d:{framework:E},box:{framework:E}};var J=["bar","histogramx","histogramy"];L.isBar=function(R){return J.indexOf(R)!=-1};var P=["heatmap","histogram2d"];L.isHeatmap=function(R){return P.indexOf(R)!=-1};L.newTab=function(S,R){C(S);E(S,R)};function C(S){var R=(typeof S=="string")?document.getElementById(S):S;R.mainsite=Boolean($("#plotlyMainMarker").length);if(R.mainsite){makeGraphToolMenu(R)}}function B(X,R){var S={},W=[],V;for(V=0;V<X.length;V++){old_trace=X[V];S[old_trace["name"]]=old_trace}for(V=0;V<R.length;V++){new_trace=R[V];S[new_trace["name"]]=new_trace}var U=Object.keys(S);for(V=0;V<U.length;V++){var T=U[V];W.push(S[T])}return W}L.positionBrand=function(S){$(S).find(".link-to-tool").remove();var R=$('<div class="link-to-tool"><a href="#" class="link--impt">view in plotly</a></div>').appendTo(S.layout._paperdiv.node());if(S.shareplot){var T=window.location.pathname.split("/");R.find("a").attr("href","/"+T[2]+"/"+T[1]).attr("target","_blank")}else{R.find("a").click(function(){var U=$('<div id="hiddenform" style="display:none;"><form action="https://plot.ly/external" method="post" target="_blank"><input type="text" name="data" /></form></div>').appendTo(S);U.find("input").val(L.graphJson(S,false,"keepdata").replace(/\\/g,"\\\\").replace(/'/g,"\\'"));U.find("form").submit();U.remove();return false})}};Plotly.plot=function(k,m,h){Plotly.Lib.markTime("in plot");if(typeof k=="string"){k=document.getElementById(k)}k.mainsite=Boolean($("#plotlyMainMarker").length);var S=((typeof k.data==="undefined")&&$.isArray(m));if($.isArray(m)){if(S){k.data=m}else{k.data.push.apply(k.data,m)}k.empty=false}if(k.data&&k.data[0]&&k.data[0].type){k.mainPlotType=k.data[0].type}if(k.mainPlotType&&k.mainPlotType.indexOf("Plot")!=-1){if(m){k.data=m;k.plotType=k.data[0].type}k.layout=h;k.layout._container=d3.select(k).select(".plot-container");if(k.layout._container.empty()){k.layout._container=d3.select(k).append("div").classed(".plot-container",true).classed("plotly",true)}k.paperdiv=k.layout._container.select(".svg-container");if(k.paperdiv.empty()){k.paperdiv=k.layout._container.append("div").classed("svg-container",true).style("position","relative")}if(k.layout.autosize=="initial"){setGraphContainerHeight(k);K(k,{});k.layout.autosize=true}if(!k.framework||k.framework.name!="micropolarPlotlyAdapter"){k.framework=micropolar.adapter.plotly()}k.framework({container:k.paperdiv.node(),data:k.data,layout:k.layout});k.paper=k.framework.svg();return null}else{delete k.mainPlotType}if(k.data&&k.data.length>0){var Y=F[k.data[0].type||"scatter"].framework,l=L.getSubplots(k).join(""),Z=((k.layout&&k.layout._plots)?Object.keys(k.layout._plots):[]).join("");if(!k.framework||k.framework!=Y||!k.layout||S||(Z!=l)){k.framework=Y;Y(k,h)}}else{if((typeof k.layout==="undefined")||S){E(k,h)}}$(k).find(".data-only").attr("disabled",!k.data||k.data.length===0);var c=k.layout,W,V,e,X,a,U;k.firstscatter=true;k.numboxes=0;Plotly.Axes.setTypes(k);k.calcdata=[];k.hmpixcount=0;k.hmlumcount=0;Plotly.Lib.markTime("done Plotly.Axes.setType");for(var b in k.data){var j=k.data[b],T=j.type||"scatter",R=F[T],g={};a=[];if(R.framework!=k.framework){console.log("Oops, tried to put data of type "+(j.type||"scatter")+" on an incompatible graph controlled by "+(k.data[0].type||"scatter")+" data. Ignoring this dataset.");continue}if(!("name" in j)){if("ysrc" in j){var o=j.ysrc.split("/");j.name=o[o.length-1].replace(/\n/g," ")}else{j.name="trace "+b}}if(T=="scatter"){a=Plotly.Scatter.calc(k,j)}else{if(L.isBar(T)){if(T=="bar"){a=Plotly.Bars.calc(k,j)}else{a=Plotly.Histogram.calc(k,j)}}else{if(L.isHeatmap(T)){a=Plotly.Heatmap.calc(k,j)}else{if(T=="box"){a=Plotly.Boxes.calc(k,j)}}}}if(!("line" in j)){j.line={}}if(!("marker" in j)){j.marker={}}if(!("line" in j.marker)){j.marker.line={}}if(!("textfont" in j)){j.textfont={}}if(!$.isArray(a)||!a[0]){a=[{x:false,y:false}]}if(!a[0].t){a[0].t={}}a[0].t.curve=b;a[0].t.cdcurve=k.calcdata.length;k.calcdata.push(a);Plotly.Lib.markTime("done with calcdata for "+b)}L.setStyles(k);Plotly.Plots.getSubplots(k).forEach(function(q){var p=k.layout._plots[q];Plotly.Bars.setPositions(k,p);Plotly.Boxes.setPositions(k,p)});Plotly.Lib.markTime("done with setstyles and bar/box adjustments");Plotly.Axes.list(k,"y").filter(function(p){return p.autorange}).forEach(function(p){Plotly.Axes.expand(p,Plotly.ErrorBars.ydr(k,p),{padded:true})});Plotly.Lib.markTime("done Plotly.ErrorBars.ydr");Plotly.Annotations.calcAutorange(k);var f=true;Plotly.Axes.list(k).forEach(function(p){Plotly.Axes.doAutoRange(p);if(!$.isNumeric(p._m)||!$.isNumeric(p._b)){f=false;console.log("error with axis scaling",p)}});if(!f){Plotly.lib.notifier("Something went wrong with axis scaling","long");return }Plotly.Axes.doTicks(k,"redraw");Plotly.Lib.markTime("done autorange and ticks");Plotly.Plots.getSubplots(k).forEach(function(v){var q=k.layout._plots[v],t=[],p=[],r=[];for(var u in k.calcdata){a=k.calcdata[u];U=a[0].t.type;if((a[0].t.xaxis||"x")+(a[0].t.yaxis||"y")!=v){continue}if(L.isHeatmap(U)){Plotly.Heatmap.plot(k,q,a);Plotly.Lib.markTime("done heatmap "+u)}else{$(k).find(".hm"+u).remove();$(k).find(".cb"+u).remove();if(L.isBar(U)){t.push(a)}else{if(U=="box"){r.push(a)}else{p.push(a)}}}}q.plot.selectAll("g.trace").remove();Plotly.Bars.plot(k,q,t);Plotly.Lib.markTime("done bars");Plotly.ErrorBars.plot(k,q,t.concat(p));Plotly.Lib.markTime("done errorbars");Plotly.Scatter.plot(k,q,p);Plotly.Lib.markTime("done scatter");Plotly.Boxes.plot(k,q,r);Plotly.Lib.markTime("done boxes")});N(k);Plotly.Lib.markTime("done applyStyle");if(c.showlegend||(k.calcdata.length>1&&c.showlegend!==false)){Plotly.Legend.draw(k)}else{c._infolayer.selectAll(".legend").remove()}Plotly.Annotations.drawAll(k);if(!k.mainsite&&!k.standalone){L.positionBrand(k)}setTimeout(function(){if($(k).find("#graphtips").length===0&&k.data!==undefined&&k.showtips!==false&&k.mainsite){try{if(firsttimeuser()){showAlert("graphtips")}}catch(p){console.log(p)}}else{if($(k).find("#graphtips").css("display")=="none"){if(firsttimeuser()){$(k).find("#graphtips").fadeIn()}}}},1000);Plotly.Lib.markTime("done plot")};L.setStyles=function(h,S){if(typeof h=="string"){h=document.getElementById(h)}S=S||false;var e,b,Z,T,R,X,W,k,g,Y,V;function U(j,c,m,l){R=Plotly.Lib.nestedProperty(Y,j);X=R.get();if($.isArray(X)&&!l){Z=Math.min(W.length,X.length);for(T=0;T<Z;T++){W[T][c]=X[T]}W[0].t[c]=m}else{W[0].t[c]=(typeof X!="undefined")?X:m;if(S&&typeof X=="undefined"){R.set(m)}}}for(e in h.calcdata){W=h.calcdata[e];k=W[0].t;g=k.curve;Y=h.data[g];V=L.defaultColors[g%L.defaultColors.length];U("type","type","scatter");U("visible","visible",true);U("opacity","op",1);U("text","tx","");U("name","name","trace "+g);U("error_y.visible","ye_vis",false);U("xaxis","xaxis","x");U("yaxis","yaxis","y");var f=k.type;if((Y.error_y&&Y.error_y.visible)){U("error_y.type","ye_type","percent");U("error_y.value","ye_val",10);U("error_y.traceref","ye_tref",0);U("error_y.color","ye_clr",k.ye_clr||V);U("error_y.thickness","ye_tkns",1);U("error_y.width","ye_w",4);U("error_y.opacity","ye_op",1)}if(["scatter","box"].indexOf(f)!=-1){U("line.color","lc",Y.marker.color||V);U("line.width","lw",2);U("marker.symbol","mx","circle");U("marker.opacity","mo",1);U("marker.size","ms",6);U("marker.color","mc",k.lc);U("marker.line.color","mlc",((k.lc!=k.mc)?k.lc:"#000"));U("marker.line.width","mlw",0);U("fill","fill","none");U("fillcolor","fc",Plotly.Drawing.addOpacity(k.lc,0.5));if($.isArray(Y.marker.size)){U("marker.sizeref","msr",1);U("marker.sizemode","msm","diameter")}else{k.msr=1;k.msm="diameter"}U("marker.colorscale","mscl",Plotly.defaultColorscale,true);U("marker.cauto","mcauto",true);U("marker.cmax","mcmax",10);U("marker.cmin","mcmin",-10);U("marker.line.colorscale","mlscl",Plotly.defaultColorscale,true);U("marker.line.cauto","mlcauto",true);U("marker.line.cmax","mlcmax",10);U("marker.line.cmin","mlcmin",-10);if(f==="scatter"){var a="lines";if(W.length<Plotly.Scatter.PTS_LINESONLY||(typeof Y.mode!="undefined")){a="lines+markers"}else{for(b=0;b<W.length;b++){if($.isNumeric(W[b].x)&&$.isNumeric(W[b].y)&&(b===0||!$.isNumeric(W[b-1].x)||!$.isNumeric(W[b-1].y))&&(b==W.length-1||!$.isNumeric(W[b+1].x)||!$.isNumeric(W[b+1].y))){a="lines+markers";break}}}U("mode","mode",a);U("line.dash","ld","solid");U("textposition","tp","middle center");U("textfont.size","ts",h.layout.font.size);U("textfont.color","tc",h.layout.font.color);U("textfont.family","tf",h.layout.font.family)}else{if(f==="box"){U("whiskerwidth","ww",0.5);U("boxpoints","boxpts","outliers");U("boxmean","mean",false);U("jitter","jitter",0);U("pointpos","ptpos",0);U("marker.outliercolor","soc","rgba(0,0,0,0)");U("marker.line.outliercolor","solc",k.mc);U("marker.line.outlierwidth","solw",1);U("marker.outliercolorscale","soscl",k.mscl,true);U("marker.outliercauto","socauto",k.mcauto);U("marker.outliercmax","socmax",k.mcmax);U("marker.outliercmin","socmin",k.mcmin);U("marker.line.outliercolorscale","solscl",k.mlscl,true);U("marker.line.outliercauto","solcauto",k.mlcauto);U("marker.line.outliercmax","solcmax",k.mlcmax);U("marker.line.outliercmin","solcmin",k.mlcmin)}}}else{if(L.isHeatmap(f)){if(f==="histogram2d"){U("histnorm","histnorm","count");U("autobinx","autobinx",true);U("nbinsx","nbinsx",0);U("xbins.start","xbstart",0);U("xbins.end","xbend",1);U("xbins.size","xbsize",1);U("autobiny","autobiny",true);U("nbinsy","nbinsy",0);U("ybins.start","ybstart",0);U("ybins.end","ybend",1);U("ybins.size","ybsize",1)}else{U("xtype","xtype",Y.x?"array":"noarray");U("ytype","ytype",Y.y?"array":"noarray");U("x0","x0",0);U("dx","dx",1);U("y0","y0",0);U("dy","dy",1)}U("zauto","zauto",true);U("zmin","zmin",-10);U("zmax","zmax",10);U("scl","scl",Plotly.defaultColorscale,true);U("showscale","showscale",true);U("zsmooth","zsmooth",false)}else{if(L.isBar(f)){if(f!="bar"){U("histnorm","histnorm","count");U("autobinx","autobinx",true);U("nbinsx","nbinsx",0);U("xbins.start","xbstart",0);U("xbins.end","xbend",1);U("xbins.size","xbsize",1)}U("bardir","bardir","v");U("marker.opacity","mo",1);U("marker.color","mc",V);U("marker.line.color","mlc","#000");U("marker.line.width","mlw",0)}}}}};function N(R){Plotly.Plots.getSubplots(R).forEach(function(S){var T=R.layout._plots[S].plot;T.selectAll("g.trace").call(Plotly.Drawing.traceStyle,R);T.selectAll("g.points").each(function(U){d3.select(this).selectAll("path,rect").call(Plotly.Drawing.pointStyle,U.t||U[0].t);d3.select(this).selectAll("text").call(Plotly.Drawing.textPointStyle,U.t||U[0].t)});T.selectAll("g.trace polyline.line").call(Plotly.Drawing.lineGroupStyle);T.selectAll("g.trace polyline.fill").call(Plotly.Drawing.fillGroupStyle);T.selectAll("g.boxes").call(Plotly.Boxes.style);T.selectAll("g.errorbars").call(Plotly.ErrorBars.style)});if(R.mainsite&&window.ws&&window.ws.confirmedReady){A("applyStyle",L.graphJson(R,true))}}Plotly.restyle=function(r,S,v,g){if(typeof r=="string"){r=document.getElementById(r)}var j=r.layout,u={};if(typeof S=="string"){u[S]=v}else{if($.isPlainObject(S)){u=S;if(g===undefined){g=v}}else{console.log("restyle fail",S,v,g);return }}if(Object.keys(u).length){r.changed=true}if($.isNumeric(g)){g=[g]}else{if(!$.isArray(g)||!g.length){g=r.data.map(function(x,y){return y})}}var m=["mode","visible","type","bardir","fill","histnorm","marker.size","text","textfont.size","textposition","xtype","x0","dx","ytype","y0","dy","xaxis","yaxis","zmin","zmax","zauto","mincolor","maxcolor","scl","zsmooth","showscale","error_y.visible","error_y.value","error_y.type","error_y.traceref","error_y.array","error_y.width","autobinx","nbinsx","xbins.start","xbins.end","xbins.size","autobiny","nbinsy","ybins.start","ybins.end","ybins.size","boxpoints","jitter","pointpos","whiskerwidth","boxmean"];var b=["barmode","bargap","bargroupgap","boxmode","boxgap","boxgroupgap","?axis.autorange","?axis.range"];var t=["type","x","y","x0","y0","bardir","xaxis","yaxis"];var Z=false,T=false,c=false;var p={},o={},f;function w(){return g.map(function(){return undefined})}function V(y){var x=Plotly.Axes.id2name(y);if(f.indexOf(x)==-1){f.push(x)}}function Y(x){return x+".autorange"}function a(x){return x+".range"}function l(y,x,AB,z){if($.isArray(x)){x.forEach(function(AC){l(y,AC,AB,z)});return }if(x in u){return }var AA=Plotly.Lib.nestedProperty(y,x);if(!(x in o)){o[x]=w()}if(o[x][z]===undefined){o[x][z]=AA.get()}if(AB!==undefined){AA.set(AB)}}var U=["zmin","zmax"],e=["xbins.start","xbins.end","xbins.size"],X=["xbins.start","xbins.end","xbins.size"];for(var k in u){var q=u[k],R,W;p[k]=q;if(b.indexOf(k.replace(/[xy]axis[0-9]*/g,"?axis"))!=-1){W=Plotly.Lib.nestedProperty(j,k);o[k]=[W.get()];W.set($.isArray(q)?q[0]:q);Z=true;continue}o[k]=w();for(i=0;i<g.length;i++){R=r.data[g[i]];W=Plotly.Lib.nestedProperty(R,k);if(U.indexOf(k)!=-1){l(R,"zauto",false,i)}else{if(k=="zauto"){l(R,U,undefined,i)}else{if(e.indexOf(k)!=-1){l(R,"autobinx",false,i)}else{if(k=="autobinx"){l(R,e,undefined,i)}else{if(X.indexOf(k)!=-1){l(R,"autobiny",false,i)}else{if(k=="autobiny"){l(R,X,undefined,i)}else{if(["x0","dx"].indexOf(k)!=-1&&R.x&&R.xtype!="scaled"){l(R,"xtype","scaled",i)}else{if(["y0","dy"].indexOf(k)!=-1&&R.x&&R.ytype!="scaled"){l(R,"ytype","scaled",i)}}}}}}}}o[k][i]=W.get();W.set($.isArray(q)?q[i%q.length]:q)}if((g.indexOf(0)!=-1)&&(t.indexOf(k)!=-1)){r.axtypesok=false;Z=true}if((["autobinx","autobiny","zauto"].indexOf(k)==-1)||q!==false){c=true}if(m.indexOf(k)!=-1){if(["bardir","type"].indexOf(k)!=-1){f=[];for(i=0;i<g.length;i++){var h=r.data[g[i]];V(h.xaxis||"x");V(h.yaxis||"y");if(S=="type"){l(r.data[g[i]],["autobinx","autobiny"],true,i)}}l(j,f.map(Y),true,0);l(j,f.map(a),[0,1],0)}if(Plotly.Heatmap.margin(r)){T=true}else{Z=true}}}if(typeof plotUndoQueue=="function"){plotUndoQueue(r,o,p,g)}if(T){r.layout=undefined;Plotly.plot(r,"",j)}else{if(Z){Plotly.plot(r)}else{L.setStyles(r);if(c){N(r);if(j.showlegend){Plotly.Legend.draw(r)}}}}$(r).trigger("restyle.plotly",[p,g])};Plotly.relayout=function(y,R,AA){if(typeof y=="string"){y=document.getElementById(y)}var k=y.layout,z={},U=false,b=false,u=false,V=false;if(typeof R=="string"){z[R]=AA}else{if($.isPlainObject(R)){z=R}else{console.log("relayout fail",R,AA);return }}if(Object.keys(z).length){y.changed=true}var Z=Object.keys(z),h=Plotly.Axes.list(y);for(var l=0;l<Z.length;l++){if(Z[l].indexOf("allaxes")===0){for(var f=0;f<h.length;f++){var Y=Z[l].replace("allaxes",h[f]._name);if(!z[Y]){z[Y]=z[Z[l]]}}delete z[Z[l]]}if(Z[l].match(/^annotations\[[0-9-]\].ref$/)){var T=z[Z[l]].split("y");z[Z[l].replace("ref","xref")]=T[0];z[Z[l].replace("ref","yref")]=T.length==2?("y"+T[1]):"paper";delete z[Z[l]]}}var w={},t={};function q(j,AC){if($.isArray(j)){j.forEach(function(p){q(p,AC)});return }if(j in z){return }var AB=Plotly.Lib.nestedProperty(k,j);if(!(j in t)){t[j]=AB.get()}if(AC!==undefined){AB.set(AC)}}function c(AB,j){var p=Plotly.Axes.id2name(AB[j+"ref"]||j);return k[p]&&k[p].autorange}var v=["height","width"];for(var o in z){var a=Plotly.Lib.nestedProperty(k,o),x=z[o];w[o]=z[o];t[o]=(a.parts[1]=="reverse")?z[o]:a.get();if(v.indexOf(o)!=-1){q("autosize",false)}else{if(o=="autosize"){q(v,undefined)}else{if(o.match(/^[xy]axis[0-9]*\.range\[[0|1]\]$/)){q(a.parts[0]+".autorange",false)}else{if(o.match(/^[xy]axis[0-9]*\.autorange$/)){q([a.parts[0]+".range[0]",a.parts[0]+".range[1]"],undefined)}}}}if(a.parts[1]=="type"&&!k[a.parts[0]].autorange&&(k[a.parts[0]].type=="log"?x!="log":x=="log")){var W=k[a.parts[0]],m=W.range[0],g=W.range[1];if(x=="log"){if(m<=0&&g<=0){q(a.parts[0]+".autorange",true);continue}else{if(m<=0){m=g/1000000}else{if(g<=0){g=m/1000000}}}q(a.parts[0]+".range[0]",Math.log(m)/Math.LN10);q(a.parts[0]+".range[1]",Math.log(g)/Math.LN10)}else{q(a.parts[0]+".range[0]",Math.pow(10,m));q(a.parts[0]+".range[1]",Math.pow(10,g))}}if(a.parts[1]=="reverse"){k[a.parts[0]].range.reverse();V=true}else{if(a.parts[0]=="annotations"){var r=a.parts[1],S=k.annotations,X=S[r]||{};if(a.parts.length==2){if(z[o]=="add"||$.isPlainObject(z[o])){t[o]="remove"}else{if(z[o]=="remove"){if(r==-1){t["annotations"]=S;delete t[o]}else{t[o]=X}}else{console.log("???",z)}}}if((c(X,"x")||c(X,"y"))&&r>=0&&(r>=S.length||X.ref=="plot")&&o.indexOf("color")==-1&&o.indexOf("opacity")==-1){V=true}Plotly.Annotations.draw(y,r,a.parts.slice(2).join("."),z[o]);delete z[o]}else{if(a.parts[0].indexOf("legend")!=-1){U=true}else{if(o.indexOf("title")!=-1){b=true}else{if(a.parts[0].indexOf("bgcolor")!=-1){u=true}else{if(a.parts.length>1&&(a.parts[1].indexOf("tick")!=-1||a.parts[1].indexOf("exponent")!=-1||a.parts[1].indexOf("grid")!=-1||a.parts[1].indexOf("zeroline")!=-1)){b=true}else{if(o.indexOf(".linewidth")!=-1&&o.indexOf("axis")!=-1){b=u=true}else{if(a.parts.length>1&&a.parts[1].indexOf("line")!=-1){u=true}else{if(a.parts.length>1&&a.parts[1]=="mirror"){b=u=true}else{if(o=="margin.pad"){b=u=true}else{if(["hovermode","dragmode"].indexOf(o)==-1){V=true}}}}}}}}}a.set(x)}}}if(typeof plotUndoQueue=="function"){plotUndoQueue(y,t,w,"relayout")}if(z.autosize){z=K(y,z)}var e=Object.keys(z);if(V){y.layout=undefined;Plotly.plot(y,"",k)}else{if(e.length){if(U){k._infolayer.selectAll(".legend").remove();if(k.showlegend){Plotly.Legend.draw(y)}}if(u){M(y)}if(b){Plotly.Axes.doTicks(y,"redraw");L.titles(y,"gtitle")}}}$(y).trigger("relayout.plotly",w)};function O(T){if(!T.mainsite){return }var S=$(T).find(".plot-container"),R=T.layout.width>parseInt(S.css("width"),10);if(T&&T.tabtype=="plot"&&$(T).css("display")!="none"){if(T.layout&&(T.layout.autosize||!R)){S.removeClass("is-fixed-size")}else{if(T.layout&&R){S.addClass("is-fixed-size")}}}}function K(V,T){var S,R;if(V.mainsite){setFileAndCommentsHeight(V);var U=V.layout._container.node().getBoundingClientRect();S=Math.round(U.height*0.9);R=Math.round(U.width*0.9)}else{S=$(V).height()||V.layout.height||G().height;R=$(V).width()||V.layout.width||G().width}if(Math.abs(V.layout.width-R)>1||Math.abs(V.layout.height-S)>1){V.layout.height=S;V.layout.width=R}else{if(V.layout.autosize!="initial"){delete (T.autosize);V.layout.autosize=true;M(V)}}return T}L.resize=function(R){if(typeof R=="string"){R=document.getElementById(R)}killPopovers();if(R.mainsite){setFileAndCommentsHeight(R)}if(R&&R.tabtype=="plot"&&$(R).css("display")!="none"){if(R.redrawTimer){clearTimeout(R.redrawTimer)}R.redrawTimer=setTimeout(function(){if($(R).css("display")=="none"){return }if(R.layout&&R.layout.autosize){var S=R.changed;R.autoplay=true;Plotly.relayout(R,{autosize:true});R.changed=S}if(LIT){hidebox();litebox()}},100)}O(R)};function E(b,X){var c=(typeof b=="string")?document.getElementById(b):b,a=$(c),V=d3.select(c);c.mainsite=$("#plotlyMainMarker").length>0;function U(h,g){var j=g.replace("axis","");if(!h[g]){h[g]=Plotly.Axes.defaultAxis({range:[-1,6],anchor:{x:"y",y:"x"}[g.charAt(0)]})}}var Y=c.layout||G(),Z=X||{};var f=Object.keys(Z).filter(function(g){return g.match(/^xaxis[0-9]*$/)}),T=Object.keys(Z).filter(function(g){return g.match(/^yaxis[0-9]*$/)});if(!f.length){f=["xaxis"]}if(!T.length){T=["yaxis"]}f.concat(T).forEach(function(g){U(Y,g)});c.layout=I(Y,Z);var W=c.layout;var e=L.getSubplots(c);e.forEach(function(g){var h=g.match(/^(x[0-9]*)(y[0-9]*)$/);[h[1],h[2]].forEach(function(j){U(W,Plotly.Axes.id2name(j))})});e=L.getSubplots(c);Plotly.Axes.setTypes(c);var S=W._fileandcomments=V.selectAll(".file-and-comments");if(!S.node()){S=V}W._container=S.selectAll(".plot-container").data([0]);W._container.enter().append("div").classed("plot-container",true).classed("plotly",true).classed("is-mainsite",c.mainsite);W._paperdiv=W._container.selectAll(".svg-container").data([0]);W._paperdiv.enter().append("div").classed("svg-container",true).style("position","relative");if(W.autosize=="initial"){if(c.mainsite){setFileAndCommentsHeight(c)}K(c,{});W.autosize=true}W._paperdiv.selectAll("svg").remove();W._paper=W._paperdiv.append("svg").attr("xmlns","http://www.w3.org/2000/svg").attr("xmlns:xmlns:xlink","http://www.w3.org/1999/xlink");var R=[];W._plots={};W._paper.selectAll("g.subplot").data(e).enter().append("g").classed("subplot",true).each(function(l){var h=W._plots[l]={},j=d3.select(this).classed(l,true);h.id=l;h.x=Plotly.Axes.getFromId(c,l,"x");h.y=Plotly.Axes.getFromId(c,l,"y");h.overlays=[];var k=Plotly.Axes.getFromId(c,h.x.overlaying)||h.x;if(k!=h.x&&k.overlaying){k=h.x;h.x.overlaying=false}var g=Plotly.Axes.getFromId(c,h.y.overlaying)||h.y;if(g!=h.y&&g.overlaying){g=h.y;h.y.overlaying=false}var m=k._id+g._id;if(m!=l&&e.indexOf(m)!=-1){h.mainplot=m;R.push(h);h.x.domain=k.domain.slice();h.y.domain=g.domain.slice()}else{h.bg=j.append("rect").attr("stroke-width",0);h.gridlayer=j.append("g");h.overgrid=j.append("g");h.zerolinelayer=j.append("g");h.overzero=j.append("g");h.plot=j.append("svg").attr("preserveAspectRatio","none").style("fill","none");h.overplot=j.append("g");h.xlines=j.append("path").style("fill","none").classed("crisp",true);h.ylines=j.append("path").style("fill","none").classed("crisp",true);h.overlines=j.append("g");h.axislayer=j.append("g");h.overaxes=j.append("g")}h.draglayer=W._paper.append("g")});R.forEach(function(g){var h=W._plots[g.mainplot];h.overlays.push(g);g.gridlayer=h.overgrid.append("g");g.zerolinelayer=h.overzero.append("g");g.plot=h.overplot.append("svg").attr("preserveAspectRatio","none").style("fill","none");g.xlines=h.overlines.append("path").style("fill","none").classed("crisp",true);g.ylines=h.overlines.append("path").style("fill","none").classed("crisp",true);g.axislayer=h.overaxes.append("g")});W._infolayer=W._paper.append("g").classed("infolayer",true);W._hoverlayer=W._paper.append("g").classed("hoverlayer",true);M(c);Plotly.Axes.doTicks(c,"redraw");Plotly.Fx.init(c)}function M(S){var T=S.layout;Plotly.Heatmap.margin(S);T._size={l:T.margin.l-(S.lw<0?S.lw:0),r:T.margin.r+(S.lw>0?S.lw:0),t:T.margin.t+(S.lh>0?S.lh:0),b:T.margin.b-(S.lh<0?S.lh:0),p:T.margin.pad};var R=T._size;R.w=T.width-R.l-R.r;R.h=T.height-R.t-R.b;Plotly.Axes.list(S).forEach(function(V){V._linepositions={}});T._paperdiv.style({width:T.width+"px",height:T.height+"px",background:T.paper_bgcolor});T._paper.call(Plotly.Drawing.setSize,T.width,T.height);var U=[];T._paper.selectAll("g.subplot").each(function(Y){var x=T._plots[Y],m=x.x,X=x.y;m.setScale();X.setScale();if(x.bg){x.bg.call(Plotly.Drawing.setRect,m._offset-R.p,X._offset-R.p,m._length+2*R.p,X._length+2*R.p).call(Plotly.Drawing.fillColor,T.plot_bgcolor)}x.plot.call(Plotly.Drawing.setRect,m._offset,X._offset,m._length,X._length);var h=$.isNumeric(m.linewidth)?m.linewidth:1,Z=$.isNumeric(X.linewidth)?X.linewidth:1,e=R.p+Z,q="M"+(m._offset-e)+",",b="h"+(m._length+2*e),o=m.anchor=="free"&&U.indexOf(m._id)==-1,w=R.t+R.h*(1-(m.position||0))+((h/2)%1),a=(m.anchor==X._id&&(m.mirror||m.side!="top"))||m.mirror=="all"||m.mirror=="allticks"||(m.mirrors&&m.mirrors[X._id+"bottom"]),r=X._offset+X._length+R.p+h/2,j=(m.anchor==X._id&&(m.mirror||m.side=="top"))||m.mirror=="all"||m.mirror=="allticks"||(m.mirrors&&m.mirrors[X._id+"top"]),k=X._offset-R.p-h/2,p=R.p,W=a?0:h,v=j?0:h,t=","+(X._offset-p-v)+"v"+(X._length+2*p+v+W),l=X.anchor=="free"&&U.indexOf(X._id)==-1,u=R.l+R.w*(X.position||0)+((Z/2)%1),g=(X.anchor==m._id&&(X.mirror||X.side!="right"))||X.mirror=="all"||X.mirror=="allticks"||(X.mirrors&&X.mirrors[m._id+"left"]),c=m._offset-R.p-Z/2,V=(X.anchor==m._id&&(X.mirror||X.side=="right"))||X.mirror=="all"||X.mirror=="allticks"||(X.mirrors&&X.mirrors[m._id+"right"]),f=m._offset+m._length+R.p+Z/2;m._linepositions[Y]=[a?r:undefined,j?k:undefined,o?w:undefined];if(m.anchor==X._id){m._linepositions[Y][3]=m.side=="top"?k:r}else{if(o){m._linepositions[Y][3]=w}}X._linepositions[Y]=[g?c:undefined,V?f:undefined,l?u:undefined];if(X.anchor==m._id){X._linepositions[Y][3]=X.side=="right"?f:c}else{if(l){X._linepositions[Y][3]=u}}x.xlines.attr("d",((a?(q+r+b):"")+(j?(q+k+b):"")+(o?(q+w+b):""))||"M0,0").attr("stroke-width",h).call(Plotly.Drawing.strokeColor,m.showline?m.linecolor:"rgba(0,0,0,0)");x.ylines.attr("d",((g?("M"+c+t):"")+(V?("M"+f+t):"")+(l?("M"+u+t):""))||"M0,0").attr("stroke-width",Z).call(Plotly.Drawing.strokeColor,X.showline?X.linecolor:"rgba(0,0,0,0)");if(o){U.push(m._id)}if(l){U.push(X._id)}});L.titles(S,"gtitle");Plotly.Fx.modeBar(S);O(S);return S}L.titles=function(o,q){var Z;if(typeof o=="string"){o=document.getElementById(o)}if(!q){Plotly.Axes.list(o).forEach(function(t){L.titles(o,t._id+"title")});L.titles(o,"gtitle");return }var l=o.layout,h=l._size,Y=q.charAt(0),U=l[Plotly.Axes.id2name(q.replace("title",""))]||l,W=U===l?"title":U._name+".title",r=(U._id||Y).toUpperCase()+" axis",g=U.titlefont.family||l.font.family||"Arial",V=U.titlefont.size||(l.font.size*1.2)||14,S=U.titlefont.color||l.font.color||"#000",c,a,e="",k={},m,T,b={selection:d3.select(o).selectAll("text."+U._id+"tick"),side:U.side};if(Y=="x"){m=U;T=(m.anchor=="free")?{_offset:h.l+(1-(m.position||0))*h.h,_length:0}:Plotly.Axes.getFromId(o,m.anchor);c=m._offset+m._length/2;a=(m.side=="top")?T._offset-10-V*(m.showticklabels?1:0.5):T._offset+T._length+10+V*(m.showticklabels?1.5:1);Z={x:c,y:a,"text-anchor":"middle"};if(!b.side){b.side="bottom"}}else{if(Y=="y"){T=U;m=(T.anchor=="free")?{_offset:h.t+(T.position||0)*h.w,_length:0}:Plotly.Axes.getFromId(o,T.anchor);a=T._offset+T._length/2;c=(T.side=="right")?m._offset+m._length+10+V*(T.showticklabels?1.5:1):m._offset-10-V*(T.showticklabels?1:0.5);e="rotate(-90,x,y)";k={center:0};Z={x:c,y:a,"text-anchor":"middle"};e={rotate:"-90",offset:0};if(!b.side){b.side="left"}}else{r="Plot";V=l.titlefont.size||l.font.size*1.4||16;c=l.width/2;a=l.margin.t/2;Z={x:c,y:a,"text-anchor":"middle"};b={}}}var X=1;var f=U.title.trim();if(U.unit){f+=" ("+U.unit+")"}if(f===""){X=0}if(f==="Click to enter "+r+" title"){X=0.2}l._infolayer.select("."+q).remove();var R=l._infolayer.append("text").attr("class",q).text(f);function j(){var w=this.style({"font-family":g,"font-size":V,fill:S,opacity:X}).attr(Z).call(d3.plugly.convertToTspans).attr(Z);w.selectAll("tspan.line").attr(Z);if(e){w.attr({transform:"rotate("+[e.rotate,Z.x,Z.y]+") translate(0, "+e.offset+")"})}if(b&&b.selection&&b.side){var v=0,y={left:"right",right:"left",top:"bottom",bottom:"top"}[b.side],u={left:"translate(-{shift},0) {original}",right:"translate({shift},0) {original}",top:"translate(0,-{shift}) {original}",bottom:"translate(0,{shift}) {original}"}[b.side],AA=$.isNumeric(b.pad)?b.pad:2,x=w.node().getBoundingClientRect(),t=l._paper.node().getBoundingClientRect(),z=Math.max(0,(t[b.side]-x[b.side])*(u.indexOf("-")!=-1?-1:1));b.selection.each(function(){var AB=this.getBoundingClientRect();if(Plotly.Lib.bBoxIntersect(x,AB,AA)){v=Math.min(z,Math.max(v,Math.abs(AB[b.side]-x[y])+AA))}});if(v>0){w.attr({transform:d3.plugly.compileTemplate(u,{shift:v,original:w.attr("transform")})})}}}R.attr({"data-unformatted":f}).call(j);function p(){X=0;f="Click to enter "+r+" title";l._infolayer.select("."+q).attr({"data-unformatted":f}).text("Click to enter "+r+" title").on("mouseover.opacity",function(){d3.select(this).transition().duration(100).style("opacity",1)}).on("mouseout.opacity",function(){d3.select(this).transition().duration(1000).style("opacity",0)})}if(!f){p()}if(o.mainsite){R.call(d3.plugly.makeEditable).on("edit",function(t){this.style({"font-family":g,"font-size":V,fill:S,opacity:X}).call(d3.plugly.convertToTspans).attr(Z).selectAll("tspan.line").attr(Z);Plotly.relayout(o,W,t)}).on("cancel",function(u){var t=this.attr("data-unformatted");this.text(t).call(j)}).on("input",function(u,t){this.text(u||" ").attr(Z).selectAll("tspan.line").attr(Z)})}else{if(!f||f==="Click to enter "+r+" title"){R.remove()}}};L.getSubplots=function(U,W){var V=U.data,S=[];(V||[]).forEach(function(a){var Y=(a.xaxis||"x"),b=(a.yaxis||"y"),Z=Y+b;if(S.indexOf(Z)==-1){S.push(Z)}});Plotly.Axes.list(U).forEach(function(c){if(!c._id){Plotly.Axes.initAxis(U,c)}var Y=c._id.charAt(0),a=c.anchor=="free"?{x:"y",y:"x"}[Y]:c.anchor,b=Plotly.Axes.getFromId(U,a);if(c.anchor=="free"&&S.filter(function(e){return e.indexOf(c._id)!=-1}).length){return }if(!b){console.log("warning: couldnt find anchor "+a+" for axis "+c._id);return }var Z=Y=="x"?(c._id+b._id):(b._id+c._id);if(S.indexOf(Z)==-1){S.push(Z)}});if(!S.length){console.log("Warning! No subplots found - missing axes?")}var X=/^x([0-9]*)y([0-9]*)$/;var R=S.filter(function(Y){return Y.match(X)}).sort(function(Z,Y){var e=Z.match(X),c=Y.match(X);if(e[1]==c[1]){return Number(e[2]||1)-Number(c[2]||1)}return Number(e[1]||0)-Number(c[1]||0)});if(W){if(!W._id){Plotly.Axes.initAxis(U,W)}var T=new RegExp(W._id.charAt(0)=="x"?("^"+W._id+"y"):(W._id+"$"));return R.filter(function(Y){return Y.match(T)})}else{return R}};L.graphJson=function(S,R,U){if(typeof S=="string"){S=document.getElementById(S)}var T={data:(S.data||[]).map(function(V){return D(V,U)})};if(!R){T.layout=D(S.layout,U)}return JSON.stringify(T)};function D(W,V){if(typeof W=="function"){return null}if(!$.isPlainObject(W)){return W}var U={},R;function S(X){return D(X,V)}for(R in W){if(typeof W[R]=="function"||["_","["].indexOf(R.charAt(0))!=-1){continue}if(V=="keepdata"){if(R.substr(R.length-3)=="src"){continue}}else{if(V!="keepall"){var T=W[R+"src"];if(typeof T=="string"&&T.indexOf(":")>0){continue}}}if($.isPlainObject(W[R])){U[R]=D(W[R],V)}else{if($.isArray(W[R])){U[R]=W[R].map(S)}else{U[R]=W[R]}}}return U}uoStack=[];function I(T,R){if(!$.isPlainObject(R)){return T}var U=uoStack[uoStack.push({})-1],S;for(S in T){U[S]=T[S]}for(S in R){if($.isPlainObject(R[S])){U[S]=I($.isPlainObject(T[S])?T[S]:{},R[S])}else{if($.isNumeric(T[S])&&$.isNumeric(R[S])){U[S]=Number(R[S])}else{U[S]=R[S]}}}return uoStack.pop()}function A(R,S){if(window.ws&&window.ws.confirmedReady){func=(R?JSON.stringify(R):"None");S=JSON.stringify(S);send_invisible("hermes("+func+","+S+")")}}}());(function(){if(!window.Plotly){window.Plotly={}}var G=Plotly.Lib={};G.dateTime2ms=function(W){var a,U,Y,V;W=String(W).split(" ");if(W.length>2){return false}var X=W[0].split("-");if(X.length>3||(X.length!=3&&W.length>1)){return false}if(X[0].length==4){a=Number(X[0])}else{if(X[0].length==2){var Z=new Date().getFullYear();a=((Number(X[0])-Z+70)%100+200)%100+Z-70}else{return false}}if(!(a>=0)){return false}if(X.length==1){return new Date(a,0,1).getTime()}U=Number(X[1])-1;if(X[1].length>2||!(U>=0&&U<=11)){return false}if(X.length==2){return new Date(a,U,1).getTime()}Y=Number(X[2]);if(X[2].length>2||!(Y>=1&&Y<=31)){return false}Y=new Date(a,U,Y).getTime();if(W.length==1){return Y}X=W[1].split(":");if(X.length>3){return false}V=Number(X[0]);if(X[0].length>2||!(V>=0&&V<=23)){return false}Y+=3600000*V;if(X.length==1){return Y}U=Number(X[1]);if(X[1].length>2||!(U>=0&&U<=59)){return false}Y+=60000*U;if(X.length==2){return Y}W=Number(X[2]);if(!(W>=0&&W<60)){return false}return Y+W*1000};G.isDateTime=function(U){return G.dateTime2ms(U)!==false};G.ms2DateTime=function(U,W){if(!W){W=0}var X=new Date(U),V=d3.time.format("%Y-%m-%d")(X);if(W<7776000000){V+=" "+G.lpad(X.getHours(),2);if(W<432000000){V+=":"+G.lpad(X.getMinutes(),2);if(W<10800000){V+=":"+G.lpad(X.getSeconds(),2);if(W<300000){V+="."+G.lpad(X.getMilliseconds(),3)}}}return V.replace(/([:\s]00)*\.?[0]*$/,"")}return V};var N={H:["%H:%M:%S~%L","%H:%M:%S","%H:%M"],I:["%I:%M:%S~%L%p","%I:%M:%S%p","%I:%M%p"],D:["%H","%I%p"]};var K={Y:["%Y~%m~%d","%Y%m%d","%y%m%d","%m~%d~%Y","%d~%m~%Y"],Yb:["%b~%d~%Y","%d~%b~%Y","%Y~%d~%b","%Y~%b~%d"],y:["%m~%d~%y","%d~%m~%y","%y~%m~%d"],yb:["%b~%d~%y","%d~%b~%y","%y~%d~%b","%y~%b~%d"]};var L=d3.time.format.utc;var A={Y:{H:["%Y~%m~%dT%H:%M:%S","%Y~%m~%dT%H:%M:%S~%L"].map(L),I:[],D:["%Y%m%d%H%M%S","%Y~%m"].map(L)},Yb:{H:[],I:[],D:[]},y:{H:[],I:[],D:[]},yb:{H:[],I:[],D:[]}};["Y","Yb","y","yb"].forEach(function(U){K[U].forEach(function(V){A[U].D.push(L(V));["H","I","D"].forEach(function(W){N[W].forEach(function(X){A[U][W].push(L(V+"~"+X));A[U][W].push(L(X+"~"+V))})})})});var Q=/[a-z]*/g,O=function(U){return U.substr(0,3)},J=/(mon|tue|wed|thu|fri|sat|sun|the|of|st|nd|rd|th)/g,S=/[\s,\/\-\.\(\)]+/g,C=/~?([ap])~?m(~|$)/,D=function(U,V){return V+"m "},R=/\d\d\d\d/,P=/(^|~)[a-z]{3}/,T=/[ap]m/,E=/:/,I=/q([1-4])/,B=["31~mar","30~jun","30~sep","31~dec"],F=function(U,V){return B[V-1]},M=/ ?([+\-]\d\d:?\d\d|Z)$/;G.parseDate=function(V){if(V.getTime){return V}if(typeof V!="string"){return }V=V.toLowerCase().replace(Q,O).replace(J,"").replace(S,"~").replace(C,D).replace(I,F).trim().replace(M,"");var Y=(R.test(V)?"Y":"y")+(P.test(V)?"b":""),Z=E.test(V)?(T.test(V)?"I":"H"):"D",a=A[Y][Z],U=a.length,W=null;for(var X=0;X<U;X++){W=a[X].parse(V);if(W){break}}return W};G.findBin=function(Y,X,b){if($.isNumeric(X.start)){return b?Math.ceil((Y-X.start)/X.size)-1:Math.floor((Y-X.start)/X.size)}else{var W=0,V=X.length,a=0,U=(X[X.length-1]>X[0]?1:-1),Z;if(X[X.length-1]>X[0]){Z=b?function(e,c){return e<c}:function(e,c){return e<=c}}else{Z=b?function(e,c){return e>=c}:function(e,c){return e>c}}while(W<V&&a++<100){n=Math.floor((W+V)/2);if(Z(X[n],Y)){W=n+1}else{V=n}}if(a>90){console.log("Long binary search...")}return W-1}};G.distinctVals=function(Z){var Y=Z.slice();Y.sort(function(e,c){return e-c});var V=Y.length-1,U=(Y[V]-Y[0])||1,X=U/(V||1)/10000,a=[Y[0]];for(var W=0;W<V;W++){if(Y[W+1]>Y[W]+X){U=Math.min(U,Y[W+1]-Y[W]);a.push(Y[W+1])}}return{vals:a,minDiff:U}};G.nestedProperty=function(X,h){var k=X,U=h.split("."),c,b=0;while(b<U.length){var Y=String(U[b]).match(/^([^\[\]]+)((\[\-?[0-9]*\])+)$/);if(Y){var g=Y[2].substr(1,Y[2].length-2).split("][");U.splice(b,1,Y[1]);for(c=0;c<g.length;c++){b++;U.splice(b,0,Number(g[c]))}}b++}var f=h.substr(h.indexOf("[-1]")+4),Z;if(f.charAt(0)=="."){f=f.substr(1)}function W(j){return G.nestedProperty(j,f)}function a(j){for(c=0;c<Z.length;c++){Z[c].set($.isArray(j)?j[c%j.length]:j)}}function e(l){var j=true,m=[];for(c=0;c<Z.length;c++){m[c]=Z[c].get();if(m[c]!=m[0]){j=false}}return j?m[0]:m}for(b=0;b<U.length-1;b++){if(U[b]==-1){Z=k.map(W);return{set:a,get:e,astr:h,parts:U,obj:X}}if(!(U[b] in k)){k[U[b]]=(typeof U[b+1]==="string")?{}:[]}k=k[U[b]]}var V=U[b];return{set:function(j){if(j===undefined||j===null){delete k[V]}else{k[V]=j}},get:function(){return k[V]},astr:h,parts:U,obj:X}};G.pauseEvent=function(U){if(U.stopPropagation){U.stopPropagation()}if(U.preventDefault){U.preventDefault()}U.cancelBubble=true;return false};G.lpad=function(V,U){return String(V+Math.pow(10,U)).substr(1)};G.aggNums=function(X,W,V,U){if(!U){U=V.length}if(!$.isNumeric(W)){W=false}for(i=0;i<U;i++){if(!$.isNumeric(W)){W=V[i]}else{if($.isNumeric(V[i])){W=X(W,V[i])}}}return W};G.len=function(U){return G.aggNums(function(W,V){return W+1},0,U)};G.mean=function(V,U){if(!U){U=G.len(V)}return G.aggNums(function(X,W){return X+W},0,V)/U};G.stdev=function(W,U,V){if(!U){U=G.len(W)}if(!$.isNumeric(V)){V=G.aggNums(function(Y,X){return Y+X},0,W)/U}return Math.sqrt(G.aggNums(function(Y,X){return Y+Math.pow(X-V,2)},0,W)/U)};G.VERBOSE=false;G.TIMER=new Date().getTime();G.log=function(){if(G.VERBOSE){console.log.apply(console,arguments)}};G.markTime=function(U){if(!G.VERBOSE){return }var V=new Date().getTime();console.log(U,V-G.TIMER,"(msec)");G.TIMER=V};G.constrain=function(V,U,W){return Math.max(U,Math.min(W,V))};G.notifier=function(X,U){var W=$("div.notifier").length,V=(W*100)+20;if($("div.notifier").text().indexOf(X)>0){return }var Y=$('<div class="notifier" style="display:none;"><button class="notifier__close close" data-dismiss="alert">&times;</button><p class="push-half">'+X+"</p></div>");Y.appendTo("#tabs-one-line,#embedded-graph").css({"margin-top":V}).fadeIn(2000).delay(U=="long"?2000:1000).fadeOut(2000)};G.bBoxIntersect=function(V,U,W){W=W||0;return(V.left<=U.right+W&&U.left<=V.right+W&&V.top<=U.bottom+W&&U.top<=V.bottom+W)};G.identity=function(U){return U};G.randstr=function H(V,f,U){if(!U){U=16}if(f===undefined){f=128}if(f<=0){return"0"}var W=Math.log(Math.pow(2,f))/Math.log(U);for(var X=2;W===Infinity;X*=2){W=Math.log(Math.pow(2,f/X))/Math.log(U)*X}var e=W-Math.floor(W);var Y="";for(var X=0;X<Math.floor(W);X++){var c=Math.floor(Math.random()*U).toString(U);Y=c+Y}if(e){var a=Math.pow(U,e);var c=Math.floor(Math.random()*a).toString(U);Y=c+Y}var Z=parseInt(Y,U);if((V&&(V.indexOf(Y)>-1))||(Z!==Infinity&&Z>=Math.pow(2,f))){return H(V,f,U)}else{return Y}}}());(function(){var D=Plotly.Fx={};D.DBLCLICKDELAY=600;D.MINDRAG=5;D.init=function(L){var M=L.layout;var K=Object.keys(M._plots).sort(function(O,N){if((!M._plots[O].mainplot)==(!M._plots[N].mainplot)){var Q=O.split("y"),P=N.split("y");return(Q[0]==P[0])?(Number(Q[1]||1)-Number(P[1]||1)):(Number(Q[0]||1)-Number(P[0]||1))}return M._plots[O].mainplot?1:-1});K.forEach(function(T){var X=M._plots[T],O=X.x,U=X.y,Y=(O._linepositions[T]||[])[3],R=(U._linepositions[T]||[])[3],S=20,Q=O._offset,P=Q+O._length,V=U._offset,W=V+U._length;if($.isNumeric(Y)&&O.side=="top"){Y-=S}if($.isNumeric(R)&&U.side!="right"){R-=S}if(!X.mainplot){var N=E(L,X,Q,V,P-Q,W-V,"ns","ew");$(N).mousemove(function(Z){D.hover(L,Z,T);M._lasthover=N;M._hoversubplot=T}).mouseout(function(Z){D.unhover(L,Z)}).click(function(Z){D.click(L,Z)});E(L,X,Q-S,V-S,S,S,"n","w");E(L,X,P,V-S,S,S,"n","e");E(L,X,Q-S,W,S,S,"s","w");E(L,X,P,W,S,S,"s","e")}if($.isNumeric(Y)){E(L,X,Q*0.9+P*0.1,Y,(P-Q)*0.8,S,"","ew");E(L,X,Q,Y,(P-Q)*0.1,S,"","w");E(L,X,Q*0.1+P*0.9,Y,(P-Q)*0.1,S,"","e")}if($.isNumeric(R)){E(L,X,R,V*0.9+W*0.1,S,(W-V)*0.8,"ns","");E(L,X,R,W*0.9+V*0.1,S,(W-V)*0.1,"s","");E(L,X,R,V,S,(W-V)*0.1,"n","")}});$(M._hoverlayer.node()).mousemove(function(N){N.target=M._lasthover;D.hover(L,N,M._hoversubplot)}).click(function(N){N.target=M._lasthover;D.click(L,N)});M._hoverlayer.node().onmousedown=function(N){M._lasthover.onmousedown(N)}};var B=60,C=Math.PI*B/180,F=1/Math.sin(C),J=Math.cos(C),I=Math.sin(C);D.MAXDIST=20;D.hover=function(c,AA,AU){if(typeof c=="string"){c=document.getElementById(c)}if(!AU){AU="xy"}var Y=c.layout,r=Y._plots[AU],AE=[AU].concat(r.overlays.map(function(x){return x.x._id+x.y._id})),W=[r.x].concat(r.overlays.map(function(x){return x.x})),Z=[r.y].concat(r.overlays.map(function(x){return x.y})),j=AA.hovermode||Y.hovermode;if(["x","y","closest"].indexOf(j)==-1||$(c).find(".zoombox").length||c.dragging||!c.calcdata){return D.unhover(c)}var z=[],e,q,AB,V,AF,AK,AI;function o(x){return AE.map(function(){return x})}function K(x,y){return x.map(function(Ad){return Ad.c2p(y)})}function AH(x,y){return x.map(function(Ad){return Ad.p2c(y)})}if($.isArray(AA)){j="array";e=AA.map(function(y){var x=c.calcdata.filter(function(Ad){return Ad[0].t.curve==y.curveNumber});return x.length?x[0]:null})}else{e=c.calcdata.filter(function(x){return AE.indexOf(x[0].t.xaxis+x[0].t.yaxis)!=-1});if(AA.target&&("clientX" in AA)&&("clientY" in AA)){if($(c).triggerHandler("plotly_beforehover",AA)===false){return }var h=AA.target.getBoundingClientRect(),a=AA.clientX-h.left;ypx=AA.clientY-h.top;if(a<0||a>h.width||ypx<0||ypx>h.height){return D.unhover(c)}q=o(a);AB=o(ypx)}if("xval" in AA){V=o(AA.xval);q=K(W,V[0])}else{if("xpx" in AA){q=o(AA.xpx)}}if(q===undefined){q=o(W[0]._length/2)}if(V===undefined){V=AH(W,q[0])}if("yval" in AA){AF=o(AA.yval);AB=K(Z,AF)}else{if("ypx" in AA){AB=o(AA.ypx)}}if(AB===undefined){AB=o(Z[0]._length/2)}if(AF===undefined){AF=AH(Z,AB[0])}if(!$.isNumeric(q[0])||!$.isNumeric(AB[0])){console.log("Plotly.Fx.hover failed",AA,c);return }}var R=Infinity;var AG=e.filter(function(x){return !(Plotly.Plots.isBar(x[0].t.type)&&x[0].t.bardir=="h")});if(j=="x"&&!AG.length){j="y"}var g=j=="y"&&e.length>1;e.forEach(function(Aq,y){if(!Aq){return }var Au=null,Ao=Aq[0].t,Ag=AE.indexOf(Ao.xaxis+Ao.yaxis),Av=W[Ag],Ad=Z[Ag],Ap=j,A5,A2,Am,x,Az,Ax,Af,Ae,Al,Ak,Aj,An,Ah,Ay,A3,A1;if(Ap!="closest"){R=Infinity}if(Ap=="array"){var A6=AA[y];if("pointNumber" in A6){Au=A6.pointNumber;Ap="closest"}else{Ap="";if("xval" in A6){A2=A6.xval;A5=Av.c2p(A2);Ap="x"}if("yval" in A6){x=A6.yval;Am=Ad.c2p(x);Ap=Ap?"closest":"y"}}}else{A5=q[Ag];Am=AB[Ag];A2=V[Ag];x=AF[Ag]}if(Plotly.Plots.isHeatmap(Ao.type)){if(R<D.MAXDIST){return }Ap="closest";var Ai=Aq[0].z;AK=Aq[0].x;AI=Aq[0].y;if(Au!==null){try{A3=Math.round(Au[1]);A1=Math.round(Au[0])}catch(A0){console.log("Error hovering on heatmap, pointNumber must be [row,col], found:",Au);return }if(A3<0||A3>=Ai[0].length||A1<0||A1>Ai.length){return }}else{if(H(A2-AK[0],A2-AK[AK.length-1])>0||H(x-AI[0],x-AI[AI.length-1])>0){return }else{A3=Math.max(0,Math.min(AK.length-2,Plotly.Lib.findBin(A2,AK)));A1=Math.max(0,Math.min(AI.length-2,Plotly.Lib.findBin(x,AI)))}}Az=Av.c2p(AK[A3]);Ax=Av.c2p(AK[A3+1]);Af=Ad.c2p(AI[A1]);Ae=Ad.c2p(AI[A1+1]);if(Ao.zsmooth){Az=Ax=(Az+Ax)/2;Af=Ae=(Af+Ae)/2}z.push({i:0,dist:D.MAXDIST+10,curvenum:y,x0:Az,x1:Ax,y0:Af,y1:Ae,xLabel:(AK[A3]+AK[A3+1])/2,yLabel:(AI[A1]+AI[A1+1])/2,zLabel:Ai[A1][A3],xa:Av,ya:Ad});return }else{if(Plotly.Plots.isBar(Ao.type)){if(Ao.bardir=="h"){Ah=function(A7){return[Av.c2p(A7.s+A7.b,true)]};Al=function(A9){var A8=Av.c2p(A9.b,true),A7=Av.c2p(A9.b+A9.s,true);return H(A8-A5,A7-A5)+(A5-A7)/(A8-A7)};Aj=function(A7){return A7.s};Ay=(j=="y")?function(A7){return[Ad.c2p(A7.p-Ao.dbar/2,true),Ad.c2p(A7.p+Ao.dbar/2,true)]}:function(A7){return[Ad.c2p(A7.p+Ao.poffset,true),Ad.c2p(A7.p+Ao.poffset+Ao.barwidth,true)]};Ak=function(A7){var A8=Ay(A7);return H(A8[0]-Am,A8[1]-Am)};An=function(A7){return A7.p}}else{Ay=function(A7){return[Ad.c2p(A7.s+A7.b,true)]};Ak=function(A9){var A8=Ad.c2p(A9.b,true),A7=Ad.c2p(A9.b+A9.s,true);return H(A8-Am,A7-Am)+(Am-A7)/(A8-A7)};An=function(A7){return A7.s};Ah=(j=="x")?function(A7){return[Av.c2p(A7.p-Ao.dbar/2,true),Av.c2p(A7.p+Ao.dbar/2,true)]}:function(A7){return[Av.c2p(A7.p+Ao.poffset,true),Av.c2p(A7.p+Ao.poffset+Ao.barwidth,true)]};Al=function(A8){var A7=Ah(A8);return H(A7[0]-A5,A7[1]-A5)};Aj=function(A7){return A7.p}}}else{if(Ao.type=="box"){var A4=(Ap=="x")?0:D.MAXDIST;Ap="x";Ah=function(A7){return[Av.c2p(A7.x+Ao.bx-Ao.bdx,true),Av.c2p(A7.x+Ao.bx+Ao.bdx,true)]};Al=function(A8){var A7=Ah(A8);return H(A7[0]-A5,A7[1]-A5)+A4};Aj=function(A7){return A7.x}}else{Al=function(A7){return Math.abs(Av.c2p(A7.x)-A5)};Ak=function(A7){return Math.abs(Ad.c2p(A7.y)-Am)};Ah=function(A7){return[Av.c2p(A7.x)]};Ay=function(A7){return[Ad.c2p(A7.y)]};Aj=function(A7){return A7.x};An=function(A7){return A7.y}}}}if(Au!==null){if(Au<0||Au>=Aq.length){return }R=0}else{var As={x:Al,y:Ak,closest:function(A7){return Math.sqrt(Math.pow(Al(A7),2)+Math.pow(Ak(A7),2))}}[Ap];Aq.forEach(function(A8,A7){var A9=As(A8);if(A9<R){R=A9;Au=A7}})}if(!$.isNumeric(Au)||R>D.MAXDIST){return }var Aw=Aq[Au];AK=Ah(Aw);var At={i:Au,dist:R,curvenum:y,x0:AK[0],x1:AK[AK.length-1],xLabel:Aj(Aw),name:Ao.name,xa:Av,ya:Ad},Ar;if(Ao.type=="box"){["min","q1","med","q3","max","mean"].forEach(function(A7){if(A7=="mean"&&!Ao.mean){return }if(!(A7 in Aw)){return }AI=Ad.c2p(Aw[A7],true);Ar=$.extend({},At,{y0:AI,y1:AI,yLabel:Aw[A7]});if(A7=="mean"&&("sd" in Aw)&&Ao.mean=="sd"){Ar.ysd=Aw.sd}if(A7!="med"){Ar.name=""}z.push(Ar)})}else{AI=Ay(Aw);$.extend(At,{y0:AI[0],y1:AI[AI.length-1],yLabel:An(Aw)});if(Aw.tx){At.text=Aw.tx}z.push(At)}});var t=Infinity;z=z.filter(function(x){if(x&&("dist" in x)){t=Math.min(t,x.dist)}return x&&$.isNumeric(x.curvenum)&&x.i>=0&&x.i<e[x.curvenum].length&&$.isNumeric(x.x0)&&$.isNumeric(x.y0)&&$.isNumeric(x.xa.c2l(x.xLabel))&&$.isNumeric(x.ya.c2l(x.yLabel))});if(z.length===0){return D.unhover(c)}if(j=="closest"){z=[z[z.length-1]]}var M,AN=W[0],p=Z[0];z.forEach(function(y,x){y.posref=j=="y"?(y.x0+y.x1)/2:(y.y0+y.y1)/2;y.x0=Plotly.Lib.constrain(y.x0,0,AN._length);y.x1=Plotly.Lib.constrain(y.x1,0,AN._length);y.y0=Plotly.Lib.constrain(y.y0,0,p._length);y.y1=Plotly.Lib.constrain(y.y1,0,p._length);y.xLabel=Plotly.Axes.tickText(y.xa,y.xa.c2l(y.xLabel),"hover");y.yLabel=Plotly.Axes.tickText(y.ya,y.ya.c2l(y.yLabel),"hover");if(y.dist==t&&M===undefined){M=x}if("xsd" in y){y.xLabel.text+=" &plusmn; "+Plotly.Axes.tickText(y.xa,y.xa.c2l(y.xsd),"hover").text}if("ysd" in y){y.yLabel.text+=" &plusmn; "+Plotly.Axes.tickText(y.ya,y.ya.c2l(y.ysd),"hover").text}});if(!M){M=0}Y._hoverlayer.selectAll("g.axistext").remove();var T=z[M],u=13,AD="Arial, sans-serif",AZ=3,l=6,S=Y._paperdiv.node().getBoundingClientRect().top,AC="";if(t<=D.MAXDIST&&["array","closest"].indexOf(j)==-1){var AM=Y._hoverlayer.append("g").classed("axistext",true);var X=AM.append("path").style("fill","#444").attr("stroke-width",1).attr("stroke","#fff");var Ac=AM.append("text").call(Plotly.Drawing.font,AD,u,"#fff");AC=T[j=="y"?"yLabel":"xLabel"].text;Plotly.Drawing.styleText(Ac.node(),AC);var w=Ac.node().getBoundingClientRect();if(j=="x"){Ac.attr("text-anchor","middle").call(Plotly.Drawing.setPosition,0,(AN.side=="top"?(S-w.bottom-l-AZ):(S-w.top+l+AZ)));var U=AN.side=="top"?"-":"";X.attr("d","M0,0L"+l+","+U+l+"H"+(AZ+w.width/2)+"v"+U+(AZ*2+w.height)+"H-"+(AZ+w.width/2)+"V"+U+l+"H-"+l+"Z");AM.attr("transform","translate("+(AN._offset+(T.x0+T.x1)/2)+","+(p._offset+(AN.side=="top"?0:p._length))+")")}else{Ac.attr("text-anchor",p.side=="right"?"start":"end").call(Plotly.Drawing.setPosition,(p.side=="right"?1:-1)*(AZ+l),S-w.top-w.height/2);var AQ=p.side=="right"?"":"-";X.attr("d","M0,0L"+AQ+l+","+l+"V"+(AZ+w.height/2)+"h"+AQ+(AZ*2+w.width)+"V-"+(AZ+w.height/2)+"H"+AQ+l+"V-"+l+"Z");AM.attr("transform","translate("+(AN._offset+(p.side=="right"?AN._length:0))+","+(p._offset+(T.y0+T.y1)/2)+")")}z=z.filter(function(x){return("zLabel" in x)||x[j=="y"?"yLabel":"xLabel"].text==AC})}var b=G(Y.plot_bgcolor,Y.paper_bgcolor);var AO=Y._hoverlayer.selectAll("g.hovertext").data(z,function(x){return String(x.curvenum)+String(x.i)+String(x.x0)+String(x.y0)+x.name});AO.enter().append("g").classed("hovertext",true).each(function(y){var x=d3.select(this);x.append("rect").call(Plotly.Drawing.fillColor,Plotly.Drawing.addOpacity(b,0.8));x.append("text").classed("name",true).call(Plotly.Drawing.font,AD,u);x.append("path").attr("stroke-width",1);x.append("text").classed("nums",true).call(Plotly.Drawing.font,AD,u)});AO.exit().remove();AO.each(function(Ah){var Ag=d3.select(this).attr("transform",""),Ao=e[Ah.curvenum][0].t,y=(Ah.name&&!("zLabel" in Ah)&&c.data.length>1)?$("<p>"+Ah.name+"</p>").text():"",Ak=0,Am,Ae,Ar;if(!Ao.visible){Ae=""}else{if(Ao.type=="scatter"){if(Ao.mode=="lines"){Ae=(Ao.lc&&Plotly.Drawing.opacity(Ao.lc))?Ao.lc:Ao.fc}else{if(Ao.mode=="none"){Ae=Ao.fill?Ao.fc:""}else{Ae=(Ao.mc&&Plotly.Drawing.opacity(Ao.mc))?Ao.mc:(Ao.mlc&&Plotly.Drawing.opacity(Ao.mlc)&&Ao.mlw)?Ao.mlc:"";if(Ae){Ak=0.3}else{Ae=(Ao.lc&&Plotly.Drawing.opacity(Ao.lc)&&Ao.mode.indexOf("lines")!=-1&&Ao.lw)?Ao.lc:Ao.fc}}}}else{if(Plotly.Plots.isBar(Ao.type)){Ae=(Ao.mc&&Plotly.Drawing.opacity(Ao.mc))?Ao.mc:(Ao.mlc&&Plotly.Drawing.opacity(Ao.mlc)&&Ao.mlw)?Ao.mlc:""}else{if(Ao.type=="box"){Ae=(Ao.lc&&Plotly.Drawing.opacity(Ao.lc)&&Ao.lw)?Ao.lc:(Ao.mc&&Plotly.Drawing.opacity(Ao.mc)&&Ao.boxpts)?Ao.mc:Ao.fc}}}}if(!Ae||!Plotly.Drawing.opacity(Ae)){Ae="#444"}Ae=G(Ae,b,Ak);Ar=tinycolor(Ae).toHsl().l>0.5?"#000":"#FFF";if(y.length>15){y=y.substr(0,12)+"..."}if("zLabel" in Ah){Am="x: "+Ah.xLabel.text+"<br>y: "+Ah.yLabel.text+"<br>z: "+Ah.zLabel}else{if(j=="x"&&Ah.xLabel.text==AC){Am=Ah.yLabel.text}else{if(j=="y"&&Ah.yLabel.text==AC){Am=Ah.xLabel.text}else{Am="("+Ah.xLabel.text+", "+Ah.yLabel.text+")"}}}if(Ah.text){Am+="<br>"+Ah.text}var Af=Ag.select("text.nums").style("fill",Ar).text("").call(Plotly.Drawing.setPosition,0,0);Plotly.Drawing.styleText(Af.node(),Am);var Ad=Ag.select("text.name"),Ai=0;if(y){Ad.style("fill",Ae).text("").call(Plotly.Drawing.setPosition,0,0);Plotly.Drawing.styleText(Ad.node(),y);Ai=Ad.node().getBoundingClientRect().width+2*AZ}else{Ad.remove();Ag.select("rect").remove()}Ag.select("path").style("fill",Ae).attr("stroke",Ar);var Al=Af.node().getBoundingClientRect(),x=AN._offset+(Ah.x0+Ah.x1)/2,Aq=p._offset+(Ah.y0+Ah.y1)/2,Ap=Math.abs(Ah.x1-Ah.x0),An=Math.abs(Ah.y1-Ah.y0),Aj=Al.width+l+AZ+Ai;Ah.ty0=S-Al.top;Ah.bx=Al.width+2*AZ;Ah.by=Al.height+2*AZ;Ah.anchor="start";Ah.txwidth=Al.width;Ah.tx2width=Ai;if(g){Ah.pos=x;Aq+=An/2;if(Aq+Aj>Y.height){Ah.anchor="end";Aq-=An;if(Aq-Aj<0){Ah.anchor="middle";Aq+=An/2}}}else{Ah.pos=Aq;x+=Ap/2;if(x+Aj>Y.width){Ah.anchor="end";x-=Ap;if(x-Aj<0){Ah.anchor="middle";x+=Ap/2}}}Af.attr("text-anchor",Ah.anchor);if(Ai){Ad.attr("text-anchor",Ah.anchor)}Ag.attr("transform","translate("+x+","+Aq+")"+(g?"rotate("+B+")":""))});var P=0,k=g?AN:p,AX=k._offset,m=k._offset+k._length,AL=z.map(function(y,x){return[{i:x,dp:0,pos:y.pos,posref:y.posref,size:y.by*(g?F:1)/2}]}).sort(function(y,x){return y[0].posref-x[0].posref}),Aa,O,Ab,AT,N,Q;function L(x){Q+=x.dp}function f(x){x.dp+=O}function AJ(x){x.dp-=Ab}function AV(x){var Ae=x[0],y=x[x.length-1];O=AX-Ae.pos-Ae.dp+Ae.size;Ab=y.pos+y.dp+y.size-m;if(O>0.01){x.forEach(f);Aa=false}if(Ab<0.01){return }if(O<-0.01){x.forEach(AJ);Aa=false}if(!Aa){return }if(AL.length>1){console.log("hover error... how did we get here?",AL)}var Ad=0;for(AT=0;AT<x.length;AT++){N=x[AT];if(N.pos+N.dp+N.size>m){Ad++}}for(AT=x.length-1;AT>=0;AT--){if(Ad<=0){break}N=x[AT];if(N.pos>m-1){N.del=true;Ad--}}for(AT=0;AT<x.length;AT++){if(Ad<=0){break}N=x[AT];if(N.pos<AX+1){N.del=true;Ad--;Ab=N.size*2;x.forEach(AJ)}}for(AT=x.length-1;AT>=0;AT--){if(Ad<=0){break}N=x[AT];if(N.pos+N.dp+N.size>m){N.del=true;Ad--}}}while(!Aa&&P<=z.length){P++;Aa=true;AT=0;while(AT<AL.length-1){var AS=AL[AT],AP=AL[AT+1],AY=AS[AS.length-1],AW=AP[0];O=AY.pos+AY.dp+AY.size-AW.pos-AW.dp+AW.size;if(O>0.01){AP.forEach(f);AS.push.apply(AS,AP);AL.splice(AT+1,1);Q=0;AS.forEach(L);Ab=Q/AS.length;AS.forEach(AJ);Aa=false}else{AT++}}AL.forEach(AV)}AL.forEach(function(x){x.forEach(function(y){z[y.i].offset=y.dp;z[y.i].del=y.del})});AO.each(function(Aj){var Ai=d3.select(this);if(Aj.del){Ai.remove();return }var Ae=Aj.anchor=="end"?-1:1,Ag=Ai.select("text.nums"),Ad={start:1,end:-1,middle:0}[Aj.anchor],y=Ad*(l+AZ),x=y+Ad*(Aj.txwidth+AZ),Ah=0,Af=Aj.offset;if(Aj.anchor=="middle"){y-=Aj.tx2width/2;x-=Aj.tx2width/2}if(g){Af*=-I;Ah=Aj.offset*J}Ai.select("path").attr("d",Aj.anchor=="middle"?("M-"+(Aj.bx/2)+",-"+(Aj.by/2)+"h"+Aj.bx+"v"+Aj.by+"h-"+Aj.bx+"Z"):("M0,0L"+(Ae*l+Ah)+","+(l+Af)+"v"+(Aj.by/2-l)+"h"+(Ae*Aj.bx)+"v-"+Aj.by+"H"+(Ae*l+Ah)+"V"+(Af-l)+"Z"));Ag.call(Plotly.Drawing.setPosition,y+Ah,Af+Aj.ty0-Aj.by/2+AZ);Ag.selectAll("tspan.nl").attr("x",Ag.attr("x"));if(Aj.tx2width){Ai.select("text.name").call(Plotly.Drawing.setPosition,x+Ad*AZ+Ah,Af+Aj.ty0-Aj.by/2+AZ);Ai.select("rect").call(Plotly.Drawing.setRect,x+(Ad-1)*Aj.tx2width/2+Ah,Af-Aj.by/2-1,Aj.tx2width,Aj.by+2)}});var AR=c.hoverdata;c.hoverdata=z.map(function(y){var Ad=e[y.curvenum][0].t.curve,x={data:c.data[Ad],curveNumber:Ad,pointNumber:y.i,x:y.xLabel.x,y:y.yLabel.x,xaxis:y.xa,yaxis:y.ya};if("zLabel" in y){x.z=y.zLabel}return x});if(!AA.target){return }var v=!AR||AR.length!=c.hoverdata.length;if(!v){AR.forEach(function(y,x){if(y.curveNumber!=c.hoverdata[x].curveNumber||y.pointNumber!=c.hoverdata[x].pointNumber){v=true}})}if(!v){return }if(AR){$(c).trigger("plotly_unhover",{points:AR})}$(c).trigger("plotly_hover",{points:c.hoverdata})};D.unhover=function(L,K){if(typeof L=="string"){L=document.getElementById(L)}if(K&&K.relatedTarget&&$(K.relatedTarget).parents('[class="hoverlayer"]').length){D.hover(L,K,L.layout._hoversubplot)}else{if(K&&$(L).triggerHandler("plotly_beforehover",K)===false){return }L.layout._hoverlayer.selectAll("g").remove();if(L.hoverdata){$(L).trigger("plotly_unhover",{points:L.hoverdata})}L.hoverdata=undefined}};D.click=function(L,K){if(L.hoverdata){$(L).trigger("plotly_click",{points:L.hoverdata})}};D.modeBar=function(L){var M=$(L).find(".modebar"),O=L.layout,K=O._size;function N(){M.find("button").each(function(){var Q=$(this),P=Q.attr("data-val")||true,R=L.layout[Q.attr("data-attr")];Q.toggleClass("active",R==P)})}if(M.length===0){M=$('<div class="modebar"><div class="btn-group float--left"><button class="btn btn--icon btn--plot ploticon" data-attr="dragmode" data-val="zoom" rel="tooltip" title="Zoom"><i class="ploticon-zoombox"></i></button><button class="btn btn--icon btn--plot ploticon" data-attr="dragmode" data-val="pan" rel="tooltip" title="Pan">   <i class="ploticon-pan"></i></button></div><div class="btn-group float--left"><button class="btn btn--icon btn--plot ploticon" data-attr="zoom" data-val="in" rel="tooltip" title="Zoom in"><i class="ploticon-zoom_plus"></i></button><button class="btn btn--icon btn--plot ploticon" data-attr="zoom" data-val="out" rel="tooltip" title="Zoom out"><i class="ploticon-zoom_minus"></i></button><button class="btn btn--icon btn--plot ploticon" data-attr="allaxes.autorange" data-val="" rel="tooltip" title="Autoscale"><i class="ploticon-autoscale"></i></button></div><div class="btn-group float--left"><button class="btn btn--icon btn--plot ploticon" data-attr="hovermode" data-val="closest" rel="tooltip" title="Closest data"><i class="ploticon-tooltip_basic"></i></button><button class="btn btn--icon btn--plot ploticon" data-attr="hovermode" data-val="x" rel="tooltip" title="Compare data"><i class="ploticon-tooltip_compare"></i></button></div></div>').appendTo(O._paperdiv.node()).css({position:"absolute",right:0,top:0});M.find("button").tipsy({gravity:"n",opacity:1}).click(function(){var T=$(this).attr("data-attr"),W=$(this).attr("data-val")||true;if(T=="zoom"){var S=O.xaxis.range,V=O.yaxis.range,U=(W=="in")?0.5:2,R=(1+U)/2,P=(1-U)/2,Q={"xaxis.range[0]":R*S[0]+P*S[1],"xaxis.range[1]":R*S[1]+P*S[0],"yaxis.range[0]":R*V[0]+P*V[1],"yaxis.range[1]":R*V[1]+P*V[0]};Plotly.relayout(L,Q)}else{Plotly.relayout(L,T,W)}N();if(T=="dragmode"){D.setCursor(O._paper.select(".nsewdrag"),{pan:"move",zoom:"crosshair"}[W])}})}N()};SHOWZOOMOUTTIP=true;function E(r,v,b,a,c,m,z,p){var t=0,Y=1,l=r.layout,o=[v.x],M=[v.y],g=o[0]._length,q=M[0]._length,S=(z+p=="nsew")?({pan:"move",zoom:"crosshair"}[l.dragmode]):(z+p).toLowerCase()+"-resize",Q=v.draglayer.append("rect").classed("drag",true).classed(z+p+"drag",true).call(Plotly.Drawing.setRect,b,a,c,m).call(D.setCursor,S).style("fill","black").style("opacity",0).attr("stroke-width",0).attr("data-subplot",v.id).node(),u=[v].concat((z&&p)?v.overlays:[]);u.forEach(function(h){if(o.indexOf(h.x)==-1){o.push(h.x)}if(M.indexOf(h.y)==-1){M.push(h.y)}});function L(h){if(!h._id){Plotly.Axes.initAxis(r,h)}return h._id}var e=o.map(L),k=M.map(L),Z=o.concat(M);function X(h){h.range=h.range.map(Number)}Q.onmousedown=function(h){if(D.dragClear(r)){return true}r.dragging=true;var w=(new Date()).getTime();if(w-t<D.DBLCLICKDELAY){Y+=1}else{Y=1;t=w}if(z+p=="nsew"&&((l.dragmode=="zoom")?!h.shiftKey:h.shiftKey)){R(h)}else{P(h)}return Plotly.Lib.pauseEvent(h)};var j=[0,0,g,q],W=null,U=300,O=v.mainplot?l._plots[v.mainplot]:v;if(z.length*p.length!=1){$(Q).on("mousewheel DOMMouseScroll",function(AC){if(!r.mainsite&&!l._enablescrollzoom){return }clearTimeout(W);var y=Math.exp(-Math.min(Math.max(AC.originalEvent.wheelDelta,-50),50)/200),w=O.draglayer.select(".nsewdrag").node().getBoundingClientRect(),AB=(AC.originalEvent.clientX-w.left)/w.width,x=j[0]+j[2]*AB,h=(w.bottom-AC.originalEvent.clientY)/w.height,AA=j[1]+j[3]*(1-h);if(p){o.forEach(function(AE){X(AE);var AD=AE.range[0]+(AE.range[1]-AE.range[0])*AB;AE.range=[AD+(AE.range[0]-AD)*y,AD+(AE.range[1]-AD)*y]});j[2]*=y;j[0]=x-j[2]*AB}if(z){M.forEach(function(AD){X(AD);var AE=AD.range[0]+(AD.range[1]-AD.range[0])*h;AD.range=[AE+(AD.range[0]-AE)*y,AE+(AD.range[1]-AE)*y]});j[3]*=y;j[1]=AA-j[3]*(1-h)}K(j);T(z,p);W=setTimeout(function(){j=[0,0,g,q];f()},U)})}function R(AC){var h=O.draglayer.select(".nsewdrag").node().getBoundingClientRect(),x=AC.clientX-h.left,AE=AC.clientY-h.top,AB={l:x,r:x,w:0,t:AE,b:AE,h:0},w=r.hmpixcount?(r.hmlumcount/r.hmpixcount):tinycolor(r.layout.plot_bgcolor).toHsl().l,AF="M0,0H"+g+"V"+q+"H0V0",y=v.plot.append("path").attr("class","zoombox").style("fill",w>0.2?"rgba(0,0,0,0)":"rgba(255,255,255,0").attr("stroke-width",0).attr("d",AF+"Z"),AA=false;o.forEach(X);M.forEach(X);window.onmousemove=function(AI){var AG=Math.max(0,Math.min(g,AI.clientX-h.left)),AH=Math.max(0,Math.min(q,AI.clientY-h.top));AB={l:Math.min(x,AG),r:Math.max(x,AG),w:Math.abs(x-AG),t:Math.min(AE,AH),b:Math.max(AE,AH),h:Math.abs(AE-AH)};y.attr("d",AF+"M"+(AB.l)+","+(AB.t)+"v"+(AB.h)+"h"+(AB.w)+"v-"+(AB.h)+"h-"+(AB.w)+"Z");if(!AA){y.transition().style("fill",w>0.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200);AA=true}return Plotly.Lib.pauseEvent(AC)};window.onmouseup=function(AI){r.dragging=false;window.onmousemove=null;window.onmouseup=null;if(Math.min(AB.h,AB.w)<D.MINDRAG*2){if(Y==2&&(new Date()).getTime()-t<D.DBLCLICKDELAY){V()}return AD()}function AJ(){o.forEach(function(AK){AK.range=[AK.range[0]+(AK.range[1]-AK.range[0])*(AB.l)/g,AK.range[0]+(AK.range[1]-AK.range[0])*(AB.r)/g]});M.forEach(function(AK){AK.range=[AK.range[0]+(AK.range[1]-AK.range[0])*(q-AB.b)/q,AK.range[0]+(AK.range[1]-AK.range[0])*(q-AB.t)/q]});AD();f();if(SHOWZOOMOUTTIP&&(!r.mainsite||!signedin("noprompt"))&&r.data){Plotly.Lib.notifier("Double-click to<br>zoom back out","long");SHOWZOOMOUTTIP=false}}function AG(){o.forEach(function(AK){AK.range=[(AK.range[0]*(AB.r)+AK.range[1]*(-AB.l))/AB.w,(AK.range[0]*(AB.r-g)+AK.range[1]*(g-AB.l))/AB.w]});M.forEach(function(AK){AK.range=[(AK.range[0]*(q-AB.t)+AK.range[1]*(AB.b-q))/AB.h,(AK.range[0]*(-AB.t)+AK.range[1]*(AB.b))/AB.h]});AD();f()}if(AC.altKey||AC.ctrlKey||AC.metaKey||AI.altKey||AI.ctrlKey||AI.metaKey){$('<div class="modal-backdrop fade" id="js-zoombox-backdrop"></div><div class="open" id="js-zoombox-menu"><ul class="dropdown-menu"><li><a id="zoomboxin">Zoom In</a></li><li><a id="zoomboxout">Zoom Out</a></li></ul></div>').appendTo("body");var AH=$(".js-zoombox-menu ul")[0].getBoundingClientRect();$(".js-zoombox-menu ul").css({left:(Math.min(AI.clientX,h.right-AH.width)+window.scrollX)+"px",top:(Math.min(AI.clientY,h.bottom-AH.height)+window.scrollY)+"px","z-index":20001});$(".js-zoombox-backdrop,.zoombox").click(AD);$(".js-zoombox-in").click(AJ);$(".js-zoombox-out").click(AG)}else{AJ()}return Plotly.Lib.pauseEvent(AI)};function AD(){$(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu").remove()}}function P(h){r.dragged=false;window.onmousemove=function(y){var x=y.clientX-h.clientX,w=y.clientY-h.clientY;r.dragged=(p?Math.abs(x):0)+(z?Math.abs(w):0)>D.MINDRAG;if(r.dragged){N(x,w)}else{N(0,0)}return Plotly.Lib.pauseEvent(y)};window.onmouseup=function(w){window.onmousemove=null;window.onmouseup=null;r.dragging=false;if(r.dragged){f()}else{if((new Date()).getTime()-t<D.DBLCLICKDELAY){if(Y==2&&(z+p).length!=1){V()}else{if(Y==1){if((z+p).length==1){D.autoGrowInput(Q)}}}}}return Plotly.Lib.pauseEvent(w)}}function N(x,w){if(p=="ew"||z=="ns"){if(p){o.forEach(function(AA){AA.range=[AA._r[0]-x/AA._m,AA._r[1]-x/AA._m]})}if(z){M.forEach(function(AA){AA.range=[AA._r[0]-w/AA._m,AA._r[1]-w/AA._m]})}K([p?-x:0,z?-w:0,g,q]);T(z,p);return }function y(AA){return 1-((AA>=0)?Math.min(AA,0.9):1/(1/Math.max(AA,-0.3)+3.222))}function h(AB,AA,AC){AB.forEach(function(AD){AD.range[AA]=AD._r[1-AA]+(AD._r[AA]-AD._r[1-AA])/y(AC/AD._length)});return AB[0]._length*(AB[0]._r[AA]-AB[0].range[AA])/(AB[0]._r[AA]-AB[0]._r[1-AA])}if(p=="w"){x=h(o,0,x)}else{if(p=="e"){x=h(o,1,-x)}else{if(!p){x=0}}}if(z=="n"){w=h(M,1,w)}else{if(z=="s"){w=h(M,0,-w)}else{if(!z){w=0}}}K([(p=="w")?x:0,(z=="n")?w:0,g-x,q-w]);T(z,p)}function T(x,w){if(w){o.forEach(function(y){Plotly.Axes.doTicks(r,y._id)})}if(x){M.forEach(function(y){Plotly.Axes.doTicks(r,y._id)})}if(l.annotations){for(var h in l.annotations){if((w&&e.indexOf(l.annotations[h].xref)!=-1)||(x&&k.indexOf(l.annotations[h].yref)!=-1)){Plotly.Annotations.draw(r,h)}}}}function V(){var h={};if(p){o.forEach(function(w){h[w._name+".autorange"]=true})}if(z){M.forEach(function(w){h[w._name+".autorange"]=true})}Plotly.relayout(r,h)}function f(){var h={};Z.forEach(function(w){if(w._r[0]!=w.range[0]){h[w._name+".range[0]"]=w.range[0]}if(w._r[1]!=w.range[1]){h[w._name+".range[1]"]=w.range[1]}w.range=w._r.slice()});K([0,0,g,q]);Plotly.relayout(r,h)}function K(h){Object.keys(l._plots).forEach(function(AA){var x=l._plots[AA],y=x.x,w=x.y,AC=p&&o.indexOf(y)!=-1,AB=z&&M.indexOf(w)!=-1;if(AC||AB){var AD=[0,0,y._length,w._length];if(AC){AD[0]=h[0];AD[2]=h[2]}if(AB){AD[1]=h[1];AD[3]=h[3]}x.plot.attr("viewBox",AD.join(" "))}})}return Q}D.dragAlign=function(M,O,K,Q){var L=(M-K)/(Q-K),P=L+O/(Q-K),N=(L+P)/2;if(L<(2/3)-N){return L}if(P>(4/3)-N){return P}return N};D.dragCursors=function(K,L){if(Math.abs(K)==100){return"col-resize"}if(Math.abs(L)==100){return"row-resize"}return[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]][Plotly.Lib.constrain(Math.floor(L*3),0,2)][Plotly.Lib.constrain(Math.floor(K*3),0,2)]};D.dragClear=function(K){if($(".popover").length){return true}if(K.input){K.input.trigger("blur")}return false};D.autoGrowInput=function(x){var U=$(x).parents(".ui-tabs-panel, #embedded-graph")[0],S=U.layout,Z=d3.select(x),O=Z.attr("class"),o=$(x),q,Y={maxWidth:1000,minWidth:20},c={},R=O.match(/title$/)?"title":O.match(/^drag/)?"drag":O.match(/^legend/)?"legend":O.match(/^annotation/)?"annotation":"",K,f,N,V,t,M,Q;$(x).tooltip("destroy");if(!R||(!U.mainsite&&R!="drag")){console.log("oops, autoGrowInput error",O,x);return }console.log("autogrowinput "+R,x);if(R=="title"){var w=O.replace(/title$/,"");q=Plotly.Lib.nestedProperty(S,w=="g"?"title":(Plotly.Axes.id2name(w)+".title"));if(!$.trim(q.get())){Z.remove();q.set(".");Plotly.Plots.titles(U,O);q.set("");Z=S._paper.select("."+O);x=Z.node()}Y.align=O=="ytitle"?"left":"center"}else{if(R=="drag"){var u=($(x).attr("data-subplot").match(/(x[0-9]*)(y[0-9]*)/)||["","x","y"]);K=(["n","s"].indexOf(O.charAt(5))!=-1)?"y":"x";f=u[K=="x"?1:2];N=Plotly.Axes.getFromId(U,f);V=(["s","w"].indexOf(O.charAt(5))!=-1)?0:1;q=Plotly.Lib.nestedProperty(S,N._name+".range["+V+"]");Y.align=(O=="drag edrag"||N.side=="right")?"right":"left";o=$(U).find("."+N._id+"title")}else{if(R=="legend"){var y=Number(O.split("-")[1]);q=Plotly.Lib.nestedProperty(U.data[y],"name");Y.align="left"}else{if(R=="annotation"){Q=Number(o.parents("g.annotation").attr("data-index"));q=Plotly.Lib.nestedProperty(S,"annotations["+Q+"].text");Y.align="center"}}}}var h=["font-size","font-family","font-weight","font-style","font-stretch","font-variant","letter-spacing","word-spacing"];var r=["font-size","letter-spacing","word-spacing"];for(t in h){var p=o.attr(h[t]);if(r.indexOf(h[t])>=0&&Number(p)>0){p+="px"}if(p){c[h[t]]=p}}Y.comfortZone=(Number(String(c["font-size"]).split("px")[0])||20)+3;var j=Z.attr("transform"),X=x.getBoundingClientRect(),L=$("<input/>").appendTo(U);U.input=L;L.css(c).css({position:"absolute",top:0,left:0,"z-index":6000});if(R=="drag"){var l=q.get(),a=Math.abs(l-N.range[1-V]);if(N.type=="date"){L.val(Plotly.Lib.ms2DateTime(l,a))}else{if(N.type=="log"){M=Math.ceil(Math.max(0,-Math.log(a)/Math.LN10))+3;L.val(d3.format("."+String(M)+"g")(Math.pow(10,l)))}else{M=Math.floor(Math.log(Math.abs(l))/Math.LN10)-Math.floor(Math.log(a)/Math.LN10)+4;L.val(d3.format("."+String(M)+"g")(l))}}}else{L.val($.trim(q.get()).replace(/(\r\n?|\n\r?)/g,"<br>"))}var b=L.val(),m=$("<tester/>").css({position:"absolute",top:-9999,left:-9999,width:"auto",whiteSpace:"nowrap"}).css(c).insertAfter(L).html(A(b));function T(){return Plotly.Lib.constrain(m.width()+Y.comfortZone,Y.minWidth,Y.maxWidth)}L.width(T());var g=L[0].getBoundingClientRect(),W=X.left-g.left;L.css("top",(X.top-g.top+(X.height-g.height)/2)+"px");if(Y.align=="right"){W+=X.width-g.width}else{if(Y.align=="center"){W+=(X.width+Y.comfortZone-g.width)/2}}L.css("left",W+"px");var e={left:0,center:0.5,right:1}[Y.align];var k=L.position().left+L.width()*e;if(R=="annotation"){S._paper.selectAll('g.annotation[data-index="'+Q+'"]>svg').remove()}else{if(R!="drag"){S._paper.selectAll('[class="'+O+'"]').remove()}}L[0].select();function P(){L.remove();m.remove();U.input=null}L.bind("keyup keydown blur update",function(AC){var z=b;b=L.val();var AA=$.trim(b);if(!U.input||!S){return }if((AC.type=="blur")||(AC.type=="keydown"&&AC.which==13)){if(R=="drag"){AA=N.c2l(N.type=="category"?AA:Plotly.Axes.convertToNums(AA,N));if(!$.isNumeric(AA)){return }}if(R=="legend"){Plotly.restyle(U,q.astr,AA,y)}else{var AD={};AD[q.astr]=AA;if(R=="annotation"){if(S.xaxis.autorange){AD["xaxis.autorange"]=true}if(S.yaxis.autorange){AD["yaxis.autorange"]=true}}Plotly.relayout(U,AD)}P()}else{if(AC.type=="keydown"&&AC.which==27){if(R=="title"){Plotly.Plots.titles(U,O)}else{if(R=="legend"){Plotly.Legend.draw(U)}}P()}else{if(b!=z){m.html(A(b));var AB=T();L.css({width:AB,left:k-AB*e})}}}})};D.setCursor=function(K,L){(K.attr("class")||"").split(" ").forEach(function(M){if(M.indexOf("cursor-")===0){K.classed(M,false)}});if(L){K.classed("cursor-"+L,true)}};function A(K){return K.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\s/g,"&nbsp;")}function G(O,L,M){var N=tinycolor(O).toRgb(),P=tinycolor(L||"#FFF").toRgb();if(N.a==1){return O}else{if(M&&N.a<M){N.a=M}}var K=P.a==1?P:{r:255*(1-P.a)+P.r*P.a,g:255*(1-P.a)+P.g*P.a,b:255*(1-P.a)+P.b*P.a};var Q={r:K.r*(1-N.a)+N.r*N.a,g:K.g*(1-N.a)+N.g*N.a,b:K.b*(1-N.a)+N.b*N.a};return tinycolor(Q).toRgbString()}function H(K,L){return(K*L<0||K===0)?0:Infinity}}());(function(){var I=Plotly.Axes={};I.defaultAxis=function(Q){return $.extend({range:[-1,6],type:"-",showline:true,mirror:"all",linecolor:"#000",linewidth:1,tick0:0,dtick:2,ticks:"outside",ticklen:5,tickwidth:1,tickcolor:"#000",nticks:0,showticklabels:true,tickangle:"auto",exponentformat:"e",showexponent:"all",showgrid:true,gridcolor:"#ddd",gridwidth:1,autorange:true,autotick:true,zeroline:true,zerolinecolor:"#000",zerolinewidth:1,titlefont:{family:"",size:0,color:""},tickfont:{family:"",size:0,color:""},overlaying:false,domain:[0,1],position:0},Q)};I.setTypes=function(R){(R.data||[]).forEach(function(S){if(S.type&&S.type.indexOf("Polar")!=-1){return }["x","y"].forEach(function(T){var V=S[T+"axis"]||T,U=I.id2name(V);if(!R.layout[U]){R.layout[U]=I.defaultAxis({range:[-1,T=="x"?6:4],side:T=="x"?"bottom":"left"})}})});var Q=I.list(R);Q.forEach(function(S){I.initAxis(R,S)});if(R.data&&R.data.length&&R.axtypesok!==true){Q.forEach(B);R.axtypesok=true}Q.forEach(I.setConvert)};I.initAxis=function(R,Q){Q._name=Object.keys(R.layout).filter(function(S){return R.layout[S]===Q})[0];Q._id=I.name2id(Q._name);Q._td=R;Q.setScale=function(){var S=Q._td.layout._size;if(!Q.range||Q.range.length!=2||Q.range[0]==Q.range[1]){Q.range=[-1,1]}if(Q._id.charAt(0)=="y"){Q._offset=S.t+(1-Q.domain[1])*S.h;Q._length=S.h*(Q.domain[1]-Q.domain[0]);Q._m=Q._length/(Q.range[0]-Q.range[1]);Q._b=-Q._m*Q.range[1]}else{Q._offset=S.l+Q.domain[0]*S.w;Q._length=S.w*(Q.domain[1]-Q.domain[0]);Q._m=Q._length/(Q.range[1]-Q.range[0]);Q._b=-Q._m*Q.range[0]}};if(!Q.anchor){Q.anchor=I.counterLetter(Q._id)}if(!Q.domain||Q.domain.length!=2||Q.domain[0]>=Q.domain[1]||Q.domain[0]<0||Q.domain[1]>1){Q.domain=[0,1]}if(Q.title===undefined){Q.title="Click to enter "+Q._id.toUpperCase()+" axis title"}return Q};I.id2name=function(Q){return Q&&Q.charAt(0)+"axis"+Q.substr(1)};I.name2id=function(Q){return Q&&Q.charAt(0)+Q.substr(5)};I.counterLetter=function(Q){return{x:"y",y:"x"}[Q.charAt(0)]};function B(S){var Q=S._id.charAt(0),R=S._td.data.filter(function(V){return(V[Q+"axis"]||Q)==S._id}),U=R[0]||{x:[0],y:[0]};if(!U.type){U.type="scatter"}if(!S.type){if(S.isdate){S.type="date"}else{if(S.islog){S.type="log"}else{if(S.isdate===false&&S.islog===false){S.type="linear"}}}}delete S.islog;delete S.isdate;S.categories=[];S._categories=[];if((Plotly.Plots.isBar(U.type))&&(U.bardir=="h")){Q={x:"y",y:"x"}[Q]}var T=(["histogramx","histogramy"].indexOf(U.type)!=-1);if(T){if(Q=="y"){if(S.type!="log"){S.type="linear"}return }else{Q=U.type.charAt(9)}}if(U.type=="box"&&Q=="x"&&!("x" in U)&&!("x0" in U)){S.type="category"}else{if((Q in U)?M(U[Q]):(Plotly.Lib.isDateTime(U[Q+"0"])&&!$.isNumeric(U[Q+"0"]))){S.type="date"}else{if(A(R,Q)){S.type="category"}else{if(O(R,Q)&&S.type!="linear"){S.type="log"}else{if(S.type!="log"){S.type="linear"}}}}}}function M(R){var Q=0,T=0;for(var S in R){if(Plotly.Lib.isDateTime(R[S])){Q+=1}if($.isNumeric(R[S])){T+=1}}return(Q>T*2)}function O(V,Q){var X=[],Z,W,U;var R=(Q=="x")?"y":"x";for(var S in V){W=V[S];if(Q in W){for(U in W[Q]){Z=W[Q][U];if($.isNumeric(Z)){if(Z<=0){return false}else{if(X.indexOf(Z)<0){X.push(Z)}}}}}else{if((Q+"0" in W)&&("d"+Q in W)&&(R in W)){if((W[Q+"0"]<=0)||(W[Q+"0"]+W["d"+Q]*(W[R].length-1)<=0)){return false}for(U in V[S][R]){Z=W[Q+"0"]+W["d"+Q]*U;if(X.indexOf(Z)<0){X.push(Z)}}}}}var Y=Math.max.apply(Math,X),T=Math.min.apply(Math,X);return((Y/T>=100)&&(X.sort()[Math.ceil(X.length/4)]<Y/10))}function A(U,S){function R(V){return !$.isNumeric(V)&&["","None"].indexOf("v")==-1}var T=0,Q=0;U.forEach(function(Z){if(S in Z){var X=0,V=0;for(var W in Z[S]){var Y=Z[S][W];Plotly.Lib.log("unclean",Y);Y=I.cleanDatum(Y);Plotly.Lib.log("clean",Y);if(Y&&R(Y)){V++}else{if($.isNumeric(Y)){X++}}}if(V>X){T++}else{Q++}}else{if(S+"0" in Z&&R(Z[S+"0"])){T++}else{Q++}}});return T>Q}I.convertOne=function(V,T,S){var U=V[{x:"y",y:"x"}[T]];if(T in V){return I.convertToNums(V[T],S)}else{var Q=((T+"0") in V)?I.convertToNums(V[T+"0"],S):0,R=(V["d"+T])?V["d"+T]:1;return U.map(function(W,X){return Q+X*R})}};I.convertToNums=function(S,R){var Q;if(R.type=="date"){Q=Plotly.Lib.dateTime2ms}else{if(R.type=="category"){if(!R._categories){R._categories=[]}($.isArray(S)?S:[S]).forEach(function(T){if(R._categories.indexOf(T)==-1){R._categories.push(T)}});Q=function(T){var U=R._categories.indexOf(T);return U==-1?undefined:U}}else{Q=function(T){T=I.cleanDatum(T);return $.isNumeric(T)?Number(T):undefined}}}if($.isArray(S)){return S.map(Q)}else{return Q(S)}};I.cleanDatum=function(R){try{R=R.toString().replace("$","").replace(/,/g,"").replace("'","").replace('"',"").replace("%","")}catch(Q){console.log(Q)}return R};I.setConvert=function(S){function Q(U){return(U>0)?Math.log(U)/Math.LN10:null}function T(U){return Math.pow(10,U)}function R(U){return $.isNumeric(U)?U:null}S.c2l=(S.type=="log")?Q:R;S.l2c=(S.type=="log")?T:R;S.l2p=function(U){return d3.round(S._b+S._m*U,2)};S.p2l=function(U){return(U-S._b)/S._m};S.c2p=function(V,Y){var X=S.c2l(V);if($.isNumeric(X)){return S.l2p(X)}if(Y&&$.isNumeric(V)){var W=S.range[0],U=S.range[1];return S.l2p(0.5*(W+U-3*Math.abs(W-U)))}};S.p2c=function(U){return S.l2c(S.p2l(U))};S._min=[];S._max=[];S._minDtick=null;S._forceTick0=null};I.minDtick=function(S,R,T,Q){if(["log","category"].indexOf(S.type)!=-1||!Q){S._minDtick=0}else{if(S._minDtick===null){S._minDtick=R;S._forceTick0=T}else{if(S._minDtick){if((S._minDtick/R+0.000001)%1<0.000002&&(((T-S._forceTick0)/R%1)+1.000001)%1<0.000002){S._minDtick=R;S._forceTick0=T}else{if((R/S._minDtick+0.000001)%1>0.000002||(((T-S._forceTick0)/S._minDtick%1)+1.000001)%1>0.000002){S._minDtick=0}}}}}};I.doAutoRange=function(Q){if(!Q._length){Q.setScale()}if(Q.autorange&&Q._min&&Q._max&&Q._min.length&&Q._max.length){var X,W,R,U,T,Z,V,S,a=0;for(X=0;X<Q._min.length;X++){R=Q._min[X];for(W=0;W<Q._max.length;W++){U=Q._max[W];S=U.val-R.val;V=Q._length-R.pad-U.pad;if(S>0&&V>0&&S/V>a){T=R;Z=U;a=S/V}}}if(a){var Y=(Q.range&&Q.range[1]<Q.range[0]);Q.range=[T.val-a*T.pad,Z.val+a*Z.pad];if(Q.range[0]==Q.range[1]){Q.range=[Q.range[0]-1,Q.range[0]+1]}if(Y){Q.range.reverse()}}}};I.expand=function(Z,u,R){if(!Z.autorange||!u){return }if(!Z._min){Z._min=[]}if(!Z._max){Z._max=[]}if(!R){R={}}if(!Z._m){Z.setScale()}var p=u.length,r=R.padded?Z._length*0.05:0,S=R.tozero&&(Z.type=="linear"||Z.type=="-"),o,m,e,g,t,T,q,h,c,U,W;function V(w){if($.isArray(w)){return function(v){return Math.max(Number(w[v]||0),0)}}else{var j=Math.max(Number(w||0),0);return function(){return j}}}var a=V(R.ppad),b=V(Z._m>0?R.ppadplus:R.ppadminus),X=V(Z._m>0?R.ppadminus:R.ppadplus),Y=V(R.vpad),Q=V(R.vpadplus),l=V(R.vpadminus);function k(j){if(!c){return true}if(j.val<=e&&j.pad>=h){c=false}else{if(j.val>=e&&j.pad<=h){return false}}return true}function f(j){if(!c){return true}if(j.val>=g&&j.pad>=q){c=false}else{if(j.val<=g&&j.pad<=q){return false}}return true}for(o=0;o<p;o++){if(!$.isNumeric(u[o])){continue}T=a(o);q=(b(o)||T)+r;h=(X(o)||T)+r;t=Y(o);U=u[o]-(l(o)||t);W=u[o]+(Q(o)||t);if(Z.type=="log"&&U<W/10){U=W/10}e=Z.c2l(U);g=Z.c2l(W);if(S){e=Math.min(0,e);g=Math.max(0,g)}if($.isNumeric(e)){c=true;Z._min=Z._min.filter(k);if(c){Z._min.push({val:e,pad:(S&&e===0)?0:h})}}if($.isNumeric(g)){c=true;Z._max=Z._max.filter(f);if(c){Z._max.push({val:g,pad:(S&&g===0)?0:q})}}}};I.autoBin=function(j,Y,a,R){var b=Plotly.Lib.aggNums(Math.min,null,j),c=Plotly.Lib.aggNums(Math.max,null,j);if(Y.type=="category"){return{start:b-0.5,end:c+0.5,size:1}}else{var X;if(a){X=((c-b)/a)}else{var W=Plotly.Lib.distinctVals(j),e=Math.pow(10,Math.floor(Math.log(W.minDiff)/Math.LN10)),Q=e*D(W.minDiff/e,[0.9,1.9,4.9],true);X=Math.max(Q,2*Plotly.Lib.stdev(j)/Math.pow(j.length,R?0.25:0.4))}var U={type:Y.type=="log"?"linear":Y.type,range:[b,c]};I.autoTicks(U,X);var V=I.tickIncrement(I.tickFirst(U),U.dtick,"reverse");var Z=0,g=0,T=0;for(var f=0;f<j.length;f++){if(j[f]%1===0){g++}else{if(!$.isNumeric(j[f])){T++}}if((1+(j[f]-V)*100/U.dtick)%100<2){Z++}}if(g+T==j.length&&Y.type!="date"){V-=0.5;if(U.dtick<1){U.dtick=1}}else{if(Z>(j.length-T)/2){var h=(I.tickIncrement(V,U.dtick)-V)/2;V+=(V+h<b)?h:-h}}var S=V;while(S<c){S=I.tickIncrement(S,U.dtick)}return{start:V,end:S,size:U.dtick}}};function P(W){if(W.autotick||!W.dtick){var S=W._td.layout._size,U=(W.nticks||Plotly.Lib.constrain(W._length/(W._id.charAt(0)=="y"?40:80),4,9)+1);I.autoTicks(W,Math.abs(W.range[1]-W.range[0])/U);if(W._minDtick>0&&W.dtick<W._minDtick*2){W.dtick=W._minDtick;W.tick0=W._forceTick0}}if(!W.tick0){if(W.type=="date"){W.tick0=new Date(2000,0,1).getTime()}else{W.tick0=0}}G(W);W._tmin=I.tickFirst(W);var T=(W.range[1]<W.range[0]);var V=[],R=W.range[1]*1.0001-W.range[0]*0.0001;if(W.type=="category"){R=(T)?Math.max(-0.5,R):Math.min(W._categories.length-0.5,R)}for(var Q=W._tmin;(T)?(Q>=R):(Q<=R);Q=I.tickIncrement(Q,W.dtick,T)){V.push(Q);if(V.length>1000){break}}W._tmax=V[V.length-1];return V.map(function(X){return I.tickText(W,X)})}I.autoTicks=function(W,Q){var V,U;if(W.type=="date"){W.tick0=new Date(2000,0,1).getTime();if(Q>15778800000){Q/=31557600000;U=Math.pow(10,Math.floor(Math.log(Q)/Math.LN10));W.dtick="M"+String(12*U*D(Q/U,[2,5,10]))}else{if(Q>1209600000){Q/=2629800000;W.dtick="M"+D(Q,[1,2,3,6])}else{if(Q>43200000){V=86400000;W.tick0=new Date(2000,0,2).getTime();W.dtick=V*D(Q/V,[1,2,3,7,14])}else{if(Q>1800000){V=3600000;W.dtick=V*D(Q/V,[1,2,3,6,12])}else{if(Q>30000){V=60000;W.dtick=V*D(Q/V,[1,2,5,10,15,30])}else{if(Q>500){V=1000;W.dtick=V*D(Q/V,[1,2,5,10,15,30])}else{U=Math.pow(10,Math.floor(Math.log(Q)/Math.LN10));W.dtick=U*D(Q/U,[2,5,10])}}}}}}}else{if(W.type=="log"){W.tick0=0;if(Q>0.7){W.dtick=Math.ceil(Q)}else{if(Math.abs(W.range[1]-W.range[0])<1){var T=1.5*Math.abs((W.range[1]-W.range[0])/Q);Q=Math.abs(Math.pow(10,W.range[1])-Math.pow(10,W.range[0]))/T;U=Math.pow(10,Math.floor(Math.log(Q)/Math.LN10));W.dtick="L"+String(U*D(Q/U,[2,5,10]))}else{var R=Math.pow(10,Math.min(W.range[1],W.range[0]));var S=Math.pow(10,Math.floor(Math.log(R)/Math.LN10));W.dtick=(Q>0.3)?"D2":"D1"}}}else{if(W.type=="category"){W.tick0=0;W.dtick=1}else{W.tick0=0;U=Math.pow(10,Math.floor(Math.log(Q)/Math.LN10));W.dtick=U*D(Q/U,[2,5,10])}}}if(W.dtick===0){W.dtick=1}if(!$.isNumeric(W.dtick)&&typeof W.dtick!="string"){W.dtick=1;throw"ax.dtick error: "+String(W.dtick)}};function G(S){var R=S.dtick,Q;S._tickexponent=0;if(S.type=="category"){S._tickround=null}else{if($.isNumeric(R)||R.charAt(0)=="L"){if(S.type=="date"){if(R>=86400000){S._tickround="d"}else{if(R>=3600000){S._tickround="H"}else{if(R>=60000){S._tickround="M"}else{if(R>=1000){S._tickround="S"}else{S._tickround=3-Math.round(Math.log(R/2)/Math.LN10)}}}}}else{if(!$.isNumeric(R)){R=Number(R.substr(1))}S._tickround=2-Math.floor(Math.log(R)/Math.LN10+0.01);if(S.type=="log"){Q=Math.pow(10,Math.max(S.range[0],S.range[1]))}else{Q=Math.max(Math.abs(S.range[0]),Math.abs(S.range[1]))}var T=Math.floor(Math.log(Q)/Math.LN10+0.01);if(Math.abs(T)>3){S._tickexponent=(["SI","B"].indexOf(S.exponentformat)!=-1)?3*Math.round((T-1)/3):T}}}else{if(R.charAt(0)=="M"){S._tickround=(R.length==2)?"m":"y"}else{S._tickround=null}}}}function D(Z,Y,V){var S=0,T=Y.length-1,R,X=0,U=V?0:1,W=V?1:0,Q=V?Math.ceil:Math.floor;while(S<T&&X++<100){R=Q((S+T)/2);if(Y[R]<=Z){S=R+U}else{T=R-W}}return Y[S]}I.tickIncrement=function(X,V,W){if($.isNumeric(V)){return X+(W?-V:V)}var Z=V.charAt(0);var T=Number(V.substr(1)),Y=(W?-T:T);if(Z=="M"){var U=new Date(X);return U.setMonth(U.getMonth()+Y)}else{if(Z=="L"){return Math.log(Math.pow(10,X)+Y)/Math.LN10}else{if(Z=="D"){var S=(V=="D2")?[-0.301,0,0.301,0.699,1]:[-0.046,0,0.301,0.477,0.602,0.699,0.778,0.845,0.903,0.954,1];var Q=X+(W?-0.01:0.01);var R=D(K(Q,1),S,W);return Math.floor(Q)+Math.log(d3.round(Math.pow(10,R),1))/Math.LN10}else{throw"unrecognized dtick "+String(V)}}}};I.tickFirst=function(Q){var Z=(Q.range[1]<Q.range[0]),b=(Z?Math.floor:Math.ceil),U=Q.range[0]*1.0001-Q.range[1]*0.0001;if($.isNumeric(Q.dtick)){var S=b((U-Q.tick0)/Q.dtick)*Q.dtick+Q.tick0;if(Q.type=="category"){S=Plotly.Lib.constrain(S,0,Q._categories.length-1)}return S}var a=Q.dtick.charAt(0),T=Number(Q.dtick.substr(1)),Y,V,X;if(a=="M"){Y=new Date(Q.tick0);U=new Date(U);V=(U.getFullYear()-Y.getFullYear())*12+U.getMonth()-Y.getMonth();X=Y.setMonth(Y.getMonth()+(Math.round(V/T)+(Z?1:-1))*T);while(Z?X>U:X<U){X=I.tickIncrement(X,Q.dtick,Z)}return X}else{if(a=="L"){return Math.log(b((Math.pow(10,U)-Q.tick0)/T)*T+Q.tick0)/Math.LN10}else{if(a=="D"){var W=(Q.dtick=="D2")?[-0.301,0,0.301,0.699,1]:[-0.046,0,0.301,0.477,0.602,0.699,0.778,0.845,0.903,0.954,1];var R=D(K(U,1),W,Z);return Math.floor(U)+Math.log(d3.round(Math.pow(10,R),1))/Math.LN10}else{throw"unrecognized dtick "+String(Q.dtick)}}}};var L=d3.time.format("%Y"),C=d3.time.format("%b %Y"),E=d3.time.format("%b %-d"),H=d3.time.format("%b %-d %Hh"),N=d3.time.format("%H:%M"),F=d3.time.format(":%S");I.tickText=function(Q,c,U){var Z=Q._td.layout.font,S=Q.tickfont,Y=Q._tickround,R=Q.dtick,T=S.family||Z.family||"Arial",h=S.size||Z.size||12,X=S.color||Z.color||"#000",e=0,b=0,f="",V,g=(!U&&Q.showexponent!="all"&&Q.exponentformat!="none"&&c!={first:Q._tmin,last:Q._tmax}[Q.showexponent])?"hide":false;if(Q.type=="date"){if(U){if($.isNumeric(Y)){Y+=2}else{Y={y:"m",m:"d",d:"H",H:"M",M:"S",S:2}[Y]}}var W=new Date(c);if(Y=="y"){V=L(W)}else{if(Y=="m"){V=C(W)}else{if(c==Q._tmin){f="<br>"+L(W)}if(Y=="d"){V=E(W)}else{if(Y=="H"){V=H(W)}else{if(c==Q._tmin){f="<br>"+E(W)+", "+L(W)}V=N(W);if(Y!="M"){V+=F(W);if(Y!="S"){V+=J(K(c/1000,1),Q,"none").substr(1)}}}}}}}else{if(Q.type=="log"){if(U&&($.isNumeric(R)||R.charAt(0)!="L")){R="L3"}if($.isNumeric(R)||((R.charAt(0)=="D")&&(K(c+0.01,1)<0.1))){V=(Math.round(c)===0)?"1":(Math.round(c)==1)?"10":"10"+String(Math.round(c)).sup();h*=1.25}else{if(R.charAt(0)=="D"){V=Math.round(Math.pow(10,K(c,1)));h*=0.75}else{if(R.charAt(0)=="L"){V=J(Math.pow(10,c),Q,g,U)}else{throw"unrecognized dtick "+String(R)}}}}else{if(Q.type=="category"){var a=Q._categories[Math.round(c)];if(a===undefined){a=""}V=String(a)}else{V=J(c,Q,g,U)}}}if((Q.dtick=="D1")&&(String(V).charAt(0)=="1")){if(Q._id.charAt(0)=="y"){e-=h/4}else{b+=h/3}}return{x:c,dx:e,dy:b,text:V+f,fontSize:h,font:T,fontColor:X}};SIPREFIXES=["f","p","n","&mu;","m","","k","M","G","T"];function J(g,Q,Y,a){var T=(g<0),R=Q._tickround,U=Y||Q.exponentformat||"e",c=Q._tickexponent,X=Q.separators||".",V=X.charAt(0),S=X.charAt(1);if(a){var f={exponentformat:Q.exponentformat,dtick:Math.abs(g),range:[0,g||1]};G(f);R=f._tickround+2;c=f._tickexponent}var b=Math.pow(10,-R)/2;if(U=="none"){c=0}g=Math.abs(g);if(g<b){g="0"}else{g+=b;if(c){g*=Math.pow(10,-c);R+=c}if(R===0){g=String(Math.floor(g))}else{if(R<0){g=String(Math.round(g));g=g.substr(0,g.length+R);for(var Z=R;Z<0;Z++){g+="0"}}else{g=String(g);var W=g.indexOf(".")+1;if(W){g=g.substr(0,W+R).replace(/\.?0+$/,"")}}}}if(c&&U!="hide"){if(U=="e"||((U=="SI"||U=="B")&&(c>12||c<-15))){g+="e"+(c>0?"+":"")+c}else{if(U=="E"){g+="E"+(c>0?"+":"")+c}else{if(U=="power"){g+="&times;10"+String(c).sup()}else{if(U=="B"&&c==9){g+="B"}else{if(U=="SI"||U=="B"){g+=SIPREFIXES[c/3+5]}else{console.log("unknown exponent format "+U)}}}}}}return(T?"-":"")+g}I.list=function(R,Q){if(!R.layout){return[]}return Object.keys(R.layout).filter(function(S){if(Q&&S.charAt(0)!=Q){return false}return S.match(/^[xy]axis[0-9]*/g)}).sort().map(function(S){return R.layout[S]})};I.getFromId=function(S,R,Q){if(Q=="x"){R=R.replace(/y[0-9]*/,"")}else{if(Q=="y"){R=R.replace(/x[0-9]*/,"")}}return S.layout[I.id2name(R)]};I.doTicks=function(X,b){var p=X.layout,j=p._size,c=I.getFromId(X,b);if(b=="redraw"){X.layout._paper.selectAll("g.subplot").each(function(y){var g=p._plots[y];g.plot.attr("viewBox","0 0 "+g.x._length+" "+g.y._length);g.axislayer.selectAll("text,path").remove();g.gridlayer.selectAll("path").remove();g.zerolinelayer.selectAll("path").remove()})}if(!b||b=="redraw"){I.list(X).forEach(function(g){I.doTicks(X,g._id);if(b=="redraw"){g._r=g.range.slice()}});return }c.range=c.range.map(Number);c.setScale();var S=b.charAt(0),e=P(c),Y=function(g){return g.text+g.x+c.mirror},W=b+"tick",a=b+"grid",V=b+"zl",t=($.isNumeric(c.linewidth)?c.linewidth:1)/2,h=(c.ticks=="outside"?c.ticklen:1)+c.linewidth,f=c.gridwidth||1,k=(c.ticks=="inside"?1:-1),u,m,r,R,w,v,Z,q,T,o,U;if(S=="x"){u=["bottom","top"];m=function(g){return"translate("+c.l2p(g.x)+",0)"}}else{if(S=="y"){u=["left","right"];m=function(g){return"translate(0,"+c.l2p(g.x)+")"}}else{console.log("unrecognized doTicks axis",b);return }}var x=c.side||u[0];function Q(y){var g=c.l2p(y.x);return(g>1&&g<c._length-1)}var l=e.filter(Q);Plotly.Plots.getSubplots(X,c).forEach(function(AA,AC){var AX=p._plots[AA],AV=c._linepositions[AA]||[],y=AX[{x:"y",y:"x"}[S]],AS=y._id==c.anchor,AI=[false,false,false],z,AD,AH,AK="";if(c.mirror=="allticks"){AI=[true,true,false]}else{if(AS){if(c.mirror=="ticks"){AI=[true,true,false]}else{AI[u.indexOf(x)]=true}}}if(c.mirrors){for(o=0;o<2;o++){if(["ticks","labels"].indexOf(c.mirrors[y._id+u[o]])!=-1){AI[o]=true}}}if(AV[2]!==undefined){AI[2]=true}if(S=="x"){z=[-1,1,x==u[1]?1:-1];AD="M"+c._offset+",";AH="v"}else{z=[1,-1,x==u[1]?-1:1];AD="M";AH=","+c._offset+"h"}AI.forEach(function(AZ,Aa){var Ac=AV[Aa],Ab=z[Aa]*k;if(AZ&&$.isNumeric(Ac)){AK+=AD+(Ac+t*Ab)+AH+(Ab*c.ticklen)}});var AU=AX.axislayer.selectAll("path."+W).data(c.ticks=="inside"?l:e,Y);if(AK&&c.ticks){AU.enter().append("path").classed(W,1).classed("ticks",1).classed("crisp",1).call(Plotly.Drawing.strokeColor,c.tickcolor||"#000").attr("stroke-width",c.tickwidth||1).attr("d",AK);AU.attr("transform",m);AU.exit().remove()}else{AU.remove()}var AT=AX.axislayer.selectAll("text."+W).data(e,Y);if(c.showticklabels&&$.isNumeric(AV[3])){var AR,AP,AJ,AQ;if(S=="x"){var AW=x=="bottom"?1:-1,AO=x=="bottom"?1:-0.5;AR=function(AZ){return AZ.dx+c._offset};AQ=AV[3]+(h+t)*AW;AP=function(AZ){return AZ.dy+AQ+AZ.fontSize*AO};AJ=function(AZ){if(!$.isNumeric(AZ)||AZ===0||AZ==180){return"middle"}return AZ*AW<0?"end":"start"}}else{AP=function(AZ){return AZ.dy+c._offset+AZ.fontSize/2};AQ=AV[3]+(h+t+(Math.abs(c.tickangle)==90?d.fontSize/2:0))*(x=="right"?1:-1);AR=function(AZ){return AZ.dx+AQ};AJ=function(AZ){if($.isNumeric(AZ)&&Math.abs(AZ)==90){return"middle"}return x=="right"?"start":"end"}}var AM=0,AN=0;AT.enter().append("text").classed(W,1).each(function(AZ){d3.select(this).call(Plotly.Drawing.setPosition,AR(AZ),AP(AZ)).call(Plotly.Drawing.font,AZ.font,AZ.fontSize,AZ.fontColor);Plotly.Drawing.styleText(this,AZ.text)});AT.attr("transform",function(AZ){AM=Math.max(AM,AZ.fontSize);return m(AZ)+(($.isNumeric(c.tickangle)&&Number(c.tickangle)!==0)?(" rotate("+c.tickangle+","+AR(AZ)+","+(AP(AZ)-AZ.fontSize/2)+")"):"")}).attr("text-anchor",AJ(c.tickangle));if(S=="x"&&!$.isNumeric(c.tickangle)){var AB=AT[0].map(function(AZ){return AZ.getBoundingClientRect()});for(o=0;o<AB.length-1;o++){if(Plotly.Lib.bBoxIntersect(AB[o],AB[o+1])){AN=30;break}}if(AN){var AL=Math.abs((e[e.length-1].x-e[0].x)*c._m)/(e.length-1);if(AL<AM*2.5){AN=90}AT.attr("transform",function(AZ){return m(AZ)+" rotate("+AN+","+AR(AZ)+","+(AP(AZ)-AZ.fontSize/2)+")"}).attr("text-anchor",AJ(AN))}}AT.exit().remove()}else{AT.remove()}if(AX["hidegrid"+S]){l=[]}var AG=(S=="x")?("M"+c._offset+","+y._offset+"v"+y._length):("M"+y._offset+","+c._offset+"h"+y._length);var g=AX.gridlayer.selectAll("path."+a).data(c.showgrid===false?[]:l,Y);g.enter().append("path").classed(a,1).classed("crisp",1).attr("d",AG).each(function(AZ){if(c.zeroline&&(c.type=="linear"||c.type=="-")&&Math.abs(AZ.x)<c.dtick/100){d3.select(this).remove()}});g.attr("transform",m).call(Plotly.Drawing.strokeColor,c.gridcolor||"#ddd").attr("stroke-width",f);g.exit().remove();var AF=(X.data||[]).filter(function(AZ){return AZ.visible!==false&&((AZ.xaxis||"x")+(AZ.yaxis||"y")==AA)&&((Plotly.Plots.isBar(AZ.type)&&(AZ.bardir||"v")=={x:"h",y:"v"}[S])||((AZ.type||"scatter")=="scatter"&&AZ.fill&&AZ.fill.charAt(AZ.fill.length-1)==S))}).length;var AY=(c.range[0]*c.range[1]<=0)&&c.zeroline&&(c.type=="linear"||c.type=="-")&&!AX["hidegrid"+S]&&(AF||Q({x:0}));var AE=AX.zerolinelayer.selectAll("path."+V).data(AY?[{x:0}]:[]);AE.enter().append("path").classed(V,1).classed("zl",1).classed("crisp",1).attr("d",AG);AE.attr("transform",m).call(Plotly.Drawing.strokeColor,c.zerolinecolor||"#000").attr("stroke-width",c.zerolinewidth||f);AE.exit().remove()});Plotly.Plots.titles(X,b+"title")};function K(Q,R){return((Q%R)+R)%R}}());(function(){var A=window.Plotly.Scatter={};A.PTS_LINESONLY=20;A.calc=function(K,F){if(!("y" in F)&&!("x" in F)){return }var E=[];if(F.visible===false){if(F.mode||((!F.x||F.x.length<A.PTS_LINESONLY)&&(!F.y||F.y.length<A.PTS_LINESONLY))){return[{x:false,y:false}]}else{for(i=0;i<A.PTS_LINESONLY+1;i++){E.push({x:false,y:false})}return E}}var C=Plotly.Axes.getFromId(K,F.xaxis||"x"),H=Plotly.Axes.getFromId(K,F.yaxis||"y"),J=Plotly.Axes.convertOne(F,"x",C),I=Plotly.Axes.convertOne(F,"y",H),G=Math.min(J.length,I.length);C._minDtick=0;H._minDtick=0;if(J.length>G){J.splice(G,J.length-G)}if(I.length>G){I.splice(G,I.length-G)}var B={padded:true},L={padded:true};if(F.mode&&F.mode.indexOf("markers")!=-1){var D=F.marker?F.marker.size:0;markerTrans=function(M){return(M||6)/1.6};B.ppad=L.ppad=$.isArray(D)?D.map(markerTrans):markerTrans(D)}if(F.fill=="tozerox"||(F.fill=="tonextx"&&K.firstscatter)){B.tozero=true}else{if((!F.error_y||!F.error_y.visible)&&(["tonexty","tozeroy"].indexOf(F.fill)!=-1||(F.mode&&F.mode.indexOf("markers")==-1&&F.mode.indexOf("text")==-1)||(!F.mode&&G>=A.PTS_LINESONLY))){B.padded=false;B.ppad=0}}if(F.fill=="tozeroy"||(F.fill=="tonexty"&&K.firstscatter)){L.tozero=true}else{if(["tonextx","tozerox"].indexOf(F.fill)!=-1){L.padded=false}}Plotly.Axes.expand(C,J,B);Plotly.Axes.expand(H,I,L);for(i=0;i<G;i++){E.push(($.isNumeric(J[i])&&$.isNumeric(I[i]))?{x:J[i],y:I[i]}:{x:false,y:false})}K.firstscatter=false;return E};A.plot=function(J,I,K){var B=I.x,H=I.y;var E=I.plot.selectAll("g.trace.scatter").data(K);E.enter().append("g").attr("class","trace scatter").style("stroke-miterlimit",2);var C="",F,D,G;E.each(function(O){var X=O[0].t;if(X.visible===false){return }var N=-1,P=d3.select(this),V="";F=(X.fill.substr(0,6)=="tozero"||(X.fill.substr(0,2)=="to"&&!C))?P.append("polyline").classed("fill",true).attr("data-curve",X.cdcurve):null;if(G){D=G.attr("data-curve",X.cdcurve)}G=P.append("polyline").classed("fill",true).attr("data-curve",0);var M,W,L,U;M=W=L=U=null;while(N<O.length){var Y="",T=false;for(N++;N<O.length;N++){var S=B.c2p(O[N].x),R=H.c2p(O[N].y);if(!$.isNumeric(S)||!$.isNumeric(R)){break}if(Y){T=true}Y+=S+","+R+" ";if(!$.isNumeric(M)){M=S;W=R}L=S;U=R}if(Y){V+=Y;if(X.mode.indexOf("lines")!=-1&&T){P.append("polyline").classed("line",true).attr("points",Y)}}}if(V){if(F){if(X.fill.charAt(X.fill.length-1)=="y"){W=U=H.c2p(0,true)}else{M=L=B.c2p(0,true)}F.attr("points",V+L+","+U+" "+M+","+W)}else{if(X.fill.substr(0,6)=="tonext"){var Q=V+C;if(Q.indexOf(",")!=Q.lastIndexOf(",")){D.attr("points",V+C)}}}C=V.split(" ").reverse().join(" ")}});$(J).find("polyline:not([points])").remove();E.append("g").attr("class","points").each(function(P){var N=P[0].t,O=d3.select(this),L=N.mode.indexOf("markers")!=-1,M=N.mode.indexOf("text")!=-1;if((!L&&!M)||N.visible===false){O.remove()}else{if(L){O.selectAll("path").data(Plotly.Lib.identity).enter().append("path").call(Plotly.Drawing.translatePoints,B,H)}if(M){O.selectAll("text").data(Plotly.Lib.identity).enter().append("text").call(Plotly.Drawing.translatePoints,B,H)}}})}}());(function(){var A=window.Plotly.Bars={};A.calc=function(J,D){if(D.visible===false){return }var B=Plotly.Axes.getFromId(J,D.xaxis||"x"),G=Plotly.Axes.getFromId(J,D.yaxis||"y"),H,L,K,I,F;if(D.bardir=="h"){K=G;I=B}else{K=B;I=G}L=Plotly.Axes.convertOne(D,"y",I);H=Plotly.Axes.convertOne(D,"x",K);var E=Math.min(H.length,L.length),C=[];for(F=0;F<E;F++){if(($.isNumeric(H[F])&&$.isNumeric(L[F]))){C.push({p:H[F],s:L[F],b:0})}}return C};A.setPositions=function(F,C){var G=F.layout,H=C.x,B=C.y,E,D;["v","h"].forEach(function(K){var J=[],S,R,P;F.calcdata.forEach(function(Y,X){var W=Y[0].t;if(W.visible!==false&&Plotly.Plots.isBar(W.type)&&(W.bardir||"v")==K&&(W.xaxis||"x")==H._id&&(W.yaxis||"y")==B._id){J.push(X)}});if(!J.length){return }if(K=="v"){R=B;S=H}else{R=H;S=B}function V(b){var c=[];b.forEach(function(e){F.calcdata[e].forEach(function(f){c.push(f.p)})});var a=Plotly.Lib.distinctVals(c),X=a.vals,W=a.minDiff;Plotly.Axes.minDtick(S,W,X[0],G.barmode=="group");Plotly.Axes.expand(S,X,{vpad:W/2});W*=(1-G.bargap);if(G.barmode=="group"){W/=J.length}for(var Z=0;Z<b.length;Z++){var Y=F.calcdata[b[Z]][0].t;Y.barwidth=W*(1-G.bargroupgap);Y.poffset=(((G.barmode=="group")?(2*Z+1-b.length)*W:0)-Y.barwidth)/2;Y.dbar=a.minDiff}}if(G.barmode=="overlay"){J.forEach(function(W){V([W])})}else{V(J)}if(G.barmode=="stack"){var Q=R.l2c(R.c2l(0)),M=Q,O={},U=0,L=F.calcdata[J[0]][0].t.barwidth/100,T=0;for(E=0;E<J.length;E++){var I=F.calcdata[J[E]];for(D=0;D<I.length;D++){T=Math.round(I[D].p/L);I[D].b=(O[T]||0);U=I[D].b+I[D].s;O[T]=U;if($.isNumeric(R.c2l(U))){Q=Math.max(Q,U);M=Math.min(M,U)}}}Plotly.Axes.expand(R,[M,Q],{tozero:true,padded:true})}else{var N=function(W){return W.s};for(E=0;E<J.length;E++){Plotly.Axes.expand(R,F.calcdata[J[E]].map(N),{tozero:true,padded:true})}}})};A.plot=function(F,D,E){var G=D.x,C=D.y;var B=D.plot.selectAll("g.trace.bars").data(E).enter().append("g").attr("class","trace bars");B.append("g").attr("class","points").each(function(I){var H=I[0].t;d3.select(this).selectAll("rect").data(Plotly.Lib.identity).enter().append("rect").each(function(N){var K,J,M,L;if(H.bardir=="h"){M=C.c2p(H.poffset+N.p);L=C.c2p(H.poffset+N.p+H.barwidth);K=G.c2p(N.b,true);J=G.c2p(N.s+N.b,true)}else{K=G.c2p(H.poffset+N.p);J=G.c2p(H.poffset+N.p+H.barwidth);L=C.c2p(N.s+N.b,true);M=C.c2p(N.b,true)}if(!$.isNumeric(K)||!$.isNumeric(J)||!$.isNumeric(M)||!$.isNumeric(L)){d3.select(this).remove();return }d3.select(this).attr("transform","translate("+Math.min(K,J)+","+Math.min(M,L)+")").attr("width",Math.abs(J-K)+0.001).attr("height",Math.abs(L-M)+0.001)})})}}());(function(){var A=window.Plotly.Boxes={};A.calc=function(M,I){if(!("y" in I)||I.visible===false){return }var C=Plotly.Axes.getFromId(M,I.xaxis||"x"),J=Plotly.Axes.getFromId(M,I.yaxis||"y"),K=Plotly.Axes.convertOne(I,"y",J),L;if("x" in I){L=Plotly.Axes.convertOne(I,"x",C)}else{var E;if("x0" in I){E=I.x0}else{if("name" in I&&(C.type=="category"||($.isNumeric(I.name)&&["linear","log"].indexOf(C.type)!=-1)||(Plotly.Lib.isDateTime(I.name)&&C.type=="date"))){E=I.name}else{E=M.numboxes}}E=Plotly.Axes.convertToNums(E,C);L=K.map(function(){return E})}var D=Plotly.Lib.distinctVals(L),H=D.vals,P=D.minDiff/2,F=H.map(function(Q){return{x:Q}}),O=H.map(function(){return[]}),N=H.map(function(Q){return Q-P}),G=H.length;N.push(H[G-1]+P);Plotly.Axes.expand(J,K,{padded:true});K.forEach(function(Q,R){if(!$.isNumeric(Q)){return }var S=Plotly.Lib.findBin(L[R],N);if(S>=0&&S<G){O[S].push(Q)}});O.forEach(function(Q,R){Q.sort(function(V,U){return V-U});var S=Q.length-1,T=F[R];T.y=Q;T.min=Q[0];T.max=Q[S];T.mean=Plotly.Lib.mean(Q,S+1);T.sd=Plotly.Lib.stdev(Q,S+1,T.mean);T.q1=B(Q,(S/4));T.med=B(Q,(S/2));T.q3=B(Q,(0.75*S));T.lf=Math.min(T.q1,Q[Plotly.Lib.findBin(2.5*T.q1-1.5*T.q3,Q,true)+1]);T.uf=Math.max(T.q3,Q[Plotly.Lib.findBin(2.5*T.q3-1.5*T.q1,Q)]);T.lo=4*T.q1-3*T.q3;T.uo=4*T.q3-3*T.q1});F[0].t={boxnum:M.numboxes,dx:P};M.numboxes++;return F};A.setPositions=function(J,I){var D=I.x,H=I.y,E=[],K=0,M=0;J.calcdata.forEach(function(P,O){var N=P[0].t;if(N.visible!==false&&N.type=="box"&&(N.xaxis||"x")==D._id&&(N.yaxis||"y")==H._id){E.push(O);if(N.boxpts!==false){K=Math.max(K,N.jitter-N.ptpos-1);M=Math.max(M,N.jitter+N.ptpos-1)}}});var F=[];E.forEach(function(N){J.calcdata[N].forEach(function(O){F.push(O.x)})});if(F.length){var G=Plotly.Lib.distinctVals(F),L=G.minDiff/2;if(F.length==G.vals.length){J.numboxes=1}Plotly.Axes.minDtick(D,G.minDiff,G.vals[0],true);E.forEach(function(N){J.calcdata[N][0].t.dx=L});var C=(1-J.layout.boxgap)*(1-J.layout.boxgroupgap)*L/J.numboxes;Plotly.Axes.expand(D,G.vals,{vpadminus:L+K*C,vpadplus:L+M*C})}};A.plot=function(G,E,F){var H=G.layout,I=E.x,D=E.y;var C=E.plot.selectAll("g.trace.boxes").data(F).enter().append("g").attr("class","trace boxes");C.each(function(N){var J=N[0].t,L=(H.boxmode=="group"&&G.numboxes>1),K=J.dx*(1-H.boxgap)*(1-H.boxgroupgap)/(L?G.numboxes:1),M=L?2*J.dx*(-0.5+(J.boxnum+0.5)/G.numboxes)*(1-H.boxgap):0,O=K*J.ww;if(J.visible===false){d3.select(this).remove();return }J.bx=M;J.bdx=K;d3.select(this).selectAll("path.box").data(Plotly.Lib.identity).enter().append("path").attr("class","box").each(function(W){var Z=I.c2p(W.x+M,true),R=I.c2p(W.x+M-K,true),P=I.c2p(W.x+M+K,true),V=I.c2p(W.x+M-O,true),U=I.c2p(W.x+M+O,true),S=D.c2p(W.med,true),Y=D.c2p(W.q1,true),X=D.c2p(W.q3,true),T=D.c2p(J.boxpts===false?W.min:W.lf,true),Q=D.c2p(J.boxpts===false?W.max:W.uf,true);d3.select(this).attr("d","M"+R+","+S+"H"+P+"M"+R+","+Y+"H"+P+"V"+X+"H"+R+"ZM"+Z+","+Y+"V"+T+"M"+Z+","+X+"V"+Q+((J.ww===0)?"":"M"+V+","+T+"H"+U+"M"+V+","+Q+"H"+U))});if(J.boxpts!==false){d3.select(this).selectAll("g.points").data(function(P){P.forEach(function(Q){Q.t=J});return P}).enter().append("g").attr("class","points").selectAll("path").data(function(Q){var P=(J.boxpts=="all")?Q.y:Q.y.filter(function(R){return(R<Q.lf||R>Q.uf)});return P.map(function(R){var S=(J.jitter?J.jitter*(Math.random()-0.5)*2:0)+J.ptpos,T={x:Q.x+S*K+M,y:R,t:J};if(J.boxpts!="all"&&R<Q.uo&&R>Q.lo){T.so=true}return T})}).enter().append("path").call(Plotly.Drawing.translatePoints,I,D)}if(J.mean){d3.select(this).selectAll("path.mean").data(Plotly.Lib.identity).enter().append("path").attr("class","mean").style("fill","none").each(function(V){var U=I.c2p(V.x+M,true),T=I.c2p(V.x+M-K,true),R=I.c2p(V.x+M+K,true),Q=D.c2p(V.mean,true),P=D.c2p(V.mean-V.sd,true),S=D.c2p(V.mean+V.sd,true);d3.select(this).attr("d","M"+T+","+Q+"H"+R+((J.mean!="sd")?"":"m0,0L"+U+","+P+"L"+T+","+Q+"L"+U+","+S+"Z"))})}})};A.style=function(C){C.each(function(E){var D=E[0].t;d3.select(this).selectAll("path.box").attr("stroke-width",D.lw).call(Plotly.Drawing.strokeColor,D.lc).call(Plotly.Drawing.fillColor,D.fc);d3.select(this).selectAll("path.mean").attr("stroke-width",D.lw).attr("stroke-dasharray",(2*D.lw)+","+(D.lw)).call(Plotly.Drawing.strokeColor,D.lc)})};function B(C,E){if(E<0){return C[0]}if(E>C.length-1){return C[C.length-1]}var D=E%1;return D*C[Math.ceil(E)]+(1-D)*C[Math.floor(E)]}}());(function(){var F=window.Plotly.Heatmap={};MAX_PX_PER_BRICK=0;F.calc=function(o,l){if(l.visible===false){return }Plotly.Lib.markTime("start convert x&y");var c=Plotly.Axes.getFromId(o,l.xaxis||"x"),G=Plotly.Axes.getFromId(o,l.yaxis||"y"),Q=l.x?Plotly.Axes.convertOne(l,"x",c):[],f,T,O=l.y?Plotly.Axes.convertOne(l,"y",G):[],H,R,N=l.z,a;c._minDtick=0;G._minDtick=0;Plotly.Lib.markTime("done convert x&y");if(l.type=="histogram2d"){var U=Math.min(Q.length,O.length);if(Q.length>U){Q.splice(U,Q.length-U)}if(O.length>U){O.splice(U,O.length-U)}Plotly.Lib.markTime("done convert data");if(l.autobinx||!("xbins" in l)){l.xbins=Plotly.Axes.autoBin(Q,c,l.nbinsx,"2d")}if(l.autobiny||!("ybins" in l)){l.ybins=Plotly.Axes.autoBin(O,G,l.nbinsy,"2d")}Plotly.Lib.markTime("done autoBin");N=[];var b=[],Z=(typeof (l.xbins.size)=="string")?[]:l.xbins,L=(typeof (l.xbins.size)=="string")?[]:l.ybins,I=l.histnorm||"";for(a=l.xbins.start;a<l.xbins.end;a=Plotly.Axes.tickIncrement(a,l.xbins.size)){b.push(0);if($.isArray(Z)){Z.push(a)}}if($.isArray(Z)){Z.push(a)}var k=b.length;f=l.xbins.start;T=(a-f)/k;f+=T/2;var J=b.map(function(m,q){if(I.indexOf("density")==-1){return 1}else{if($.isArray(Z)){return 1/(Z[q+1]-Z[q])}else{return 1/T}}});for(a=l.ybins.start;a<l.ybins.end;a=Plotly.Axes.tickIncrement(a,l.ybins.size)){N.push(b.concat());if($.isArray(L)){L.push(a)}}if($.isArray(L)){L.push(a)}var h=N.length;H=l.ybins.start;R=(a-H)/h;H+=R/2;var P=N.map(function(m,q){if(I.indexOf("density")==-1){return 1}else{if($.isArray(L)){return 1/(L[q+1]-L[q])}else{return 1/R}}});Plotly.Lib.markTime("done making bins");var K=0;for(a=0;a<U;a++){var X=Plotly.Lib.findBin(Q[a],Z),Y=Plotly.Lib.findBin(O[a],L);if(X>=0&&X<k&&Y>=0&&Y<h){N[Y][X]+=J[X]*P[Y];K++}}if(I.indexOf("percent")!=-1){K/=100}if(I.indexOf("probability")!=-1||I.indexOf("percent")!=-1){N.forEach(function(m){m.forEach(function(q,r){m[r]/=K})})}Plotly.Lib.markTime("done binning")}else{f=l.x0||0;T=l.dx||1;H=l.y0||0;R=l.dy||1}if([true,"fast"].indexOf(l.zsmooth)!=-1){if(c.type=="log"||G.type=="log"){l.zsmooth=false;Plotly.Lib.notifier("cannot fast-zsmooth: log axis found")}else{if(l.type!="histogram2d"){if(Q.length){var j=(Q[Q.length-1]-Q[0])/(Q.length-1),W=Math.abs(j/100);for(a=0;a<Q.length-1;a++){if(Math.abs(Q[a+1]-Q[a]-j)>W){l.zsmooth=false;Plotly.Lib.notifier("cannot fast-zsmooth: x scale is not linear");break}}}if(O.length){var g=(O[O.length-1]-O[0])/(O.length-1),V=Math.abs(g/100);for(a=0;a<O.length-1;a++){if(Math.abs(O[a+1]-O[a]-g)>V){l.zsmooth=false;Plotly.Lib.notifier("cannot fast-zsmooth: y scale is not linear");break}}}}}}if(l.zauto!==false||!("zmin" in l)){l.zmin=A(N)}if(l.zauto!==false||!("zmax" in l)){l.zmax=E(N)}if(l.zmin==l.zmax){l.zmin-=0.5;l.zmax+=0.5}var e=l.xtype=="scaled"?"":l.x,M=B(l.type,e,f,T,N[0].length,o.layout.xaxis),p=l.ytype=="scaled"?"":l.y,S=B(l.type,p,H,R,N.length,o.layout.yaxis);Plotly.Axes.expand(c,M);Plotly.Axes.expand(G,S);return[{x:M,y:S,z:N}]};function B(N,O,L,P,M,G){var I=[],Q,H,J;if($.isArray(O)&&(N!="histogram2d")&&(G.type!="category")){O=Plotly.Axes.convertToNums(O,G);var K=O.length;if(K==M){if(M==1){return[O[0]-0.5,O[0]+0.5]}else{I=[1.5*O[0]-0.5*O[1]];for(J=1;J<K;J++){I.push((O[J-1]+O[J])*0.5)}I.push(1.5*O[K-1]-0.5*O[K-2])}}else{return O.slice(0,M+1)}}else{H=P||1;if(L===undefined){Q=0}else{if(N=="histogram2d"||G.type=="category"){Q=L}else{Q=Plotly.Axes.convertToNums(L,G)}}for(J=0;J<=M;J++){I.push(Q+H*(J-0.5))}}return I}F.plot=function(Y,o,q){Plotly.Lib.markTime("in Heatmap.plot");var AI=q[0].t,AW=AI.curve,AO=o.x,l=o.y,R=Y.layout;var AC=q[0].z,Ad=AI.zmin,h=AI.zmax,Q=C(q),AF=q[0].x,AD=q[0].y;var w="hm"+AW;var AN="cb"+AW;var J=[true,"fast"].indexOf(AI.zsmooth)!=-1;var AS=AC.length,AR=AC[0].length;var AT=false,L,AM,N;AW=0;while(L===undefined&&AW<AR){L=AO.c2p(AF[AW]);AW++}AW=AR;while(AM===undefined&&AW>0){AM=AO.c2p(AF[AW]);AW--}if(AM<L){N=AM;AM=L;L=N;AT=true}var T=false,M,H;AW=0;while(M===undefined&&AW<AR){M=l.c2p(AD[AW]);AW++}AW=AS;while(H===undefined&&AW>0){H=l.c2p(AD[AW]);AW--}if(H<M){N=M;M=H;H=N;T=true}if(!J){var Ae=AI.zsmooth=="best"?0:0.5;L=Math.max(-Ae*AO._length,L);AM=Math.min((1+Ae)*AO._length,AM);M=Math.max(-Ae*l._length,M);H=Math.min((1+Ae)*l._length,H)}var K=Math.round(AM-L);var AQ=Math.round(H-M),I=AQ/(H-M);if(K<=0||AQ<=0){return }var AP=J?new PNGlib(AR,AS,256):new PNGlib(K,AQ,256);var Ab=Q.map(function(c){return c[0]*255}),AK=Q.map(function(c){return c[1]});s=d3.scale.linear().domain(Ab).interpolate(d3.interpolateRgb).range(AK);var W,O;if(J){W=AT?function(c){return AR-1-c}:Plotly.Lib.identity;O=T?function(c){return AS-1-c}:Plotly.Lib.identity}else{W=function(c){return Plotly.Lib.constrain(Math.round(AO.c2p(AF[c])-L),0,K)};O=function(c){return Plotly.Lib.constrain(Math.round(l.c2p(AD[c])-M),0,AQ)}}function AU(j,x){var m=x.length-2,y=Plotly.Lib.constrain(Plotly.Lib.findBin(j,x),0,m),r=x[y],p=x[y+1],t=Plotly.Lib.constrain(y+(j-r)/(p-r)-0.5,0,m),v=Math.round(t),c=Math.abs(t-v);if(!t||t==m||!c){return{bin0:v,bin1:v,frac:0}}return{bin0:v,frac:c,bin1:Math.round(v+c/(t-v))}}var AJ={};AJ[256]=AP.color(0,0,0,0);function f(p,m){if($.isNumeric(p)){var j=Plotly.Lib.constrain(Math.round((p-Ad)*254/(h-Ad)),0,254);r=s(j);AG+=m;if(!AJ[j]){var r=s(j);AJ[j]=[tinycolor(r).toHsl().l,AP.color("0x"+r.substr(1,2),"0x"+r.substr(3,2),"0x"+r.substr(5,2))]}AL+=m*AJ[j][0];return AJ[j][1]}else{return AJ[256]}}Plotly.Lib.markTime("done init png");var e=O(0),k=[e,e];var AV,AE,Ac,b,AH,X;var G=AT?0:1,AY=T?0:1;var AG=0,AL=0;if(AI.zsmooth=="best"){var g=AF.map(function(c){return Math.round(AO.c2p(c)-L)}),AX=AD.map(function(c){return Math.round(l.c2p(c)-M)});var u=[],P=[];for(AW=0;AW<K;AW++){u.push(AU(AW,g))}for(AV=0;AV<AQ;AV++){P.push(AU(AV,AX))}var Aa,AZ,V,U,AB,a,AA,Z;for(AV=0;AV<AQ;AV++){AZ=P[AV];V=AC[AZ.bin0];U=AC[AZ.bin1];if(!V||!U){console.log(AV,AZ,AC)}for(AW=0;AW<K;AW++){Aa=u[AW];AB=V[Aa.bin0];if(!$.isNumeric(AB)){b=f(null,1)}else{AA=V[Aa.bin1];a=U[Aa.bin0];Z=U[Aa.bin1];if(!$.isNumeric(AA)){AA=AB}if(!$.isNumeric(a)){a=AB}if(!$.isNumeric(Z)){Z=AB}b=f(AB+Aa.frac*(AA-AB)+AZ.frac*((a-AB)+Aa.frac*(AB+Z-AA-a)))}AP.buffer[AP.index(AW,AV)]=b}}}else{if(J){for(AV=0;AV<AS;AV++){X=AC[AV];k=O(AV);for(AW=0;AW<AR;AW++){AP.buffer[AP.index(W(AW),k)]=f(X[AW],1)}}}else{for(AV=0;AV<AS;AV++){X=AC[AV];k.reverse();k[AY]=O(AV+1);if(k[0]==k[1]||k[0]===undefined||k[1]===undefined){continue}AE=W(0);xb=[AE,AE];for(AW=0;AW<AR;AW++){xb.reverse();xb[G]=W(AW+1);if(xb[0]==xb[1]||xb[0]===undefined||xb[1]===undefined){continue}AH=X[AW];b=f(AH,(xb[1]-xb[0])*(k[1]-k[0]));for(AE=xb[0];AE<xb[1];AE++){for(e=k[0];e<k[1];e++){AP.buffer[AP.index(AE,e)]=b}}}}}}Plotly.Lib.markTime("done filling png");Y.hmpixcount=(Y.hmpixcount||0)+AG;Y.hmlumcount=(Y.hmlumcount||0)+AL;var S="data:image/png;base64,\n"+AP.getBase64();R._paper.selectAll("."+w).remove();o.plot.append("svg:image").classed(w,true).attr("xmlns","http://www.w3.org/2000/svg").attr("xlink:xlink:href",S).attr("height",AQ).attr("width",K).attr("x",L).attr("y",M).attr("preserveAspectRatio","none");Plotly.Lib.markTime("done showing png");R._infolayer.selectAll("."+AN).remove();if(AI.showscale!==false){D(Y,q,AN,Q)}Plotly.Lib.markTime("done colorbar")};F.margin=function(G){var I=G.layout;if(G.data&&G.data.length&&I.margin.r<200){for(var H in G.data){if(Plotly.Plots.isHeatmap(G.data[H].type)&&(G.data[H].showscale!==false)){I.margin.r=200;return true}}}return false};function E(G){return Plotly.Lib.aggNums(Math.max,null,G.map(function(H){return Plotly.Lib.aggNums(Math.max,null,H)}))}function A(G){return Plotly.Lib.aggNums(Math.min,null,G.map(function(H){return Plotly.Lib.aggNums(Math.min,null,H)}))}function D(Q,I,N,R){if(Q.layout.margin.r<200){console.log("warning: called relayout from insert_colorbar");Plotly.relayout(Q,"margin.r",200)}var K=I[0].t.zmin,P=I[0].t.zmax,O=R.map(function(S){return K+S[0]*(P-K)}),G=R.map(function(S){return S[1]});$(Q).find("."+N).remove();var H=d3.format("3e");if(Math.max(Math.abs(K),Math.abs(P))<10000){if(Math.abs(P-K)>5){H=d3.format(".0f")}else{if(Math.abs(P-K)>0.01){H=d3.format(".2g")}}}var L=Q.layout,M=L._infolayer.append("g").classed(N,true).attr("transform","translate("+(L.width-L.margin.r+50)+","+(L.margin.t)+")").classed("colorbar",true).classed("crisp",true).call(Plotly.Drawing.font,L.font.family||"Arial",L.font.size||12,L.font.color||"#000"),J=colorBar(L).color(d3.scale.linear().domain(O).range(G)).size(L.height-L.margin.t-L.margin.b).lineWidth(30).tickFormat(H).precision(2);M.call(J);M.selectAll(".axis line, .axis .domain").style("fill","none").style("stroke","none")}function C(I){var G=I[0].t.scl;if(!G){return Plotly.defaultColorscale}else{if(typeof G=="string"){try{G=Plotly.colorscales[G]||JSON.parse(G)}catch(H){return Plotly.defaultColorscale}}}if(typeof G=="string"){try{G=Plotly.colorscales[G]||JSON.parse(G)}catch(H){return Plotly.defaultColorscale}}return G}}());function colorBar(E){var D="right",G=40,I=300,A=d3.format("3e"),B=d3.scale.linear().domain([0,0.5,1]).range(["blue","green","red"]),K=d3.svg.line().interpolate("basis"),F=8,J,C=0;function H(L){L.each(function(q,T){var Y=d3.select(this),c=C||G,e,f=J||(((D=="left")||(D=="right"))?[[0,I],[0,0]]:[[I,0],[0,0]]),V=W(g(K(f),F)),b=(f)?e:I,O=B.copy().interpolate(d3.interpolate).domain(d3.extent(B.domain())).range([b,0]),X=d3.extent(B.domain()),Z=B.copy().domain(B.domain().map(function(a){return(a-X[0])/(X[1]-X[0])})),l=this.__lineWidth__||G;oldQuads=this.__quads__||V;this.__quads__=V;this.__lineWidth__=G;var k=Y.selectAll("path.c").data(d3.range(V.length),function(a){return a}),N=k.enter().insert("path","g.axis").classed("c",true).classed("crisp",true),U=d3.transition(k.exit()).remove(),r=d3.transition(k),R=function(a,t,u){a.style("fill",function(v){return Z(t(v).t)}).style("opacity",1).style("fill-opacity",1).style("stroke",function(v){return Z(t(v).t)}).attr("d",function(w){var v=t(w);return S(v[0],v[1],v[2],v[3],u)})};N.call(R,function(a){return oldQuads[oldQuads.length-1]},l);U.call(R,function(a){return V[V.length-1]},G);r.call(R,function(a){return V[a]},G);var Q=d3.svg.axis().scale(O).orient(D).tickSize(c).tickFormat(A),o=Y.selectAll("g.axis").data(function(a){return(O)?[1]:[]}),m=o.enter().append("g").classed("axis",true),j=d3.transition(o.exit()).remove(),M=d3.transition(o).call(Q),h=function(a,t){a.attr("transform","translate("+(((D=="right")||(D=="left"))?-t/2:0)+","+(((D=="right")||(D=="left"))?0:t/2)+")")};m.call(h,l);j.call(h,G);M.call(h,G);function g(y,x){var w=document.createElementNS(d3.ns.prefix.svg,"path");w.setAttribute("d",y);e=w.getTotalLength();var u=[0],a=0,v=x;while((a+=v)<e){u.push(a)}u.push(e);return u.map(function(AA){var AB=w.getPointAtLength(AA),z=[AB.x,AB.y];z.t=AA/e;return z})}function W(a){return d3.range(a.length-1).map(function(u){var t=[a[u-1],a[u],a[u+1],a[u+2]];t.t=(a[u].t+a[u+1].t)/2;return t})}function S(AG,AF,AE,AD,u){var v=p(AF,AE),t=u/2,AB=[AF[0]+v[0]*t,AF[1]+v[1]*t],AA=[AE[0]+v[0]*t,AE[1]+v[1]*t],z=[AE[0]-v[0]*t,AE[1]-v[1]*t],y=[AF[0]-v[0]*t,AF[1]-v[1]*t],x;if(AG){var w=p(AG,AF);x=[AF[0]+w[0]+v[0],AF[1]+w[1]+v[1]];AB=P(AF,x,AB,AA);y=P(AF,x,y,z)}if(AD){var AC=p(AE,AD);x=[AE[0]+AC[0]+v[0],AE[1]+AC[1]+v[1]];AA=P(AE,x,AB,AA);z=P(AE,x,y,z)}AB=fixArray(AB);AA=fixArray(AA);z=fixArray(z);y=fixArray(y);return"M"+AB+"L"+AA+" "+z+" "+y+"Z"}function P(AD,AA,z,x){var v=z[0],t=AD[0],w=x[0]-v,AE=AA[0]-t,AC=z[1],y=AD[1],AB=x[1]-AC,AF=AA[1]-y,u=(AE*(AC-y)-AF*(v-t))/(AF*w-AE*AB);return[v+u*w,AC+u*AB]}function p(w,v){var u=w[1]-v[1],t=v[0]-w[0],a=Math.sqrt(u*u+t*t);return[u/a,t/a]}})}H.orient=function(L){if(!arguments.length){return D}D=L;return H};H.lineWidth=function(L){if(!arguments.length){return G}G=L;return H};H.size=function(L){if(!arguments.length){return I}I=L;return H};H.tickFormat=function(L){if(!arguments.length){return A}A=L;return H};H.tickSize=function(L){if(!arguments.length){return C}C=L;return H};H.color=function(L){if(!arguments.length){return B}B=L;return H};H.precision=function(L){if(!arguments.length){return F}F=L;return H};H.points=function(L){if(!arguments.length){return J}J=L;return H};H.line=function(L){if(!arguments.length){return K}K=L;return H};return H}function fixArray(A){return([Number((A[0]).toFixed(4)),Number((A[1]).toFixed(4))])}(function(){var C=window.Plotly.ErrorBars={};C.pushRef2GDC=function(O,J,M,G){var P=false,H,L,K,F,I;if(M==="error_y.type"){if(J==="various"){P=true;J=0}H=O.calcdata[Number(J)];L=Number(H[0].t.ye_tref)}else{if(M==="error_y.traceref"){if(J==="various"){P=true}L=Number(G)}}if(!P){K=O.data[Number(J)];F=O.data[L];K.error_y.array=F.y}else{I=O.data;for(var N=0;N<I.length;N++){F=O.data[L];I[N].error_y.array=F.y}}};C.styleBoxDrop=function(M,G,W,F,S,J,R,O){var K=(F[0][0]===undefined)?K==F[0].t:F[0][0].t,U=false;if(!S){S=F;U=true}var P=$(dropdown("select-"+G,W)).appendTo(M).get(0),T=d3.select(P),H=$(M).parents(".popover"),N={ye_tkns:"error_y.thickness",ye_w:"error_y.width",ye_tref:"error_y.traceref"};var L=T.select("ul").selectAll("li").data(S).enter().append("li").append("a").on("click",function(a,X){var Z=$(this).parents(".btn-group");Z.find(".selected-val").html(Z.find("li")[X].innerHTML);var Y=J||H[0].applyChange;Y({popover:H,astr:N[G],val:a[0].t[G],d:a,i:X})});if(O){var V=40,I=20;L.append("svg").attr("width",V).attr("height",I).style("position","relative").style("top","2px").append("g").attr("transform","translate(0,"+I/2+")").each(function(Z,X){var Y=(Z[0].t.ye_clr==="various"?"#000":Z[0].t.ye_clr);d3.select(this).append("polyline").attr("points","5,0 35,0").attr(R,Z[0].t[G]).attr("stroke",Y)})}L.append("span").html(function(X){return X[0].t.name+"&nbsp;"});if(!U){for(var Q=0;Q<S.length&&S[Q][0].t[G]!=F[0].t[G];Q++){Q=Q%S.length}if(Q===S.length){$(P).find(".btn-group .selected-val").html("Various")}else{$(P).find(".btn-group .selected-val").html($(T.node()).find("li")[Q].innerHTML)}}};function B(F){if(Plotly.Plots.isBar(F)){return function(G){return G.s+G.b}}else{return function(G){return G.y}}}function D(F){if(Plotly.Plots.isBar(F)){return function(G){return G.p}}else{return function(G){return G.x}}}C.ydr=function(S,P){var H=S.data,G=S.calcdata,Q=[];if(!H||!H.length||["linear","log"].indexOf(P.type)==-1){return }for(var L=0;L<G.length;L++){var T=G[L][0].t;if((T.yaxis||"y")!=P._id||!T.ye_vis||(Plotly.Plots.isBar(T.type)&&T.bardir=="h")){continue}var O=T.ye_type,F=Plotly.Axes.getFromId(S,T.xaxis||"x");var R=B(T.type),K=D(T.type);for(var J=0;J<G[L].length;J++){var I=R(G[L][J]),N=K(G[L][J]);if($.isNumeric(P.c2l(I))&&$.isNumeric(F.c2l(N))){var M=E(O,I,S,T,J);if($.isNumeric(M)){Q.push(I-M,I+M)}}}}return Q};C.plot=function(G,F,I){F.plot.selectAll("g.errorbars").remove();var H;F.plot.selectAll("g.errorbars").data(I).enter().append("g").attr("class","errorbars").each(function(L){var J=L[0].t;if(!J.ye_vis||(Plotly.Plots.isBar(J.type)&&J.bardir=="h")){return }var K=J.ye_type;d3.select(this).selectAll("g").data(function(M){return M}).enter().append("g").each(function(M,O){H=A(M,G,F,K,J,O);if(!$.isNumeric(H.x)||!$.isNumeric(H.yh)||!$.isNumeric(H.ys)){return }var N=d3.select(this);N.append("line").attr("x1",H.x).attr("x2",H.x).attr("y1",H.yh).attr("y2",H.ys);N.append("line").attr("x1",H.x-J.ye_w).attr("x2",H.x+J.ye_w).attr("y1",H.yh).attr("y2",H.yh);if(H.shoes){N.append("line").attr("x1",H.x-J.ye_w).attr("x2",H.x+J.ye_w).attr("y1",H.ys).attr("y2",H.ys)}})})};C.style=function(F){F.attr("stroke",function(G){return G[0].t.ye_clr}).style("opacity",function(G){return G[0].t.ye_op}).each(function(G){d3.select(this).selectAll("g line").attr("stroke-width",G[0].t.ye_tkns)})};function E(H,L,I,F,G){try{var K=Number(H=="data"?I.data[F.curve].error_y.array[G]:F.ye_val);if(H==="percent"){return Math.abs(L*K/100)}else{if(H==="constant"||H==="data"){return Math.abs(K)}else{if(H==="sqrt"){return Math.sqrt(L)}}}console.log("unrecognized errorbar type",H,K,L)}catch(J){console.log(J)}}function A(K,O,N,L,S,R){var F=N.x,M=N.y,G=B(S.type)(K),I=F.c2p(Plotly.Plots.isBar(S.type)?K.p+S.poffset+S.barwidth/2:K.x),P=true;var J=E(L,G,O,S,R),H=M.c2p(G+J),Q=M.c2p(G-J);if(!$.isNumeric(Q)){P=false;Q=M.c2p(G-J,true)}return{x:I,yh:H,ys:Q,shoes:P}}}());(function(){var D=Plotly.Annotations={};D.drawAll=function(G){var E=G.layout.annotations;G.layout._infolayer.selectAll(".annotation").remove();if(E){for(var F in E){D.draw(G,F)}}};D.add=function(F){var E=F.layout.annotations||[];Plotly.relayout(F,"annotations["+E.length+"]","add")};D.draw=function(P,a,S,h){var N=P.layout,J=N._size,t=Plotly.Fx.MINDRAG,o;if(!N.annotations){N.annotations=[]}if(!$.isNumeric(a)||a==-1){if(!a&&$.isArray(h)){N.annotations=h;D.drawAll(P);return }else{if(h=="remove"){N.annotations=[];D.drawAll(P);return }else{if(S&&h!="add"){for(o=0;o<N.annotations.length;o++){D.draw(P,o,S,h)}return }else{a=N.annotations.length;N.annotations.push({})}}}}if(!S&&h){if(h=="remove"){N._infolayer.selectAll('.annotation[data-index="'+a+'"]').remove();N.annotations.splice(a,1);for(o=a;o<N.annotations.length;o++){N._infolayer.selectAll('.annotation[data-index="'+(o+1)+'"]').attr("data-index",String(o));D.draw(P,o)}return }else{if(h=="add"||$.isPlainObject(h)){N.annotations.splice(a,0,{});if($.isPlainObject(h)){Object.keys(h).forEach(function(u){N.annotations[a][u]=h[u]})}for(o=N.annotations.length-1;o>a;o--){N._infolayer.selectAll('.annotation[data-index="'+(o-1)+'"]').attr("data-index",String(o));D.draw(P,o)}}}}N._infolayer.selectAll('.annotation[data-index="'+a+'"]').remove();var K=N.annotations[a],X={x:K.xref||(K.ref=="paper"?"paper":"x"),y:K.yref||(K.ref=="paper"?"paper":"y")},V=$.extend({text:"new text",bordercolor:"",borderwidth:1,borderpad:1,bgcolor:"rgba(0,0,0,0)",xref:X.x,yref:X.y,showarrow:true,arrowwidth:0,arrowcolor:"",arrowhead:1,arrowsize:1,tag:"",font:{family:"",size:0,color:""},opacity:1,align:"center"},K);N.annotations[a]=V;if(typeof S=="string"&&S){Plotly.Lib.nestedProperty(V,S).set(h)}else{if($.isPlainObject(S)){Object.keys(S).forEach(function(u){Plotly.Lib.nestedProperty(V,u).set(S[u])})}}if(!V.text){V.text=V.showarrow?"&nbsp;":"new text"}var f=N._paperdiv.node().getBoundingClientRect(),Z={x:0,y:0};var E=N._infolayer.append("g").attr("class","annotation").attr("data-index",String(a)).attr("data-cmmt",V.tag).style("opacity",V.opacity);var g=E.append("svg").attr("data-cmmt",V.tag).call(Plotly.Drawing.setPosition,0,0);var R=V.borderwidth;var j=g.append("rect").attr("class","bg").call(Plotly.Drawing.strokeColor,V.bordercolor||"rgba(0,0,0,0)").attr("stroke-width",R).call(Plotly.Drawing.fillColor,V.bgcolor);var q=V.font.family||N.font.family||"Arial",Q=V.font.size||N.font.size||12,Y=V.font.color||N.font.color||"#000",p=1,M={left:"right",center:"center",right:"left"}[V.align];function l(){var v=V.borderpad+V.borderwidth;var u={horizontalAlign:M,verticalAlign:"top",horizontalMargin:v,verticalMargin:v,orientation:"inside"};this.style({"font-family":q,"font-size":Q,fill:Y,opacity:p}).call(d3.plugly.convertToTspans).call(d3.plugly.alignSVGWith(j,u))}var U=g.append("text").attr("class","annotation").attr("data-cmmt",V.tag).text(V.text).attr({"data-unformatted":V.text});if(P.mainsite){U.call(d3.plugly.makeEditable).call(l).on("edit",function(v){V.text=v;this.attr({"data-unformatted":V.text});this.call(l);var x={},w=Plotly.Axes.getFromId(P,V.xref),u=Plotly.Axes.getFromId(P,V.yref);x["annotations["+a+"].text"]=V.text;if(w&&w.autorange){x[w._name+".autorange"]=true}if(u&&u.autorange){x[u._name+".autorange"]=true}Plotly.relayout(P,x)})}else{U.call(l)}var F=U.node().getBoundingClientRect(),b=F.width,O=F.height;V._w=b;V._h=O;function L(u){return Plotly.Lib.constrain(Math.floor(u*3-1),-0.5,0.5)}var r=true;["x","y"].forEach(function(u){var x=Plotly.Axes.getFromId(P,V[u+"ref"]||u),AB=Plotly.Axes.getFromId(P,X[u]||u),AA="_"+u+"type",v=u=="x"?b:-O,z=(x||AB)?(x||AB).range[1]-(x||AB).range[0]:null,y=x?x.range[0]+(u=="x"?0.1:0.3)*z:(u=="x"?0.1:0.7);if(x&&x==AB&&V[AA]){B(V,x)}else{if($.isNumeric(V[u])&&x!==AB){if(x&&AB){V[u]=y}else{if(x){if(!x.domain){x.domain=[0,1]}var w=(V[u]-x.domain[0])/(x.domain[1]-x.domain[0]);V[u]=x.range[0]+z*w-(V.showarrow?0:L(w)*v/x._m)}else{if(AB){if(!AB.domain){AB.domain=[0,1]}V[u]=(AB.domain[0]+(AB.domain[1]-AB.domain[0])*(V[u]-AB.range[0])/z);if(!V.showarrow){V[u]+=L(V[u])*v/(z*x._m)}}}}}}if(!$.isNumeric(V[u])){V[u]=y}if(!x){Z[u]=(u=="x")?(J.l+(J.w)*V[u]):(J.t+(J.h)*(1-V[u]));if(!V.showarrow){Z[u]-=v*L(V[u])}}else{if((V[u]-x.range[0])*(V[u]-x.range[1])>0){r=false}Z[u]=x._offset+x.l2p(V[u])}V[AA]=x&&x.type});if(!r){g.remove();return }if(!V.ax){V.ax=-10}if(!V.ay){V.ay=-O/2-20}if(V.showarrow){var I=Plotly.Lib.constrain(Z.x,1,f.width-1),H=Plotly.Lib.constrain(Z.y,1,f.height-1);Z.x+=V.ax;Z.y+=V.ay}Z.x=Plotly.Lib.constrain(Z.x,1,f.width-1);Z.y=Plotly.Lib.constrain(Z.y,1,f.height-1);var k=Number(V.borderpad),m=k+R/2,c=R+k,G=Math.round(b+2*c),T=Math.round(O+2*c),e=f.top-F.top+c*2;g.call(Plotly.Drawing.setRect,Math.round(Z.x-G/2),Math.round(Z.y-T/2),G,T);j.call(Plotly.Drawing.setRect,R/2,R/2,G-R,T-R);U.attr({x:f.left-F.left+c,y:e}).selectAll("tspan.line").attr({y:e});var W=function(AE,AC){$(P).find('g.annotation[data-index="'+a+'"]>g').remove();var v=Z.x+AE,AB=Z.y+AC,x=true;var y=[j.node().getBoundingClientRect()],u=0;y.forEach(function(AK){var AH=AK.left-f.left-u,AJ=AK.top-f.top-u,AG=AK.right-f.left+u,AI=AK.bottom-f.top+u,AF=[[AH,AJ,AH,AI],[AH,AI,AG,AI],[AG,AI,AG,AJ],[AG,AJ,AH,AJ]];if(I>AH&&I<AG&&H>AJ&&H<AI){x=false;return }AF.forEach(function(AL){var AM=A(v,AB,I,H,AL[0],AL[1],AL[2],AL[3]);if(AM){v=AM.x;AB=AM.y}})});if(x){var AD=V.arrowwidth||R*2||2;var w=E.append("g").attr("data-cmmt",V.tag);var AA=w.append("path").attr("data-cmmt",V.tag).attr("d","M"+(v-1)+","+(AB-1)+"L"+I+","+H).attr("stroke-width",AD).call(Plotly.Drawing.strokeColor,V.arrowcolor||(Plotly.Drawing.opacity(V.bordercolor)?V.bordercolor:"")||"#000");C(AA,V.arrowhead,"end",V.arrowsize);var z=w.append("path").attr("class","annotation anndrag").attr("data-cmmt",V.tag).attr("data-index",String(a)).attr("d","M3,3H-3V-3H3ZM0,0L"+(v-I)+","+(AB-H)).attr("transform","translate("+I+","+H+")").attr("stroke-width",AD+6).call(Plotly.Drawing.strokeColor,"rgba(0,0,0,0)").call(Plotly.Drawing.fillColor,"rgba(0,0,0,0)");if(P.mainsite){z.node().onmousedown=function(AJ){if(Plotly.Fx.dragClear(P)){return true}var AI=this,AG=d3.select(this),AN=Number(g.attr("x")),AK=Number(g.attr("y")),AH={},AM="annotations["+a+"]",AF=Plotly.Axes.getFromId(P,V.xref),AL=Plotly.Axes.getFromId(P,V.yref);if(AF&&AF.autorange){AH[AF._name+".autorange"]=true}if(AL&&AL.autorange){AH[AL._name+".autorange"]=true}P.dragged=false;window.onmousemove=function(AQ){var AP=AQ.clientX-AJ.clientX,AO=AQ.clientY-AJ.clientY;if(Math.abs(AP)<t){AP=0}if(Math.abs(AO)<t){AO=0}if(AP||AO){P.dragged=true}w.attr("transform","translate("+AP+","+AO+")");g.call(Plotly.Drawing.setPosition,AN+AP,AK+AO);AH[AM+".x"]=V.xref=="paper"?((I+AP-J.l)/J.w):(V.x+AP/Plotly.Axes.getFromId(P,V.xref||"x")._m);AH[AM+".y"]=V.yref=="paper"?(1-((H+AO-J.t)/J.h)):(V.y+AO/Plotly.Axes.getFromId(P,V.yref||"y")._m);return Plotly.Lib.pauseEvent(AQ)};window.onmouseup=function(AO){window.onmousemove=null;window.onmouseup=null;if(P.dragged){Plotly.relayout(P,AH)}return Plotly.Lib.pauseEvent(AO)};return Plotly.Lib.pauseEvent(AJ)}}}};if(V.showarrow){W(0,0)}if(P.mainsite){g.node().onmousedown=function(z){if(Plotly.Fx.dragClear(P)){return true}var y=this,w=d3.select(this),v=Number(w.attr("x")),AB=Number(w.attr("y")),x={},AC="annotations["+a+"]",u=Plotly.Axes.getFromId(P,V.xref),AA=Plotly.Axes.getFromId(P,V.yref);if(u&&u.autorange){x[u._name+".autorange"]=true}if(AA&&AA.autorange){x[AA._name+".autorange"]=true}P.dragged=false;Plotly.Fx.setCursor(w);window.onmousemove=function(AG){var AE=AG.clientX-z.clientX,AD=AG.clientY-z.clientY;if(Math.abs(AE)<t){AE=0}if(Math.abs(AD)<t){AD=0}if(AE||AD){P.dragged=true}w.call(Plotly.Drawing.setPosition,v+AE,AB+AD);var AF="pointer";if(V.showarrow){x[AC+".ax"]=V.ax+AE;x[AC+".ay"]=V.ay+AD;W(AE,AD)}else{x[AC+".x"]=V.xref=="paper"?(Plotly.Fx.dragAlign(v+AE+c,b,J.l,J.l+J.w)):(V.x+AE/Plotly.Axes.getFromId(P,V.xref)._m);x[AC+".y"]=V.yref=="paper"?(1-Plotly.Fx.dragAlign(AB+AD+c,O,J.t,J.t+J.h)):(V.y+AD/Plotly.Axes.getFromId(P,V.yref)._m);if(V.xref!="paper"||V.yref!="paper"){AF=Plotly.Fx.dragCursors(V.xref=="paper"?0.5:x[AC+".x"],V.yref=="paper"?0.5:x[AC+".y"])}}Plotly.Fx.setCursor(w,AF);return Plotly.Lib.pauseEvent(AG)};window.onmouseup=function(AD){window.onmousemove=null;window.onmouseup=null;Plotly.Fx.setCursor(w);if(P.dragged){Plotly.relayout(P,x)}return Plotly.Lib.pauseEvent(AD)};return Plotly.Lib.pauseEvent(z)}}};function B(F,H){var E=H._id.charAt(0),J="_"+E+"type",I=F[J],G=H.type;if(I){if(I=="log"&&G!="log"){F[E]=Math.pow(10,F[E])}else{if(I!="log"&&G=="log"){F[E]=(F[E]>0)?Math.log(F[E])/Math.LN10:(H.range[0]+H.range[1])/2}}}F[J]=G}ARROWPATHS=["",{path:"M-2,-3V3L1,0Z",centerx:0.4},{path:"M-3,-2.5V2.5L2,0Z",centerx:0.7},{path:"M-4,-3L-1.2,-0.2V0.2L-4,3L2,0Z",centerx:0.45},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",centerx:0},{path:"M-4.2,-2.1L-0.4,-0.2V0.2L-4.2,2.1L-3.8,3L2.2,0L-3.8,-3Z",centerx:0.2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",centerx:0},{path:"M2,2V-2H-2V2Z",centerx:0}];function C(H,E,L,K){if(!$.isNumeric(K)){K=1}var G=H.node();headStyle=ARROWPATHS[E||0];if(!headStyle){return }if(typeof L!="string"||!L){L="end"}var F,J,N,I,M;if(G.nodeName=="line"){F={x:H.attr("x1"),y:H.attr("y1")};J={x:H.attr("x2"),y:H.attr("y2")};N=J;I=F}else{if(G.nodeName=="path"){F=G.getPointAtLength(0);N=G.getPointAtLength(0.1);M=G.getTotalLength();J=G.getPointAtLength(M);I=G.getPointAtLength(M-0.1)}}var O=function(T,R){var P=Math.atan2(T.y-R.y,T.x-R.x)*180/Math.PI,U=(H.attr("stroke-width")||1)*(K),S=H.attr("stroke")||"#000",Q=H.style("stroke-opacity")||1;if(E>5){P=0}d3.select(G.parentElement).append("path").attr("class",H.attr("class")).attr("data-cmmt",H.attr("data-cmmt")).style("fill",S).style("fill-opacity",Q).attr("stroke-width",0).attr("d",headStyle.path).attr("transform","translate("+T.x+","+T.y+")rotate("+P+")translate("+(headStyle.centerx*U*(1/K-1))+",0)scale("+U+")")};if(L.indexOf("start")>=0){O(F,N)}if(L.indexOf("end")>=0){O(J,I)}}D.allArrowheads=function(E){if(E){$(E).find("[data-arrowhead]").each(function(){C(d3.select(this).select("line"),Number($(this).attr("data-arrowhead")))});return }var G=[];for(var F=0;F<ARROWPATHS.length;F++){G.push({val:F,name:'<svg width="40" height="20" data-arrowhead="'+F+'" style="position: relative; top: 2px;"><line stroke="rgb(0,0,0)" style="fill: none;" x1="5" y1="10" x2="25" y2="10" stroke-width="2"></line></svg>'})}return G};D.calcAutorange=function(M){var K=M.layout,F=K._size;if(!K.annotations||!M.data||!M.data.length){return }if(!Plotly.Axes.list(M).filter(function(N){return N.autorange}).length){return }var L=K.annotations,H=K._paperdiv.node().getBoundingClientRect(),G=(H.left+H.right+F.l-F.r)/2,E=(H.top+H.bottom+F.t-F.b)/2,J={left:G,right:G,top:E,bottom:E};var I=[];L.forEach(function(O){var P=K[Plotly.Axes.id2name(O.xref||"x")],N=K[Plotly.Axes.id2name(O.yref||"y")];if(O.ref!="paper"&&((P&&P.autorange)||(N&&N.autorange))){if(P){B(O,P)}if(N){B(O,N)}I.push($.extend({},O,{x:0.5,y:0.5,xref:"paper",yref:"paper",x0:O.x,y0:O.y,opacity:1,xa:P,ya:N}))}});K.annotations=I;D.drawAll(M);K.annotations.forEach(function(Q,O){var P=K._infolayer.selectAll('g.annotation[data-index="'+O+'"]>g').node(),N=P?P.getBoundingClientRect():J,S=K._infolayer.selectAll('g.annotation[data-index="'+O+'"]>svg').node(),R=S?S.getBoundingClientRect():J;if(Q.xa){Plotly.Axes.expand(Q.xa,[Q.xa.l2c(Q.x0)],{ppadplus:Math.max(0,Math.max(N.right,R.right)-G),ppadminus:Math.max(0,G-Math.min(N.left,R.left))})}if(Q.ya){Plotly.Axes.expand(Q.ya,[Q.ya.l2c(Q.y0)],{ppadplus:Math.max(0,Math.max(N.bottom,R.bottom)-E),ppadminus:Math.max(0,E-Math.min(N.top,R.top))})}});K.annotations=L};function A(G,R,F,P,E,N,U,L){var Q=F-G,O=E-G,M=U-E,K=P-R,J=N-R,I=L-N,H=Q*I-M*K;if(H===0){return null}var T=(O*I-M*J)/H,S=(O*K-Q*J)/H;if(S<0||S>1||T<0||T>1){return null}return{x:G+Q*T,y:R+K*T}}}());(function(){var B=Plotly.Legend={};B.lines=function(D){var C=D[0].t;if(["scatter",undefined].indexOf(D[0].t.type)==-1){return }if(C.fill&&C.fill!="none"&&$.isNumeric(C.cdcurve)){d3.select(this).append("path").attr("data-curve",C.cdcurve).attr("d","M5,0h30v6h-30z").call(Plotly.Drawing.fillGroupStyle)}if(!C.mode||C.mode.indexOf("lines")==-1){return }d3.select(this).append("polyline").call(Plotly.Drawing.lineGroupStyle).attr("points","5,0 35,0")};B.points=function(I){var F=I[0].t;if(["scatter",undefined].indexOf(F.type)==-1||!F.mode){return }var D=F.mode.indexOf("markers")!=-1,E=F.mode.indexOf("text")!=-1;if(!D&&!E){return }var C=function(K){var J={tx:"Aa",mo:1};if(K[0].ms>16){J.ms=16}if(K[0].mlw>5){J.mlw=5}return[$.extend({},K[0],J)]},G=$.extend({},F,{ts:10,ms:Math.min(F.ms,16),msr:1,msm:"diameter",lw:Math.min(F.lw,10)});var H=d3.select(this).append("g").attr("class","legendpoints");if(D){H.selectAll("path").data(C).enter().append("path").call(Plotly.Drawing.pointStyle,G).attr("transform","translate(20,0)")}if(E){H.selectAll("text").data(C).enter().append("text").call(Plotly.Drawing.textPointStyle,G).attr("transform","translate(20,0)")}};B.bars=function(D){var C=D[0].t;if(!Plotly.Plots.isBar(C.type)){return }d3.select(this).append("g").attr("class","legendpoints").selectAll("path").data(Plotly.Lib.identity).enter().append("path").attr("d","M6,6H-6V-6H6Z").each(function(G){var E=(G.mlw+1||C.mlw+1||(G.t?G.t.mlw:0)+1)-1,F=d3.select(this);F.attr("stroke-width",E).call(Plotly.Drawing.fillColor,G.mc||C.mc||(G.t?G.t.mc:""));if(E){F.call(Plotly.Drawing.strokeColor,G.mlc||C.mlc||(G.t?G.t.mlc:""))}}).attr("transform","translate(20,0)")};B.boxes=function(D){var C=D[0].t;if(C.type!=="box"){return }d3.select(this).append("g").attr("class","legendpoints").selectAll("path").data(Plotly.Lib.identity).enter().append("path").attr("d","M6,6H-6V-6H6Z").each(function(G){var E=(G.lw+1||C.lw+1||(G.t?G.t.lw:0)+1)-1,F=d3.select(this);F.attr("stroke-width",E).call(Plotly.Drawing.fillColor,G.fc||C.fc||(G.t?G.t.fc:""));if(E){F.call(Plotly.Drawing.strokeColor,G.lc||C.lc||(G.t?G.t.lc:""))}}).attr("transform","translate(20,0)")};function A(E,F){var D=F.layout.font,C=F.layout.legend.font;return E.append("text").attr("class",function(G){return"legendtext text-"+G[0].t.curve}).call(Plotly.Drawing.setPosition,40,0).attr("text-anchor","start").call(Plotly.Drawing.font,C.family||D.family||"Arial",C.size||D.size||12,C.color||D.color||"#000")}B.draw=function(V){var P=V.layout,O=P.margin;P.showlegend=true;if(!P.legend){P.legend={}}var H=P.legend;P._infolayer.selectAll(".legend").remove();if(!V.calcdata){return }var L=[],Q;for(Q=0;Q<V.calcdata.length;Q++){if(V.calcdata[Q][0].t.visible!==false){L.push([V.calcdata[Q][0]])}}if(H.traceorder=="reversed"){L.reverse()}V.legend=P._infolayer.append("svg").attr("class","legend");var R=H.bordercolor||"#000",M=H.borderwidth||1,C=H.bgcolor||P.paper_bgcolor||"#fff";V.legend.append("rect").attr("class","bg").call(Plotly.Drawing.strokeColor,R).attr("stroke-width",M).call(Plotly.Drawing.fillColor,C);var N=V.legend.selectAll("g.traces").data(L);N.enter().append("g").attr("class","trace");N.append("g").call(Plotly.Drawing.traceStyle,V).each(B.bars).each(B.boxes).each(B.lines).each(B.points);var T=N.call(A,V).selectAll("text.legendtext");function I(){this.call(d3.plugly.convertToTspans);var W=this.attr("x");this.selectAll("tspan.line").attr({x:W})}if(V.mainsite){T.each(function(X,W){d3.select(this).attr({"data-unformatted":function(Z,Y){return Z[0].t.name}}).text(function(Z,Y){return Z[0].t.name}).call(d3.plugly.makeEditable).call(I).on("edit",function(a){this.attr({"data-unformatted":a});this.text(a).call(I);if(this.text()===""){a=" \u0020\u0020 "}var Y=Number(this.attr("class").split("-")[1]);var Z=Plotly.Lib.nestedProperty(V.data[Y],"name");Z.name=a;X[0].t.name=a;Plotly.restyle(V,Z.astr,a,Y)})})}else{T.each(function(X,W){d3.select(this).text(function(Z,Y){return Z[0].t.name}).call(I)})}var G=0,F=0;N.each(function(c){var a=d3.select(this),Y=a.select("text"),W=a.select(".legendpoints");if(c[0].t.showinlegend===false){a.remove();return }var b=Y.node().getBoundingClientRect();if(!W.node()){W=a.select("path")}if(!W.node()){W=a.select("polyline")}var Z=(!W.node())?b:W.node().getBoundingClientRect();Y.attr("y",(Z.top+Z.bottom-b.top-b.bottom)/2);var X=this.getBoundingClientRect();G=Math.max(G,b.width);a.attr("transform","translate("+M+","+(5+M+F+X.height/2)+")");F+=X.height+3});G+=45+M*2;F+=10+M*2;var K=P.width-O.l-O.r,U=P.height-O.t-O.b;if(!$.isNumeric(H.x)||(H.x>10&&H.x!=100)){H.x=0.98}if(!$.isNumeric(H.y)||(H.y>10&&H.y!=100)){H.y=0.98}var E=O.l+K*H.x,D=O.t+U*(1-H.y),S=3;if(Math.abs(H.x)==100&&Math.abs(H.y)==100){H.y=0.5}var J=V.changed;if(H.x==-100){E=S;if(V.lw!=-G-2*S){V.lw=-G-2*S;Plotly.relayout(V,"margin.l",O.l);return }}else{if(H.x==100){E=P.width-G-S;if(V.lw!=G+2*S){V.lw=G+2*S;Plotly.relayout(V,"margin.r",O.r);return }}else{if(V.lw){delete V.lw;Plotly.relayout(V,"margin.r",O.r);return }if(H.x>2/3){E-=G}else{if(H.x>1/3){E-=G/2}}}}if(H.y==-100){D=P.height-F-S;if(V.lh!=-F-2*S){V.lh=-F-2*S;Plotly.relayout(V,"margin.b",O.b);return }}else{if(H.y==100){D=S+16;if(V.lh!=F+2*S){V.lh=F+2*S;Plotly.relayout(V,"margin.t",O.t);return }}else{if(V.lh){delete V.lh;Plotly.relayout(V,"margin.t",O.t);return }if(H.y<1/3){D-=F}else{if(H.y<2/3){D-=F/2}}}}V.changed=J;if(E+G>P.width){E=P.width-G}if(E<0){E=0}if(D+F>P.height){D=P.height-F}if(D<0){D=0}V.legend.call(Plotly.Drawing.setRect,E,D,G,F);V.legend.selectAll(".bg").call(Plotly.Drawing.setRect,M/2,M/2,G-M,F-M);if(V.mainsite){V.legend.node().onmousedown=function(b){if(Plotly.Fx.dragClear(V)){return true}var c=this,W=d3.select(this),X=Number(W.attr("x")),Z=Number(W.attr("y")),Y=null,a=null;V.dragged=false;Plotly.Fx.setCursor(W);window.onmousemove=function(l){var h=l.clientX-b.clientX,f=l.clientY-b.clientY,g=P._size,k=Plotly.Fx.MINDRAG;if(Math.abs(h)<k){h=0}if(Math.abs(f)<k){f=0}if(h||f){V.dragged=true}W.call(Plotly.Drawing.setPosition,X+h,Z+f);var e=P._paperdiv.node().getBoundingClientRect();if(l.clientX>e.right-3*k||(V.lw>0&&h>-k)){Y=100}else{if(l.clientX<e.left+3*k||(V.lw<0&&h<k)){Y=-100}else{Y=Plotly.Fx.dragAlign(X+h,G,g.l,g.l+g.w)}}if(l.clientY>e.bottom-3*k||(V.lh<0&&f>-k)){a=-100}else{if(l.clientY<e.top+3*k||(V.lh>0&&f<k)){a=100}else{a=1-Plotly.Fx.dragAlign(Z+f,F,g.t,g.t+g.h)}}var j=Plotly.Fx.dragCursors(Y,a);Plotly.Fx.setCursor(W,j);return Plotly.Lib.pauseEvent(l)};window.onmouseup=function(e){window.onmousemove=null;window.onmouseup=null;Plotly.Fx.setCursor(W);if(V.dragged&&Y!==null&&a!==null){Plotly.relayout(V,{"legend.x":Y,"legend.y":a})}return Plotly.Lib.pauseEvent(e)};return Plotly.Lib.pauseEvent(b)}}}}());(function(){var B=Plotly.Drawing={};B.rgb=function(G){var H=tinycolor(G).toRgb();return"rgb("+Math.round(H.r)+", "+Math.round(H.g)+", "+Math.round(H.b)+")"};B.opacity=function(G){return tinycolor(G).alpha};B.addOpacity=function(G,I){var H=tinycolor(G).toRgb();return"rgba("+Math.round(H.r)+", "+Math.round(H.g)+", "+Math.round(H.b)+", "+I+")"};B.strokeColor=function(G,H){G.attr("stroke",B.rgb(H)).style("stroke-opacity",B.opacity(H))};B.fillColor=function(G,H){G.style("fill",B.rgb(H)).style("fill-opacity",B.opacity(H))};B.font=function(I,H,G,J){if(H!==undefined){I.attr("font-family",H)}if(G!==undefined){I.attr("font-size",G)}if(J!==undefined){I.call(B.fillColor,J)}};B.setPosition=function(H,G,I){H.attr("x",G).attr("y",I)};B.setSize=function(I,G,H){I.attr("width",G).attr("height",H)};B.setRect=function(J,G,K,H,I){J.call(B.setPosition,G,K).call(B.setSize,H,I)};B.translatePoints=function(H,I,G){H.each(function(L){var J=I.c2p(L.x),M=G.c2p(L.y),K=d3.select(this);if($.isNumeric(J)&&$.isNumeric(M)){if(this.nodeName=="text"){K.attr("x",J).attr("y",M)}else{K.attr("transform","translate("+J+","+M+")")}}else{K.remove()}})};B.traceStyle=function(H,I){var G=0,J=I.layout;H.style("opacity",function(K){return K[0].t.op}).each(function(K){if(Plotly.Plots.isBar(K[0].t.type)){G++}}).each(function(K){if(Plotly.Plots.isBar(K[0].t.type)&&((J.barmode=="stack"&&G>1)||(J.bargap===0&&J.bargroupgap===0&&!K[0].t.mlw))){d3.select(this).attr("shape-rendering","crispEdges")}})};B.lineGroupStyle=function(G){G.attr("stroke-width",function(H){return H[0].t.lw}).each(function(H){d3.select(this).call(B.strokeColor,H[0].t.lc)}).style("fill","none").attr("stroke-dasharray",function(J){var H=J[0].t.ld,I=Math.max(J[0].t.lw,3);if(H=="solid"){return""}if(H=="dot"){return I+","+I}if(H=="dash"){return(3*I)+","+(3*I)}if(H=="longdash"){return(5*I)+","+(5*I)}if(H=="dashdot"){return(3*I)+","+I+","+I+","+I}if(H=="longdashdot"){return(5*I)+","+(2*I)+","+I+","+(2*I)}return H})};B.fillGroupStyle=function(G){G.attr("stroke-width",0).each(function(L){var H=d3.select(this);var I=$(H.node()).parents(".plot-container").parent()[0];try{H.call(B.fillColor,I.calcdata[H.attr("data-curve")][0].t.fc)}catch(K){try{H.call(B.fillColor,L[0].t.fc)}catch(J){H.remove()}}})};var C=["circle","square","diamond","cross","x","triangle-up","triangle-down","triangle-left","triangle-right"];B.pointStyle=function(I,H){if(["scatter","box"].indexOf(H.type)!=-1){var G=H.msr||1,J=(H.msm=="area")?function(L){return Math.sqrt(L/G)}:function(L){return L/G};I.attr("d",function(V){var M=J(((V.ms+1||H.ms+1||(V.t?V.t.ms:0)+1)-1)/2);if(!$.isNumeric(M)||M<0){M=3}var Q=String(d3.round(M*2/Math.sqrt(3),2)),P=String(d3.round(M/2,2)),S=String(d3.round(M,2));var W=(V.mx||H.mx||(V.t?V.t.mx:""));if($.isNumeric(W)){W=C[W]}if(W=="square"){return"M"+S+","+S+"H-"+S+"V-"+S+"H"+S+"Z"}if(W=="diamond"){var Y=String(d3.round(M*Math.sqrt(2),2));return"M"+Y+",0L0,"+Y+"L-"+Y+",0L0,-"+Y+"Z"}if(W=="triangle-up"){return"M-"+Q+","+P+"H"+Q+"L0,-"+S+"Z"}if(W=="triangle-down"){return"M-"+Q+",-"+P+"H"+Q+"L0,"+S+"Z"}if(W=="triangle-right"){return"M-"+P+",-"+Q+"V"+Q+"L"+S+",0Z"}if(W=="triangle-left"){return"M"+P+",-"+Q+"V"+Q+"L-"+S+",0Z"}if(W=="cross"){var L=String(d3.round(M*0.4,2)),O=String(d3.round(M*1.2,2));return"M"+O+","+L+"H"+L+"V"+O+"H-"+L+"V"+L+"H-"+O+"V-"+L+"H-"+L+"V-"+O+"H"+L+"V-"+L+"H"+O+"Z"}if(W=="x"){var N=String(d3.round(M*0.8/Math.sqrt(2),2)),R="l"+N+","+N,U="l"+N+",-"+N,X="l-"+N+",-"+N,T="l-"+N+","+N;return"M0,"+N+R+U+X+U+X+T+X+T+R+T+R+"Z"}return"M"+S+",0A"+S+","+S+" 0 1,1 0,-"+S+"A"+S+","+S+" 0 0,1 "+S+",0Z"}).style("opacity",function(L){return(L.mo+1||H.mo+1||(L.t?L.t.mo:0)+1)-1})}var K={m:F(H,"m"),ml:F(H,"ml"),so:F(H,"so"),sol:F(H,"sol")};I.each(function(Q){var M=(Q.so)?"so":"m",P=M+"lw",R=M+"c",N=M+"lc",L=(Q[P]+1||H[P]+1||(Q.t?Q.t[P]:0)+1)-1,O=d3.select(this);O.attr("stroke-width",L).call(B.fillColor,K[M](Q[R]||H[R]||(Q.t?Q.t[R]:"")));if(L){O.call(B.strokeColor,K[M+"l"](Q[N]||H[N]||(Q.t?Q.t[N]:"")))}})};function F(K,H){var L;if((H+"scl") in K&&(H+"cmin") in K&&(H+"cmax") in K){var I=K[H+"scl"],J=K[H+"cmin"],G=K[H+"cmax"];if(typeof I=="string"&&I in Plotly.colorscales){I=Plotly.colorscales[I]}var N=I.map(function(O){return J+O[0]*(G-J)}),M=I.map(function(O){return O[1]});L=d3.scale.linear().domain(N).interpolate(d3.interpolateRgb).range(M);return function(O){return $.isNumeric(O)?L(O):O}}else{return Plotly.Lib.identity}}var E={start:1,end:-1,middle:0,bottom:1,top:-1};B.textPointStyle=function(H,G){H.each(function(N){var K=d3.select(this);if(!N.tx){K.remove();return }var O=N.tp||G.tp||(N.t?N.t.tp:""),P=O.indexOf("top")!=-1?"top":O.indexOf("bottom")!=-1?"bottom":"middle",M=O.indexOf("left")!=-1?"end":O.indexOf("right")!=-1?"start":"middle",Q=N.ts||G.ts||(N.t?N.t.tf:""),J=G.mode.indexOf("markers")==-1?0:(((N.ms+1||G.ms+1||(N.t?N.t.ms:0)+1)-1)/1.6+1);K.style("opacity",(N.mo+1||G.mo+1||(N.t?N.t.mo:0)+1)-1).call(B.font,N.tf||G.tf||(N.t?N.t.tf:""),Q,N.tc||G.tc||(N.t?N.t.tc:"")).attr("text-anchor",M);B.styleText(K.node(),N.tx);var L=K.selectAll("tspan"),I=(L[0].length-1)*D+1;L.attr("dx",E[M]*J);K.attr("dy",Q*0.75+E[P]*J+(E[P]-1)*I*Q/2)})};var A={"mu":"\u03bc","times":"\u00d7","plusmn":"\u00b1"};var D=1.3;B.styleText=function(X,P,S){if(P===undefined){return }var R=d3.select(X),Q=["sub","sup","b","i","font","a"],M=new RegExp("\x01(\\/?(br|"+Q.join("|")+")(\\s[^\x01\x02]*)?\\/?)\x02","gi"),O=/\x01([A-Za-z]+|#[0-9]+);/g,U=new RegExp("&("+Object.keys(A).join("|")+");","g"),V;R.selectAll("tspan").remove();var L=P.replace(/&/g,"\x01").replace(O,"&$1;").replace(/\x01/g,"&amp;").replace(/</g,"\x01").replace(/>/g,"\x02").replace(M,"<$1>").replace(/(<br(\s[^<>]*)?\/?>|\n)/gi,"</l><l>").replace(/\x01/g,"&lt;").replace(/\x02/g,"&gt;");for(V in Q){var N=L.match(new RegExp("<"+Q[V],"gi")),G=N?N.length:0;var K=L.match(new RegExp("<\\/"+Q[V],"gi")),W=K?K.length:0;while(W<G){W++;L+="</"+Q[V]+">"}}var I=/(<[^<>]*=\s*)([^<>\s"']+)(\s|>)/g;while(L.match(I)){L=L.replace(I,'$1"$2"$3')}L=L.replace(U,"<c>$1</c>");var H=new DOMParser().parseFromString("<t><l>"+L+"</l></t>","text/xml").getElementsByTagName("t")[0].childNodes;if(H[0].nodeName=="parsererror"){R.text(P);$(R).tooltip({title:"Oops! We didn't get that. You can style text with HTML-like tags, but all tags except &lt;br&gt; must be closed, and sometimes you have to use &amp;gt; for &gt; and &amp;lt; for &lt;."}).tooltip("show")}else{for(V=0;V<H.length;V++){var T=R.append("tspan").attr("class","nl");if(V>0){T.attr("x",R.attr("x")).attr("dy",D*R.attr("font-size"))}Y(T,H[V].childNodes)}}if(S){var J=X.getBoundingClientRect();if(J.width===0||J.height===0){R.selectAll("tspan").remove();B.styleText(X,"XXXXX");R.attr("opacity",0)}}function Y(b,g){function a(h){(b.text()?b.append("tspan"):b).text(h)}var c={sup:function(h){h.attr("baseline-shift","super").attr("font-size","70%")},sub:function(h){h.attr("baseline-shift","sub").attr("font-size","70%")},b:function(h){h.attr("font-weight","bold")},i:function(h){h.attr("font-style","italic")},font:function(o,l){for(var m=0;m<l.length;m++){var k=l[m],p=k.name.toLowerCase(),h=k.nodeValue;if(p=="color"){o.call(B.fillColor,h)}else{o.attr("font-"+p,h)}}},a:function(o,l){for(var m=0;m<l.length;m++){var k=l[m],p=k.name.toLowerCase(),h=k.nodeValue;if(p=="href"){o.attr("xlink:xlink:href",h)}}o.attr("target","_blank")}};for(var Z=0;Z<g.length;Z++){var f=g[Z].nodeName.toLowerCase(),e=g[Z].childNodes;if(f=="#text"){a(g[Z].nodeValue)}else{if(f=="c"){a(A[e[0].nodeValue]||"?")}else{if(c[f]){Y(b.append(f=="a"?"a":"tspan").call(c[f],g[Z].attributes),e)}}}}}}}());(function(){var A=window.Plotly.Histogram={};A.calc=function(S,R){if(R.visible===false){return }var F,M,Q,B=Plotly.Axes.getFromId(S,(R.bardir=="h")?R.yaxis||"y":R.xaxis||"x");var D=Plotly.Axes.convertOne(R,R.type.charAt(9),B);if((R.autobinx!==false)||!("xbins" in R)){R.xbins=Plotly.Axes.autoBin(D,B,R.nbinsx)}var G=(typeof (R.xbins.size)=="string"),O=G?[]:R.xbins,P,N,I=[],H=0,E=R.histnorm||"";F=[];M=[];Q=R.xbins.start;while(Q<R.xbins.end){P=Plotly.Axes.tickIncrement(Q,R.xbins.size);F.push((Q+P)/2);M.push(0);if(G){O.push(Q)}I.push(E.indexOf("density")!=-1?1/(P-Q):1);Q=P}for(Q=0;Q<D.length;Q++){N=Plotly.Lib.findBin(D[Q],O);if(N>=0&&N<M.length){M[N]+=I[N];H++}}if(E.indexOf("percent")!=-1){H/=100}if(E.indexOf("probability")!=-1||E.indexOf("percent")!=-1){M.forEach(function(T,U){M[U]/=H})}var J=Math.min(F.length,M.length),L=[],K=0,C=J-1;for(Q=0;Q<J;Q++){if(M[Q]){K=Q;break}}for(Q=J-1;Q>K;Q--){if(M[Q]){C=Q;break}}for(Q=K;Q<=C;Q++){if(($.isNumeric(F[Q])&&$.isNumeric(M[Q]))){L.push({p:F[Q],s:M[Q],b:0})}}return L}}());d3.selection.prototype.appendSVG=function(B){var C='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">'+B+"</svg>";var D=new DOMParser().parseFromString(C,"application/xml");var A=D.documentElement.firstChild;while(A){this.node().appendChild(this.node().ownerDocument.importNode(A,true));A=A.nextSibling}if(D.querySelector("parsererror")){console.log(D.querySelector("parsererror div").innerText);return null}return d3.select(this.node().lastChild)};d3.plugly={};d3.plugly.compileTemplate=function(B,A){return[].concat(A).map(function(D,C){return B.replace(/{([^}]*)}/g,function(F,E){return D[E]||""})}).join("\n")};d3.plugly.getSVGBBoxFromString=function(E,A){var C=d3.select("body").append("div").style({visibility:"none"});var B=C.append("svg").append("text").text(E).style(A);var D=B.node().getBBox();B.remove();return D};d3.plugly.html_entity_decode=function(B){var A=d3.select("body").append("div").style({display:"none"}).html(B);var C=B.replace(/(&[^;]*;)/gi,function(E,D){return A.html(E).text()});A.remove();return C};d3.plugly.convertToTspans=function(){var H=this.node().getBBox();var D=this.text();var G=d3.plugly.convertToSvg(D);var C=this;var F=G.match(/([^$]*)([$]+[^$]*[$]+)([^$]*)/);var I=D;var E=d3.select(C.node().parentNode);if(F){C.style({visibility:"hidden"});var B=d3.plugly.texToSVG(F[2],function(M){var P={"font-size":C.style("font-size"),"font-family":C.style("font-family")};var L=d3.plugly.getSVGBBoxFromString(F[1],P);if(E.empty()){return }var K=C.attr("class")+"-math";E.select("svg."+K).remove();E.appendSVG(M);var N=E.select("svg[style]:not([class])");var Q=H.height;var J=C.node().getBBox().x;var R=(K==="annotation-math")?0:H.y;N.attr({"class":K,height:Q,x:J,y:R,preserveAspectRatio:"xMinYMin meet"});var O=N.node().getBoundingClientRect().width;N.attr({x:J+O/2})})}else{if(!E.empty()){var A=C.attr("class")+"-math";E.select("svg."+A).remove()}this.text("");I=this.appendSVG(G);if(!I){this.text(D)}}return this};d3.plugly.texToSVG=function(C,B){var A=MathJax.Hub.queue;var D=null;var F="math-output-"+Math.random();var E=d3.select("body").append("div").attr({id:F}).style({display:"none"}).text(C);MathJax.Hub.Queue(["Typeset",MathJax.Hub,E.node()],function(H,G){B(E.select(".MathJax_SVG").html());E.remove()})};d3.plugly.convertToSvg=function(H){var C={sup:"baseline-shift:super;font-size:70%",sub:"baseline-shift:sub;font-size:70%",b:"font-weight:bold",i:"font-style:italic",a:"",font:"",span:"",br:"",em:"font-style:italic;font-weight:bold"};var B=d3.keys(C).map(function(L,K){return L.toUpperCase()});var A=d3.plugly.html_entity_decode(H);var J=A.split(/(<[^<>]*>)/).map(function(M,L){var K=M.match(/<(\/?)([^ >]*)[ ]?(.*)>/i);if(K&&(K[2] in C||B.indexOf(K[2])!=-1)){if((K[2]==="a"||K[2]==="A")&&K[3]){return'<a xlink:show="new" xlink:'+C[K[2]]+K[3]+">"}else{if((K[2]==="a"||K[2]==="A")&&K[1]){return"</a>"}else{if(K[1]){return"</tspan>"}else{if(K[3]){return"<tspan "+C[K[2]]+K[3]+">"}else{if(K[2]==="br"||K[2]==="BR"){return M}else{return'<tspan style="'+C[K[2]]+'">'}}}}}}else{return M.replace(/</g,"&lt;")}});var I=[];for(var E=J.indexOf("<br>");E>0;E=J.indexOf("<br>",E+1)){I.push(E)}var D=0;I.forEach(function(P,M){var Q=P+D;var L=J.slice(0,Q);var K="";for(var N=L.length-1;N>=0;N--){var O=L[N].match(/<(\/?).*>/i);if(O&&L[N]!=="<br>"){if(!O[1]){K=L[N]}break}}if(K){J.splice(Q+1,0,K);J.splice(Q,0,"</tspan>");D+=2}});var G=J.join("");var F=G.split(/<br>/gi);if(F.length>1){J=F.map(function(L,K){return'<tspan class="line" dy="'+(K*1.3)+'em">'+L+"</tspan>"})}return J.join("")};d3.plugly.alignSVGWith=function(B,A){return function(I,G){var J=B.node().getBBox();var K=this.node().getBBox();var L="50%";var D=L;var H="middle";var F=0;var E=0;var C=A.horizontalMargin||0;if(A.orientation==="under"){F=J.y+J.height}else{if(A.orientation==="over"){F=J.y}else{if(A.orientation==="inside"){F=J.y}}}if(A.verticalMargin){F+=A.verticalMargin}if(A.horizontalAlign==="center"){L="50%";H="middle";C=C/4}else{if(A.horizontalAlign==="right"){L="0%";H="start"}else{if(A.horizontalAlign==="left"){L="100%";H="end";C=-C}else{if(typeof A.horizontalAlign==="number"){L=A.horizontalAlign;H="middle"}}}}if(A.orientation==="inside"){D=0}this.attr({x:D,dx:C,y:F}).style({"text-anchor":H}).selectAll("tspan.line").attr({x:L,dx:C,y:F});return this}};d3.plugly.alignHTMLWith=function(A){return function(D,B){var C=A.node().getBoundingClientRect();this.style({top:C.top+"px",left:C.left+"px","z-index":1000});return this}};d3.plugly.alignHTMLWith2=function(A){return function(D,B){var C=A.node().getBoundingClientRect();this.style({left:C.left+"px","z-index":1000});return this}};d3.plugly.makeEditable=function(){var D=this;var C=d3.dispatch("edit","input","cancel");var E=this.text();this.style({"pointer-events":"all"}).attr({"xml:space":"preserve"}).on("click",function(H,G){A();d3.select(this).style({opacity:0});var F=d3.select(this).attr("class")+"-math";d3.select(this.parentNode).select("svg."+F).style({opacity:0})});function B(I){var G=I.node();var F=document.createRange();F.selectNodeContents(G);var H=window.getSelection();H.removeAllRanges();H.addRange(F);G.focus()}function A(){var F=d3.select("body").append("div").classed("plugly-editable editable",true);F.style({position:"absolute","font-family":D.style("font-family")||"Arial","font-size":D.style("font-size")||12,color:D.style("fill")||"black",opacity:1,"background-color":"transparent",outline:"#ffffff33 1px solid",margin:[-parseFloat(D.style("font-size"))/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:true}).text(D.attr("data-unformatted")).call(d3.plugly.alignHTMLWith(D)).on("blur",function(J,H){D.text(this.textContent).style({opacity:1});var G=D.attr("class")+"-math";d3.select(D.node().parentNode).select("svg."+G).style({opacity:1});var I=this.textContent;d3.select(this).transition().duration(0).remove();d3.select(document).on("mouseup",null);C.edit.call(D,I)}).on("focus",function(I,H){var G=this;d3.select(document).on("mouseup",function(K,J){if(d3.event.target===G){return false}if(document.activeElement===F.node()){F.node().blur()}})}).on("keyup",function(H,G){if(d3.event.which===27){D.style({opacity:1});d3.select(this).style({opacity:0}).on("blur",function(J,I){return false}).transition().remove();C.cancel.call(D,this.textContent)}else{C.input.call(D,this.textContent);d3.select(this).call(d3.plugly.alignHTMLWith2(D))}}).on("keydown",function(H,G){if(d3.event.which===13){this.blur()}}).call(B)}return d3.rebind(this,C,"on")};d3.plugly.wrap=function(A){return function(G,B){var F=this;function I(){var L=this.node().getBBox().height;this.text("").selectAll("tspan").data(K).enter().append("tspan").attr({x:0,y:function(N,M){return(M+1)*L}}).text(function(N,M){return N.join(" ")})}function D(N){var M=F.style({visibility:"hidden"}).text(N);var L=M.node().getBBox().width;F.style({visibility:"visible"}).text(H);return L}var H=this.text();var C=this.node().parentNode;var J=H.split(" ");var K=[[]];var E=0;J.forEach(function(M,L){if(D(K[E].concat(M).join(" "),C)>=A){E++;K[E]=[]}K[E].push(M)});this.call(I)}}
Plotly.BUILD="20131125b";
